diff --git a/.github/workflows/active-record-multi-tenant-tests.yml b/.github/workflows/active-record-multi-tenant-tests.yml
deleted file mode 100644
index 1a9d91b..0000000
--- a/.github/workflows/active-record-multi-tenant-tests.yml
+++ /dev/null
@@ -1,88 +0,0 @@
-name: Active Record Multi-Tenant Tests
-
-env:
-  CI: true
-on:
-  push:
-    branches:
-      - "**"
-  pull_request:
-    types: [ opened, reopened, synchronize ]
-
-jobs:
-
-  static-checks:
-    runs-on: ubuntu-latest
-    steps:
-      - uses: ruby/setup-ruby@v1
-        with:
-          ruby-version: 3.2
-          bundler-cache: true
-      - uses: actions/checkout@v4
-      - name: Rubocop static code analysis
-        run: |
-          gem install rubocop
-          rubocop
-  doc_checks:
-    runs-on: ubuntu-latest
-    steps:
-    - uses: actions/setup-python@v4
-      with:
-        python-version: 3.9
-    - uses: actions/checkout@v4
-    - name: Install python dependencies
-      run: |
-        pip install -r docs/requirements.txt
-    - name: Documentation Checks
-      run: |
-        cd docs
-        sphinx-build -W -b html source builds
-
-  build:
-    runs-on: ubuntu-latest
-    strategy:
-      fail-fast: false
-      matrix:
-        ruby:
-          - '3.0'
-          - '3.1'
-          - '3.2'
-          - '3.3'
-        appraisal:
-          - rails-6.0
-          - rails-6.1
-          - rails-7.0
-          - rails-7.1
-          - rails-7.2
-          - rails-8.0
-          - active-record-6.0
-          - active-record-6.1
-          - active-record-7.0
-          - active-record-7.1
-          - active-record-7.2
-          - active-record-8.0
-        citus_version:
-          - '10'
-          - '11'
-          - '12'
-
-    name: Ruby ${{ matrix.ruby }}/${{ matrix.gemfile }} / Citus ${{ matrix.citus_version }}
-    env:
-       APPRAISAL: ${{ matrix.appraisal }}
-       CITUS_VERSION: ${{ matrix.citus_version }}
-    steps:
-      - uses: actions/checkout@v4
-
-      - name: Start Citus Database environment
-        run: docker compose up -d
-
-      - uses: ruby/setup-ruby@v1
-        with:
-          ruby-version: ${{ matrix.ruby }}
-          bundler-cache: true
-
-      - name: Execute tests
-        run: bundle exec rake spec
-
-      - name: Upload coverage reports to Codecov
-        uses: codecov/codecov-action@v3
diff --git a/.gitignore b/.gitignore
index b600ebf..d8f0896 100644
--- a/.gitignore
+++ b/.gitignore
@@ -2,11 +2,3 @@ spec/debug.log
 pkg/
 *.rb#
 *.*~
-Gemfile.lock
-*.gemfile.lock
-.idea/
-.vagrant/
-Vagrantfile
-coverage/
-docs/build/
-.yardoc/
\ No newline at end of file
diff --git a/.readthedocs.yaml b/.readthedocs.yaml
deleted file mode 100644
index 688e898..0000000
--- a/.readthedocs.yaml
+++ /dev/null
@@ -1,15 +0,0 @@
-version: 2
-
-build:
-  os: "ubuntu-22.04"
-  tools:
-    python: "3.11"
-
-# Build from the docs/ directory with Sphinx
-sphinx:
-  configuration: docs/source/conf.py
-
-# Explicitly set the version of Python and its requirements
-python:
-  install:
-    - requirements: docs/requirements.txt
diff --git a/.rspec b/.rspec
deleted file mode 100644
index 18ed8e1..0000000
--- a/.rspec
+++ /dev/null
@@ -1 +0,0 @@
---force-color
diff --git a/.rubocop.yml b/.rubocop.yml
deleted file mode 100644
index 646389e..0000000
--- a/.rubocop.yml
+++ /dev/null
@@ -1,62 +0,0 @@
-# This is an example RuboCop configuration file with some commonly used options.
-
-# Run RuboCop on all Ruby files, except those in `vendor` and `node_modules` directories
-AllCops:
-  Exclude:
-    - 'vendor/**/*'
-    - 'node_modules/**/*'
-    - 'Vagrantfile'
-  TargetRubyVersion: 3.0
-  SuggestExtensions: false
-  NewCops: enable
-
-Gemspec/DevelopmentDependencies:
-  Enabled: false
-
-Lint/ConstantDefinitionInBlock:
-  Enabled: false
-
-Lint/EmptyBlock:
-  Enabled: false
-
-Lint/ShadowedArgument:
-  IgnoreImplicitReferences: true
-
-Style/ClassAndModuleChildren:
-  Enabled: false
-
-Style/Documentation:
-  Exclude:
-    - '**/*.rb'
-  Enabled: false
-
-Style/DocumentDynamicEvalDefinition:
-  Enabled: false
-
-Metrics/BlockLength:
-  Max: 650
-
-Metrics/MethodLength:
-  Max: 150
-
-Metrics/ClassLength:
-  Max: 200
-
-Metrics/ModuleLength:
-  Max: 200
-
-Metrics/AbcSize:
-  Enabled: false
-
-Metrics/PerceivedComplexity:
-  Enabled: false
-
-Metrics/CyclomaticComplexity:
-  Enabled: false
-
-Metrics/BlockNesting:
-  Enabled: false
-
-Naming/FileName:
-  Exclude:
-    - 'lib/activerecord-multi-tenant.rb'
diff --git a/.travis.yml b/.travis.yml
new file mode 100644
index 0000000..b564eb8
--- /dev/null
+++ b/.travis.yml
@@ -0,0 +1,46 @@
+sudo: required
+cache: bundler
+
+language: ruby
+
+rvm:
+  - 2.5.9
+  - 2.6.9
+  - 2.7.5
+
+gemfile:
+  - gemfiles/rails_5.2.gemfile
+  - gemfiles/rails_6.0.gemfile
+  - gemfiles/rails_6.1.gemfile
+  - gemfiles/rails_7.0.gemfile
+  - gemfiles/active_record_5.2.gemfile
+  - gemfiles/active_record_6.0.gemfile
+  - gemfiles/active_record_6.1.gemfile
+  - gemfiles/active_record_7.0.gemfile
+
+env:
+  - PREPARED_STATEMENTS=0
+  - PREPARED_STATEMENTS=1
+
+matrix:
+  fast_finish: true
+  exclude:
+    # Rails7 supports only >= 2.7.0
+    - rvm: 2.5.9
+      gemfile: gemfiles/rails_7.0.gemfile
+    - rvm: 2.5.9
+      gemfile: gemfiles/active_record_7.0.gemfile
+    - rvm: 2.6.9
+      gemfile: gemfiles/rails_7.0.gemfile
+    - rvm: 2.6.9
+      gemfile: gemfiles/active_record_7.0.gemfile
+
+services:
+  - docker
+
+before_install:
+  - docker-compose up -d
+  - gem install bundler -v 2.1.4
+
+script:
+  - bundle exec rake spec
diff --git a/Appraisals b/Appraisals
index e7b745b..bb14113 100644
--- a/Appraisals
+++ b/Appraisals
@@ -1,4 +1,14 @@
-# frozen_string_literal: true
+appraise 'rails-5.2' do
+  gem 'rails', '~> 5.2.0'
+  gem 'i18n',  '~> 0.9.5'
+  gem 'nokogiri', '~> 1.7.1'
+  gem 'nio4r', '~> 2.3.1'
+  gem 'sprockets', '~> 3.7.1'
+  gem 'byebug', '~> 11.0'
+  gem 'rake', '12.0.0'
+  gem 'redis', '3.3.3'
+  gem 'pry-byebug', '3.9.0'
+end
 
 appraise 'rails-6.0' do
   gem 'rails', '~> 6.0.3'
@@ -12,16 +22,16 @@ appraise 'rails-7.0' do
   gem 'rails', '~> 7.0.0'
 end
 
-appraise 'rails-7.1' do
-  gem 'rails', '~> 7.1.0'
-end
-
-appraise 'rails-7.2' do
-  gem 'rails', '~> 7.2.0'
-end
-
-appraise 'rails-8.0' do
-  gem 'rails', '~> 8.0.0'
+appraise 'active-record-5.2' do
+  gem 'activerecord', '~> 5.2.0'
+  gem 'i18n',  '~> 0.9.5'
+  gem 'nokogiri', '~> 1.7.1'
+  gem 'nio4r', '~> 2.3.1'
+  gem 'sprockets', '~> 3.7.1'
+  gem 'byebug', '~> 11.0'
+  gem 'rake', '12.0.0'
+  gem 'redis', '3.3.3'
+  gem 'pry-byebug', '3.9.0'
 end
 
 appraise 'active-record-6.0' do
@@ -35,15 +45,3 @@ end
 appraise 'active-record-7.0' do
   gem 'activerecord', '~> 7.0.0'
 end
-
-appraise 'active-record-7.1' do
-  gem 'activerecord', '~> 7.1.0'
-end
-
-appraise 'active-record-7.2' do
-  gem 'activerecord', '~> 7.2.0'
-end
-
-appraise 'active-record-8.0' do
-  gem 'activerecord', '~> 8.0.0'
-end
diff --git a/CHANGELOG.md b/CHANGELOG.md
index bb95949..045d1b6 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -1,64 +1,5 @@
 # Changelog
 
-## 2.4.0      2023-09-22
-* Adds citus 12 to test matrix (#210)
-* Adds Support for rails 7.1 (#208)
-* Fix missing scope in habtm.rb (#207)
-* Update logic inside the tenant_klass_defined? method (#202)
-
-## 2.3.0      2023-06-05
-* Adds has_and_belongs_to_many feature with tenant (#193)
-* Removes eol ruby versions 
-* Adds documentation in ReadTheDocs platform (#196)
-* Organizes badges in documentation and README.md (#197) 
-* Wrap ActiveRecord::Base with ActiveSupport.on_load (#199)
-
-## 2.2.0      2022-12-06
-* Handle changing tenant from `nil` to a value [#173](https://github.com/citusdata/activerecord-multi-tenant/pull/173)
-* Allow Partitioned tables to be created without a primary key [#172](https://github.com/citusdata/activerecord-multi-tenant/pull/172)
-* Only attempt to reload with MultiTenant when parition_key is present [#175](https://github.com/citusdata/activerecord-multi-tenant/pull/175)
-* Remove support for Ruby 2.5 & ActiveRecord 5.2
-
-## 2.1.6      2022-11-23
-* Fix undefined wrap_methods error & wrap_methods version check [#170](https://github.com/citusdata/activerecord-multi-tenant/pull/170)
-
-## 2.1.5      2022-11-20
-* Fix `MultiTenant.without` codegen bug in Rails 6.1+ [#168](https://github.com/citusdata/activerecord-multi-tenant/pull/168)
-
-## 2.1.4      2022-11-03
-* Fixes #166 where db:schema:dump is broken when using this gem with MySQL [#167](https://github.com/citusdata/activerecord-multi-tenant/pull/167)
-
-## 2.1.3      2022-10-27
-* Error when calling a method that takes keyword arguments with MultiTenant.wrap_methods [#164](https://github.com/citusdata/activerecord-multi-tenant/pull/164)
-
-## 2.1.2      2022-10-26
-* Fixes issue when wraping methods that require a block [#162](https://github.com/citusdata/activerecord-multi-tenant/pull/162)
-
-## 2.1.1      2022-10-20
-* Fix query building for models with mismatched partition_keys [#150](https://github.com/citusdata/activerecord-multi-tenant/pull/150)
-* Identify tenant even if class name is nonstandard [#152](https://github.com/citusdata/activerecord-multi-tenant/pull/152)
-* Add current_tenant_id to WHERE clauses when calling methods on activerecord instance or its associations [#154](https://github.com/citusdata/activerecord-multi-tenant/pull/154)
-* Make create_distributed_table, create_reference_table reversible & add ruby wrapper for rebalance_table_shards [#155](https://github.com/citusdata/activerecord-multi-tenant/pull/155)
-* Support create_distributed_table, create_reference_table in schema.rb [#156](https://github.com/citusdata/activerecord-multi-tenant/pull/156)
-* Add client and server sidekiq middleware to sidekiq middleware chain [#158](https://github.com/citusdata/activerecord-multi-tenant/pull/158)
-
-## 2.0.0      2022-05-19
-
-* Replace RequestStore with CurrentAttributes [#139](https://github.com/citusdata/activerecord-multi-tenant/pull/139)
-* Support changing table_name after calling multi_tenant [#128](https://github.com/citusdata/activerecord-multi-tenant/pull/128)
-* Allow to use uuid as primary key on partition table [#112](https://github.com/citusdata/activerecord-multi-tenant/pull/112)
-* Support latest Rails 5.2 [#145](https://github.com/citusdata/activerecord-multi-tenant/pull/145)
-* Support optional: true for belongs_to [#147](https://github.com/citusdata/activerecord-multi-tenant/pull/147)
-
-
-## 1.2.0      2022-03-29
-
-* Test Rails 7 & Ruby 3
-* Fix regression in 1.1.1 involving deleted tenants [#123](https://github.com/citusdata/activerecord-multi-tenant/pull/123)
-* Fix incorrect SQL generated when joining two models and one has a default scope [#132](https://github.com/citusdata/activerecord-multi-tenant/pull/132)
-* Update for Rails 5+ removal of type_cast_for_database [#135](https://github.com/citusdata/activerecord-multi-tenant/pull/135)
-
-
 ## 1.1.1      2021-01-15
 
 * Add support for Rails 6.1 [#108](https://github.com/citusdata/activerecord-multi-tenant/pull/108)
diff --git a/Gemfile b/Gemfile
index 3ad7db9..e37a382 100644
--- a/Gemfile
+++ b/Gemfile
@@ -1,9 +1,5 @@
-# frozen_string_literal: true
-
 source 'https://rubygems.org'
 
 gemspec
+
 gem 'appraisal'
-gem 'rubocop', require: false, group: 'test'
-gem 'simplecov'
-gem 'simplecov-cobertura'
diff --git a/Gemfile.lock b/Gemfile.lock
new file mode 100644
index 0000000..1ac5d5b
--- /dev/null
+++ b/Gemfile.lock
@@ -0,0 +1,201 @@
+PATH
+  remote: .
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      activejob (= 6.0.3.3)
+      activerecord (= 6.0.3.3)
+      activestorage (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+      mail (>= 2.7.1)
+    actionmailer (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      actionview (= 6.0.3.3)
+      activejob (= 6.0.3.3)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (6.0.3.3)
+      actionview (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+      rack (~> 2.0, >= 2.0.8)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      activerecord (= 6.0.3.3)
+      activestorage (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+      nokogiri (>= 1.8.5)
+    actionview (6.0.3.3)
+      activesupport (= 6.0.3.3)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (6.0.3.3)
+      activesupport (= 6.0.3.3)
+      globalid (>= 0.3.6)
+    activemodel (6.0.3.3)
+      activesupport (= 6.0.3.3)
+    activerecord (6.0.3.3)
+      activemodel (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+    activestorage (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      activejob (= 6.0.3.3)
+      activerecord (= 6.0.3.3)
+      marcel (~> 0.3.1)
+    activesupport (6.0.3.3)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 0.7, < 2)
+      minitest (~> 5.1)
+      tzinfo (~> 1.1)
+      zeitwerk (~> 2.2, >= 2.2.2)
+    appraisal (2.2.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.0.1)
+    coderay (1.1.2)
+    concurrent-ruby (1.1.7)
+    connection_pool (2.2.2)
+    crass (1.0.6)
+    diff-lcs (1.3)
+    erubi (1.9.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (1.8.5)
+      concurrent-ruby (~> 1.0)
+    loofah (2.7.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (0.9.2)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.5.0)
+    minitest (5.14.4)
+    nio4r (2.5.4)
+    nokogiri (1.11.1)
+      mini_portile2 (~> 2.5.0)
+      racc (~> 1.4)
+    pg (1.1.4)
+    pry (0.12.2)
+      coderay (~> 1.1.0)
+      method_source (~> 0.9.0)
+    pry-byebug (3.7.0)
+      byebug (~> 11.0)
+      pry (~> 0.10)
+    racc (1.5.2)
+    rack (2.2.3)
+    rack-protection (2.0.5)
+      rack
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (6.0.3.3)
+      actioncable (= 6.0.3.3)
+      actionmailbox (= 6.0.3.3)
+      actionmailer (= 6.0.3.3)
+      actionpack (= 6.0.3.3)
+      actiontext (= 6.0.3.3)
+      actionview (= 6.0.3.3)
+      activejob (= 6.0.3.3)
+      activemodel (= 6.0.3.3)
+      activerecord (= 6.0.3.3)
+      activestorage (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+      bundler (>= 1.3.0)
+      railties (= 6.0.3.3)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (6.0.3.3)
+      actionpack (= 6.0.3.3)
+      activesupport (= 6.0.3.3)
+      method_source
+      rake (>= 0.8.7)
+      thor (>= 0.20.3, < 2.0)
+    rake (13.0.1)
+    redis (4.1.2)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.8.0)
+      rspec-core (~> 3.8.0)
+      rspec-expectations (~> 3.8.0)
+      rspec-mocks (~> 3.8.0)
+    rspec-core (3.8.2)
+      rspec-support (~> 3.8.0)
+    rspec-expectations (3.8.4)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.8.0)
+    rspec-mocks (3.8.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.8.0)
+    rspec-rails (3.8.2)
+      actionpack (>= 3.0)
+      activesupport (>= 3.0)
+      railties (>= 3.0)
+      rspec-core (~> 3.8.0)
+      rspec-expectations (~> 3.8.0)
+      rspec-mocks (~> 3.8.0)
+      rspec-support (~> 3.8.0)
+    rspec-support (3.8.2)
+    sidekiq (5.2.7)
+      connection_pool (~> 2.2, >= 2.2.2)
+      rack (>= 1.5.0)
+      rack-protection (>= 1.5.0)
+      redis (>= 3.3.5, < 5)
+    sprockets (4.0.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.2)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (0.20.3)
+    thread_safe (0.3.6)
+    tzinfo (1.2.7)
+      thread_safe (~> 0.1)
+    websocket-driver (0.7.3)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.4.0)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/README.md b/README.md
index 34e97d8..cd9cbae 100644
--- a/README.md
+++ b/README.md
@@ -1,5 +1,4 @@
-# activerecord-multi-tenant 
-[![Build Status](https://github.com/citusdata/activerecord-multi-tenant/actions/workflows/active-record-multi-tenant-tests.yml/badge.svg)](https://github.com/citusdata/activerecord-multi-tenant/actions/workflows/active-record-multi-tenant-tests.yml) [![codecov](https://codecov.io/gh/citusdata/activerecord-multi-tenant/branch/master/graph/badge.svg?token=rw0TsEk4Ld)](https://codecov.io/gh/citusdata/activerecord-multi-tenant) [ ![Gems Version](https://img.shields.io/gem/v/activerecord-multi-tenant.svg)](https://rubygems.org/gems/activerecord-multi-tenant)[ ![Gem Download Count](https://img.shields.io/gem/dt/activerecord-multi-tenant.svg)](https://rubygems.org/gems/activerecord-multi-tenant) [![Documentation Status](https://readthedocs.org/projects/activerecord-multi-tenant/badge/?version=latest)](https://activerecord-multi-tenant.readthedocs.io/en/latest/?badge=latest) 
+# activerecord-multi-tenant [ ![](https://img.shields.io/gem/v/activerecord-multi-tenant.svg)](https://rubygems.org/gems/activerecord-multi-tenant) [ ![](https://img.shields.io/gem/dt/activerecord-multi-tenant.svg)](https://rubygems.org/gems/activerecord-multi-tenant)
 
 Introduction Post: https://www.citusdata.com/blog/2017/01/05/easily-scale-out-multi-tenant-apps/
 
@@ -17,7 +16,7 @@ gem 'activerecord-multi-tenant'
 
 ## Supported Rails versions
 
-All Ruby on Rails versions starting with 6.0 or newer (up to 7.0) are supported.
+All Ruby on Rails versions starting with 4.2 or newer (up to 6.0) are supported.
 
 This gem only supports ActiveRecord (the Rails default ORM), and not alternative ORMs like Sequel.
 
diff --git a/Rakefile b/Rakefile
index e5ff0a2..65c7261 100644
--- a/Rakefile
+++ b/Rakefile
@@ -1,9 +1,7 @@
-# frozen_string_literal: true
-
 require 'rubygems'
 require 'bundler/setup'
 require 'bundler/gem_tasks'
 
 require 'rspec/core/rake_task'
 RSpec::Core::RakeTask.new(:spec)
-task default: :spec
+task :default => :spec
diff --git a/activerecord-multi-tenant.gemspec b/activerecord-multi-tenant.gemspec
index 0811991..0a0bf9c 100644
--- a/activerecord-multi-tenant.gemspec
+++ b/activerecord-multi-tenant.gemspec
@@ -1,36 +1,29 @@
-# frozen_string_literal: true
-
-$LOAD_PATH.push File.expand_path('lib', __dir__)
+$:.push File.expand_path('../lib', __FILE__)
 require 'activerecord-multi-tenant/version'
 
-Gem::Specification.new do |spec|
-  spec.name = 'activerecord-multi-tenant'
-  spec.version = MultiTenant::VERSION
-  spec.summary = 'ActiveRecord/Rails integration for multi-tenant databases, ' \
-                 'in particular the Citus extension for PostgreSQL'
-  spec.description = ''
-  spec.authors = ['Citus Data']
-  spec.email = 'engage@citusdata.com'
-  spec.required_ruby_version = '>= 3.0.0'
-  spec.metadata = { 'rubygems_mfa_required' => 'true' }
-
-  spec.files = `git ls-files`.split("\n")
-  spec.require_paths = ['lib']
-  spec.homepage = 'https://github.com/citusdata/activerecord-multi-tenant'
-  spec.license = 'MIT'
+Gem::Specification.new do |s|
+  s.name        = 'activerecord-multi-tenant'
+  s.version     = MultiTenant::VERSION
+  s.summary     = 'ActiveRecord/Rails integration for multi-tenant databases, in particular the Citus extension for PostgreSQL'
+  s.description = ''
+  s.authors     = ['Citus Data']
+  s.email       = 'engage@citusdata.com'
 
-  spec.add_dependency 'rails', '>= 6'
+  s.files         = `git ls-files`.split("\n")
+  s.test_files    = `git ls-files -- {spec}/*`.split("\n")
+  s.require_paths = ['lib']
+  s.homepage      = 'https://github.com/citusdata/activerecord-multi-tenant'
+  s.license       = 'MIT'
 
-  spec.add_development_dependency 'anbt-sql-formatter'
-  spec.add_development_dependency 'codecov'
-  spec.add_development_dependency 'pg'
-  spec.add_development_dependency 'pry'
-  spec.add_development_dependency 'pry-byebug'
-  spec.add_development_dependency 'rake'
-  spec.add_development_dependency 'rspec', '>= 3.0'
-  spec.add_development_dependency 'rspec-rails'
-  spec.add_development_dependency 'rubocop'
-  spec.add_development_dependency 'sidekiq'
+  s.add_runtime_dependency('request_store', '>= 1.0.5')
+  s.add_dependency('rails','>= 4.2')
 
-  spec.add_development_dependency 'thor'
+  s.add_development_dependency 'rspec', '>= 3.0'
+  s.add_development_dependency 'rspec-rails'
+  s.add_development_dependency 'pg'
+  s.add_development_dependency 'rake'
+  s.add_development_dependency 'sidekiq'
+  s.add_development_dependency 'thor'
+  s.add_development_dependency 'pry'
+  s.add_development_dependency 'pry-byebug'
 end
diff --git a/docker-compose.yml b/docker-compose.yml
index 84260ca..696e806 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -2,31 +2,25 @@ version: '2.1'
 
 services:
   master:
-    container_name: "${COMPOSE_PROJECT_NAME:-citus}_master"
-    image: 'citusdata/citus:${CITUS_VERSION:-11.2}'
-    ports: [ '5600:5432' ]
-    labels: [ 'com.citusdata.role=Master' ]
-    environment:
-      - POSTGRES_HOST_AUTH_METHOD=trust
-    command: -c fsync=off -c full_page_writes=off
+    image: 'citusdata/citus:7.5.1'
+    ports: ['5600:5432']
+    labels: ['com.citusdata.role=Master']
+    volumes: ['/var/run/postgresql']
+  manager:
+    container_name: "${COMPOSE_PROJECT_NAME:-citus}_manager"
+    image: 'citusdata/membership-manager:0.1.0'
+    volumes: ['/var/run/docker.sock:/var/run/docker.sock']
+    depends_on: { master: { condition: service_healthy } }
   worker1:
-    image: 'citusdata/citus:${CITUS_VERSION:-11.2}'
-    ports: [ '5601:5432' ]
-    labels: [ 'com.citusdata.role=Worker' ]
+    image: 'citusdata/citus:7.5.1'
+    labels: ['com.citusdata.role=Worker']
     depends_on: { manager: { condition: service_healthy } }
-    environment:
-      - POSTGRES_HOST_AUTH_METHOD=trust
-    command: -c fsync=off -c full_page_writes=off
   worker2:
-    image: 'citusdata/citus:${CITUS_VERSION:-11.2}'
-    ports: [ '5602:5432' ]
-    labels: [ 'com.citusdata.role=Worker' ]
+    image: 'citusdata/citus:7.5.1'
+    labels: ['com.citusdata.role=Worker']
     depends_on: { manager: { condition: service_healthy } }
-    environment:
-      - POSTGRES_HOST_AUTH_METHOD=trust
-    command: -c fsync=off -c full_page_writes=off
-  manager:
-    container_name: "${COMPOSE_PROJECT_NAME:-citus}_manager"
-    image: 'citusdata/membership-manager:0.2.0'
-    volumes: [ '/var/run/docker.sock:/var/run/docker.sock' ]
-    depends_on: { master: { condition: service_healthy } }
+  healthcheck:
+    image: busybox
+    depends_on:
+      worker1: { condition: service_healthy }
+      worker2: { condition: service_healthy }
diff --git a/docs/.gitignore b/docs/.gitignore
deleted file mode 100644
index 394d044..0000000
--- a/docs/.gitignore
+++ /dev/null
@@ -1,3 +0,0 @@
-# Ignore everything in this directory
-.yardoc/*
-
diff --git a/docs/Makefile b/docs/Makefile
deleted file mode 100644
index a2e58bb..0000000
--- a/docs/Makefile
+++ /dev/null
@@ -1,28 +0,0 @@
-# Minimal makefile for Sphinx documentation
-#
-
-# You can set these variables from the command line, and also
-# from the environment for the first two.
-SPHINXOPTS    ?=
-SPHINXBUILD   ?= sphinx-build
-SOURCEDIR     = source
-BUILDDIR      = build
-
-# Put it first so that "make" without argument is like "make help".
-help:
-	@$(SPHINXBUILD) -M help "$(SOURCEDIR)" "$(BUILDDIR)" $(SPHINXOPTS) $(O)
-
-.PHONY: help Makefile
-
-# New target that executes the bash script before calling the original target
-build-docs: pre-build   # Change 'html' to the target you want to execute
-
-pre-build:
-	# Execute your bash script here
-	bash api-reference.sh
-
-# Catch-all target: route all unknown targets to Sphinx using the new
-# "make mode" option.  $(O) is meant as a shortcut for $(SPHINXOPTS).
-html:
-	@$(SPHINXBUILD) -M $@ "$(SOURCEDIR)" "$(BUILDDIR)" $(SPHINXOPTS) $(O)
-
diff --git a/docs/api-reference.sh b/docs/api-reference.sh
deleted file mode 100644
index 1be5a3b..0000000
--- a/docs/api-reference.sh
+++ /dev/null
@@ -1,10 +0,0 @@
-#!/bin/bash
-
-# This script is used to generate the API reference documentation for the
-# project. It is intended to be run from the root of the project directory.
-# It requires the following tools to be installed:
-# - yard (gem install yard)
-echo "Generating API reference documentation..."
-echo "Pwd: $(pwd)"
-cd ..
-yard doc --output-dir docs/source/_static/api-reference
diff --git a/docs/requirements.in b/docs/requirements.in
deleted file mode 100644
index da3e99a..0000000
--- a/docs/requirements.in
+++ /dev/null
@@ -1,4 +0,0 @@
-sphinxnotes-strike
-sphinx
-sphinx_rtd_theme
-readthedocs-sphinx-search
\ No newline at end of file
diff --git a/docs/requirements.txt b/docs/requirements.txt
deleted file mode 100644
index 37de70e..0000000
--- a/docs/requirements.txt
+++ /dev/null
@@ -1,62 +0,0 @@
-#
-# This file is autogenerated by pip-compile with Python 3.10
-# by the following command:
-#
-#    pip-compile requirements.in
-#
-alabaster==0.7.13
-    # via sphinx
-babel==2.12.1
-    # via sphinx
-certifi==2023.7.22
-    # via requests
-charset-normalizer==3.1.0
-    # via requests
-docutils==0.18.1
-    # via
-    #   sphinx
-    #   sphinx-rtd-theme
-idna==3.4
-    # via requests
-imagesize==1.4.1
-    # via sphinx
-jinja2==3.1.2
-    # via sphinx
-markupsafe==2.1.2
-    # via jinja2
-packaging==23.1
-    # via sphinx
-pygments==2.15.1
-    # via sphinx
-readthedocs-sphinx-search==0.3.1
-    # via -r requirements.in
-requests==2.31.0
-    # via sphinx
-snowballstemmer==2.2.0
-    # via sphinx
-sphinx==6.2.1
-    # via
-    #   -r requirements.in
-    #   sphinx-rtd-theme
-    #   sphinxcontrib-jquery
-    #   sphinxnotes-strike
-sphinx-rtd-theme==1.2.1
-    # via -r requirements.in
-sphinxcontrib-applehelp==1.0.4
-    # via sphinx
-sphinxcontrib-devhelp==1.0.2
-    # via sphinx
-sphinxcontrib-htmlhelp==2.0.1
-    # via sphinx
-sphinxcontrib-jquery==4.1
-    # via sphinx-rtd-theme
-sphinxcontrib-jsmath==1.0.1
-    # via sphinx
-sphinxcontrib-qthelp==1.0.3
-    # via sphinx
-sphinxcontrib-serializinghtml==1.1.5
-    # via sphinx
-sphinxnotes-strike==1.2
-    # via -r requirements.in
-urllib3==2.0.7
-    # via requests
diff --git a/docs/source/_static/api-reference/ActiveRecord.html b/docs/source/_static/api-reference/ActiveRecord.html
deleted file mode 100644
index 2e8e558..0000000
--- a/docs/source/_static/api-reference/ActiveRecord.html
+++ /dev/null
@@ -1,130 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index (A)</a> &raquo;
-    
-    
-    <span class="title">ActiveRecord</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/habtm.rb<span class="defines">,<br />
-  lib/activerecord-multi-tenant/query_rewriter.rb,<br /> lib/activerecord-multi-tenant/migrations.rb,<br /> lib/activerecord-multi-tenant/migrations.rb</span>
-</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>This module extension is a monkey patch to the ActiveRecord::Associations::ClassMethods module. It overrides the has_and_belongs_to_many method to add the tenant_id to the join table if the tenant_enabled option is set to true.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-      <strong class="modules">Modules:</strong> <span class='object_link'><a href="ActiveRecord/Associations.html" title="ActiveRecord::Associations (module)">Associations</a></span>, <span class='object_link'><a href="ActiveRecord/ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span>, <span class='object_link'><a href="ActiveRecord/QueryMethods.html" title="ActiveRecord::QueryMethods (module)">QueryMethods</a></span>
-    
-  
-    
-      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ActiveRecord/SchemaDumper.html" title="ActiveRecord::SchemaDumper (class)">SchemaDumper</a></span>
-    
-  
-</p>
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/Associations.html b/docs/source/_static/api-reference/ActiveRecord/Associations.html
deleted file mode 100644
index 018e5f7..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/Associations.html
+++ /dev/null
@@ -1,117 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord::Associations
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::Associations";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (A)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
-     &raquo; 
-    <span class="title">Associations</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord::Associations
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/habtm.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Associations/ClassMethods.html" title="ActiveRecord::Associations::ClassMethods (module)">ClassMethods</a></span>
-    
-  
-    
-      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Associations/Association.html" title="ActiveRecord::Associations::Association (class)">Association</a></span>
-    
-  
-</p>
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/Associations/Association.html b/docs/source/_static/api-reference/ActiveRecord/Associations/Association.html
deleted file mode 100644
index 8818d1e..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/Associations/Association.html
+++ /dev/null
@@ -1,285 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: ActiveRecord::Associations::Association
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::Associations::Association";
-  relpath = '../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../_index.html">Index (A)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Associations.html" title="ActiveRecord::Associations (module)">Associations</a></span></span>
-     &raquo; 
-    <span class="title">Association</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: ActiveRecord::Associations::Association
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">ActiveRecord::Associations::Association</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/model_extensions.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>skips statement caching for classes that is Multi-tenant or has a multi-tenant relation</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#skip_statement_cache%3F-instance_method" title="#skip_statement_cache? (instance method)">#<strong>skip_statement_cache?</strong>(*scope)  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#skip_statement_cache_orig-instance_method" title="#skip_statement_cache_orig (instance method)">#<strong>skip_statement_cache_orig</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="skip_statement_cache?-instance_method">
-  
-    #<strong>skip_statement_cache?</strong>(*scope)  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-194
-195
-196
-197
-198
-199
-200
-201
-202
-203</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/model_extensions.rb', line 194</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_skip_statement_cache?'>skip_statement_cache?</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:scoped_by_tenant?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_scoped_by_tenant?'>scoped_by_tenant?</span>
-
-  <span class='kw'>if</span> <span class='id identifier rubyid_reflection'>reflection</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection'>through_reflection</span>
-    <span class='id identifier rubyid_through_klass'>through_klass</span> <span class='op'>=</span> <span class='id identifier rubyid_reflection'>reflection</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span>
-    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_through_klass'>through_klass</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:scoped_by_tenant?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_through_klass'>through_klass</span><span class='period'>.</span><span class='id identifier rubyid_scoped_by_tenant?'>scoped_by_tenant?</span>
-  <span class='kw'>end</span>
-
-  <span class='id identifier rubyid_skip_statement_cache_orig'>skip_statement_cache_orig</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="skip_statement_cache_orig-instance_method">
-  
-    #<strong>skip_statement_cache_orig</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-192</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/model_extensions.rb', line 192</span>
-
-<span class='kw'>alias</span> <span class='id identifier rubyid_skip_statement_cache_orig'>skip_statement_cache_orig</span> <span class='id identifier rubyid_skip_statement_cache?'>skip_statement_cache?</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/Associations/ClassMethods.html b/docs/source/_static/api-reference/ActiveRecord/Associations/ClassMethods.html
deleted file mode 100644
index 2d1785e..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/Associations/ClassMethods.html
+++ /dev/null
@@ -1,255 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord::Associations::ClassMethods
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::Associations::ClassMethods";
-  relpath = '../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Associations.html" title="ActiveRecord::Associations (module)">Associations</a></span></span>
-     &raquo; 
-    <span class="title">ClassMethods</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord::Associations::ClassMethods
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/habtm.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#has_and_belongs_to_many_with_tenant-instance_method" title="#has_and_belongs_to_many_with_tenant (instance method)">#<strong>has_and_belongs_to_many_with_tenant</strong>(name, options = {}, &amp;extension)  &#x21d2; Object </a>
-    
-
-    
-      (also: #has_and_belongs_to_many)
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>rubocop:disable Naming/PredicateName.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="has_and_belongs_to_many_with_tenant-instance_method">
-  
-    #<strong>has_and_belongs_to_many_with_tenant</strong>(name, options = {}, &amp;extension)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-    <span class="aliases">Also known as:
-    <span class="names"><span id='has_and_belongs_to_many-instance_method'>has_and_belongs_to_many</span></span>
-    </span>
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Naming/PredicateName</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-11
-12
-13
-14
-15
-16
-17
-18
-19
-20
-21
-22
-23
-24
-25
-26
-27
-28
-29
-30
-31
-32
-33
-34
-35
-36
-37
-38
-39
-40
-41
-42
-43
-44</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/habtm.rb', line 11</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_has_and_belongs_to_many_with_tenant'>has_and_belongs_to_many_with_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
-  <span class='comment'># rubocop:enable Naming/PredicateName
-</span>  <span class='id identifier rubyid_has_and_belongs_to_many_without_tenant'>has_and_belongs_to_many_without_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
-
-  <span class='id identifier rubyid_middle_reflection'>middle_reflection</span> <span class='op'>=</span> <span class='id identifier rubyid__reflections'>_reflections</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection'>through_reflection</span>
-  <span class='id identifier rubyid_join_model'>join_model</span> <span class='op'>=</span> <span class='id identifier rubyid_middle_reflection'>middle_reflection</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span>
-
-  <span class='comment'># get tenant_enabled from options and if it is not set, set it to false
-</span>  <span class='id identifier rubyid_tenant_enabled'>tenant_enabled</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tenant_enabled</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
-
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tenant_enabled'>tenant_enabled</span>
-
-  <span class='id identifier rubyid_tenant_class_name'>tenant_class_name</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tenant_class_name</span><span class='rbracket'>]</span>
-  <span class='id identifier rubyid_tenant_column'>tenant_column</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tenant_column</span><span class='rbracket'>]</span>
-
-  <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_tenant_column'>tenant_column</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\w+)_id</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_tenant_field_name'>tenant_field_name</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span> <span class='op'>?</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tenant</span><span class='tstring_end'>&#39;</span></span>
-
-  <span class='id identifier rubyid_join_model'>join_model</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
-    <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='id identifier rubyid_tenant_field_name'>tenant_field_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='label'>class_name:</span> <span class='id identifier rubyid_tenant_class_name'>tenant_class_name</span>
-    <span class='id identifier rubyid_before_create'>before_create</span> <span class='symbol'>:tenant_set</span>
-
-    <span class='id identifier rubyid_private'>private</span>
-
-    <span class='comment'># This method sets the tenant_id on the join table and executes before creation of the join table record.
-</span>    <span class='id identifier rubyid_define_method'>define_method</span> <span class='symbol'>:tenant_set</span> <span class='kw'>do</span>
-      <span class='kw'>if</span> <span class='id identifier rubyid_tenant_enabled'>tenant_enabled</span>
-        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../MultiTenant/MissingTenantError.html" title="MultiTenant::MissingTenantError (class)">MissingTenantError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Tenant Id is not set</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="../../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span>
-
-        <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tenant_column'>tenant_column</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='rparen'>)</span>
-      <span class='kw'>end</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters.html b/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters.html
deleted file mode 100644
index 25a67f9..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters.html
+++ /dev/null
@@ -1,126 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord::ConnectionAdapters
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::ConnectionAdapters";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
-     &raquo; 
-    <span class="title">ConnectionAdapters</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord::ConnectionAdapters
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/migrations.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>:nodoc:</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-      <strong class="modules">Modules:</strong> <span class='object_link'><a href="ConnectionAdapters/SchemaStatements.html" title="ActiveRecord::ConnectionAdapters::SchemaStatements (module)">SchemaStatements</a></span>
-    
-  
-    
-  
-</p>
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters/SchemaStatements.html b/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters/SchemaStatements.html
deleted file mode 100644
index 5d6f36e..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/ConnectionAdapters/SchemaStatements.html
+++ /dev/null
@@ -1,232 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord::ConnectionAdapters::SchemaStatements
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::ConnectionAdapters::SchemaStatements";
-  relpath = '../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../_index.html">Index (S)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span></span>
-     &raquo; 
-    <span class="title">SchemaStatements</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord::ConnectionAdapters::SchemaStatements
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/migrations.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#create_table-instance_method" title="#create_table (instance method)">#<strong>create_table</strong>(table_name, options = {}, &amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#orig_create_table-instance_method" title="#orig_create_table (instance method)">#<strong>orig_create_table</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="create_table-instance_method">
-  
-    #<strong>create_table</strong>(table_name, options = {}, &amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-74
-75
-76
-77
-78
-79
-80
-81</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 74</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_create_table'>create_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='id identifier rubyid_orig_create_table'>orig_create_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span><span class='symbol'>:partition_key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>false</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:partition_key</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:partition_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>
-    <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ALTER TABLE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> DROP CONSTRAINT </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_pkey</span><span class='tstring_end'>&quot;</span></span>
-    <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ALTER TABLE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> ADD PRIMARY KEY(\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:partition_key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;, id)</span><span class='tstring_end'>&quot;</span></span>
-  <span class='kw'>end</span>
-  <span class='id identifier rubyid_ret'>ret</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="orig_create_table-instance_method">
-  
-    #<strong>orig_create_table</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-72</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 72</span>
-
-<span class='kw'>alias</span> <span class='id identifier rubyid_orig_create_table'>orig_create_table</span> <span class='id identifier rubyid_create_table'>create_table</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/QueryMethods.html b/docs/source/_static/api-reference/ActiveRecord/QueryMethods.html
deleted file mode 100644
index f0ad010..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/QueryMethods.html
+++ /dev/null
@@ -1,336 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: ActiveRecord::QueryMethods
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::QueryMethods";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (Q)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
-     &raquo; 
-    <span class="title">QueryMethods</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: ActiveRecord::QueryMethods
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#build_arel-instance_method" title="#build_arel (instance method)">#<strong>build_arel</strong>(*args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#build_arel_orig-instance_method" title="#build_arel_orig (instance method)">#<strong>build_arel_orig</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="build_arel-instance_method">
-  
-    #<strong>build_arel</strong>(*args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-288
-289
-290
-291
-292
-293
-294
-295
-296
-297
-298
-299
-300
-301
-302
-303
-304
-305
-306
-307
-308
-309
-310
-311
-312
-313
-314
-315
-316
-317
-318
-319
-320
-321
-322
-323
-324
-325
-326
-327
-328
-329
-330
-331
-332
-333
-334
-335
-336
-337
-338
-339
-340
-341
-342
-343
-344
-345
-346
-347</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 288</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_build_arel'>build_arel</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_arel'>arel</span> <span class='op'>=</span> <span class='id identifier rubyid_build_arel_orig'>build_arel_orig</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-
-  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span>
-    <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MultiTenant/ArelTenantVisitor.html" title="MultiTenant::ArelTenantVisitor (class)">ArelTenantVisitor</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../MultiTenant/ArelTenantVisitor.html#initialize-instance_method" title="MultiTenant::ArelTenantVisitor#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='rparen'>)</span>
-
-    <span class='id identifier rubyid_visitor'>visitor</span><span class='period'>.</span><span class='id identifier rubyid_contexts'>contexts</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_context'>context</span><span class='op'>|</span>
-      <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_arel_node'>arel_node</span>
-
-      <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_unhandled_relations'>unhandled_relations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_relation'>relation</span><span class='op'>|</span>
-        <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-
-        <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span>
-          <span class='id identifier rubyid_enforcement_clause'>enforcement_clause</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MultiTenant/TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../MultiTenant/BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-          <span class='kw'>case</span> <span class='id identifier rubyid_node'>node</span>
-          <span class='kw'>when</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>Join</span> <span class='comment'># Arel::Nodes::OuterJoin, Arel::Nodes::RightOuterJoin, Arel::Nodes::FullOuterJoin
-</span>            <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span><span class='period'>.</span><span class='id identifier rubyid_expr'>expr</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span><span class='period'>.</span><span class='id identifier rubyid_expr'>expr</span><span class='period'>.</span><span class='id identifier rubyid_and'>and</span><span class='lparen'>(</span><span class='id identifier rubyid_enforcement_clause'>enforcement_clause</span><span class='rparen'>)</span>
-          <span class='kw'>when</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>SelectCore</span>
-            <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
-              <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_enforcement_clause'>enforcement_clause</span><span class='rbracket'>]</span>
-            <span class='kw'>elsif</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>And</span><span class='rparen'>)</span>
-              <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_enforcement_clause'>enforcement_clause</span>
-            <span class='kw'>else</span>
-              <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_enforcement_clause'>enforcement_clause</span><span class='period'>.</span><span class='id identifier rubyid_and'>and</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-            <span class='kw'>end</span>
-          <span class='kw'>else</span>
-            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UnknownContext</span><span class='tstring_end'>&#39;</span></span>
-          <span class='kw'>end</span>
-        <span class='kw'>end</span>
-
-        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>SelectCore</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>Join</span><span class='rparen'>)</span>
-
-        <span class='id identifier rubyid_node_list'>node_list</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>Join</span>
-                      <span class='lbracket'>[</span><span class='id identifier rubyid_node'>node</span><span class='rbracket'>]</span>
-                    <span class='kw'>else</span>
-                      <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span>
-                    <span class='kw'>end</span>
-
-        <span class='id identifier rubyid_node_list'>node_list</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>Join</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_node_join'>node_join</span><span class='op'>|</span>
-          <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_node_join'>node_join</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span>
-
-          <span class='id identifier rubyid_relation_right'>relation_right</span><span class='comma'>,</span> <span class='id identifier rubyid_relation_left'>relation_left</span> <span class='op'>=</span> <span class='id identifier rubyid_relations_from_node_join'>relations_from_node_join</span><span class='lparen'>(</span><span class='id identifier rubyid_node_join'>node_join</span><span class='rparen'>)</span>
-
-          <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_relation_right'>relation_right</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_relation_left'>relation_left</span>
-
-          <span class='id identifier rubyid_model_right'>model_right</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation_left'>relation_left</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-          <span class='id identifier rubyid_model_left'>model_left</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation_right'>relation_right</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-          <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_model_right'>model_right</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_model_left'>model_left</span>
-
-          <span class='id identifier rubyid_join_enforcement_clause'>join_enforcement_clause</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MultiTenant/TenantJoinEnforcementClause.html" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../MultiTenant/TenantJoinEnforcementClause.html#initialize-instance_method" title="MultiTenant::TenantJoinEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span>
-            <span class='id identifier rubyid_relation_right'>relation_right</span><span class='lbracket'>[</span><span class='id identifier rubyid_model_right'>model_right</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_relation_left'>relation_left</span>
-          <span class='rparen'>)</span>
-          <span class='id identifier rubyid_node_join'>node_join</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span><span class='period'>.</span><span class='id identifier rubyid_expr'>expr</span> <span class='op'>=</span> <span class='id identifier rubyid_node_join'>node_join</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span><span class='period'>.</span><span class='id identifier rubyid_expr'>expr</span><span class='period'>.</span><span class='id identifier rubyid_and'>and</span><span class='lparen'>(</span><span class='id identifier rubyid_join_enforcement_clause'>join_enforcement_clause</span><span class='rparen'>)</span>
-        <span class='kw'>end</span>
-      <span class='kw'>end</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-
-  <span class='id identifier rubyid_arel'>arel</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="build_arel_orig-instance_method">
-  
-    #<strong>build_arel_orig</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-286</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 286</span>
-
-<span class='kw'>alias</span> <span class='id identifier rubyid_build_arel_orig'>build_arel_orig</span> <span class='id identifier rubyid_build_arel'>build_arel</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/ActiveRecord/SchemaDumper.html b/docs/source/_static/api-reference/ActiveRecord/SchemaDumper.html
deleted file mode 100644
index 71845cb..0000000
--- a/docs/source/_static/api-reference/ActiveRecord/SchemaDumper.html
+++ /dev/null
@@ -1,121 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: ActiveRecord::SchemaDumper
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "ActiveRecord::SchemaDumper";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (S)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
-     &raquo; 
-    <span class="title">SchemaDumper</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: ActiveRecord::SchemaDumper
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">ActiveRecord::SchemaDumper</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/migrations.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant.html b/docs/source/_static/api-reference/MultiTenant.html
deleted file mode 100644
index 91cf13a..0000000
--- a/docs/source/_static/api-reference/MultiTenant.html
+++ /dev/null
@@ -1,1454 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index (M)</a> &raquo;
-    
-    
-    <span class="title">MultiTenant</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/fast_truncate.rb<span class="defines">,<br />
-  lib/activerecord-multi-tenant/version.rb,<br /> lib/activerecord-multi-tenant/migrations.rb,<br /> lib/activerecord-multi-tenant/multi_tenant.rb,<br /> lib/activerecord-multi-tenant/query_monitor.rb,<br /> lib/activerecord-multi-tenant/query_rewriter.rb,<br /> lib/activerecord-multi-tenant/copy_from_client.rb,<br /> lib/activerecord-multi-tenant/model_extensions.rb,<br /> lib/activerecord-multi-tenant/controller_extensions.rb,<br /> lib/activerecord-multi-tenant/arel_visitors_depth_first.rb</span>
-</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Extension to the controller to allow setting the current tenant set_current_tenant and current_tenant methods are introduced to set and get the current tenant in the controllers that uses the MultiTenant module.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-      <strong class="modules">Modules:</strong> <span class='object_link'><a href="MultiTenant/ControllerExtensions.html" title="MultiTenant::ControllerExtensions (module)">ControllerExtensions</a></span>, <span class='object_link'><a href="MultiTenant/CopyFromClient.html" title="MultiTenant::CopyFromClient (module)">CopyFromClient</a></span>, <span class='object_link'><a href="MultiTenant/DatabaseStatements.html" title="MultiTenant::DatabaseStatements (module)">DatabaseStatements</a></span>, <span class='object_link'><a href="MultiTenant/FastTruncate.html" title="MultiTenant::FastTruncate (module)">FastTruncate</a></span>, <span class='object_link'><a href="MultiTenant/MigrationExtensions.html" title="MultiTenant::MigrationExtensions (module)">MigrationExtensions</a></span>, <span class='object_link'><a href="MultiTenant/ModelExtensionsClassMethods.html" title="MultiTenant::ModelExtensionsClassMethods (module)">ModelExtensionsClassMethods</a></span>, <span class='object_link'><a href="MultiTenant/TenantValueVisitor.html" title="MultiTenant::TenantValueVisitor (module)">TenantValueVisitor</a></span>
-    
-  
-    
-      <strong class="classes">Classes:</strong> <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html" title="MultiTenant::ArelTenantVisitor (class)">ArelTenantVisitor</a></span>, <span class='object_link'><a href="MultiTenant/ArelVisitorsDepthFirst.html" title="MultiTenant::ArelVisitorsDepthFirst (class)">ArelVisitorsDepthFirst</a></span>, <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span>, <span class='object_link'><a href="MultiTenant/Context.html" title="MultiTenant::Context (class)">Context</a></span>, <span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html" title="MultiTenant::CopyFromClientHelper (class)">CopyFromClientHelper</a></span>, <span class='object_link'><a href="MultiTenant/Current.html" title="MultiTenant::Current (class)">Current</a></span>, <span class='object_link'><a href="MultiTenant/MissingTenantError.html" title="MultiTenant::MissingTenantError (class)">MissingTenantError</a></span>, <span class='object_link'><a href="MultiTenant/QueryMonitor.html" title="MultiTenant::QueryMonitor (class)">QueryMonitor</a></span>, <span class='object_link'><a href="MultiTenant/Table.html" title="MultiTenant::Table (class)">Table</a></span>, <span class='object_link'><a href="MultiTenant/TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span>, <span class='object_link'><a href="MultiTenant/TenantIsImmutable.html" title="MultiTenant::TenantIsImmutable (class)">TenantIsImmutable</a></span>, <span class='object_link'><a href="MultiTenant/TenantJoinEnforcementClause.html" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span>
-    
-  
-</p>
-
-  
-    <h2>
-      Constant Summary
-      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
-    </h2>
-
-    <dl class="constants">
-      
-        <dt id="VERSION-constant" class="">VERSION =
-          
-        </dt>
-        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.2.0</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
-      
-        <dt id="enable_query_monitor-classvariable" class="">@@enable_query_monitor =
-          <div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Style/ClassVars Option to enable query monitor</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-        </dt>
-        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
-      
-    </dl>
-  
-
-
-
-
-
-
-
-  
-    <h2>
-      Class Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#current_tenant-class_method" title="current_tenant (class method)">.<strong>current_tenant</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#current_tenant=-class_method" title="current_tenant= (class method)">.<strong>current_tenant=</strong>(tenant)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#current_tenant_class-class_method" title="current_tenant_class (class method)">.<strong>current_tenant_class</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#current_tenant_id-class_method" title="current_tenant_id (class method)">.<strong>current_tenant_id</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#current_tenant_is_id%3F-class_method" title="current_tenant_is_id? (class method)">.<strong>current_tenant_is_id?</strong>  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#default_tenant_class-class_method" title="default_tenant_class (class method)">.<strong>default_tenant_class</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#default_tenant_class=-class_method" title="default_tenant_class= (class method)">.<strong>default_tenant_class=</strong>(tenant_class)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>rubocop:disable Style/ClassVars In some cases we only have an ID - if defined well return the default tenant class in such cases.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#enable_query_monitor-class_method" title="enable_query_monitor (class method)">.<strong>enable_query_monitor</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#enable_write_only_mode-class_method" title="enable_write_only_mode (class method)">.<strong>enable_write_only_mode</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Write-only Mode - this only adds the tenant_id to new records, but doesnt require its presence for SELECTs/UPDATEs/DELETEs.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#load_current_tenant!-class_method" title="load_current_tenant! (class method)">.<strong>load_current_tenant!</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#multi_tenant_model_for_arel-class_method" title="multi_tenant_model_for_arel (class method)">.<strong>multi_tenant_model_for_arel</strong>(arel)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#multi_tenant_model_for_table-class_method" title="multi_tenant_model_for_table (class method)">.<strong>multi_tenant_model_for_table</strong>(table_name)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#partition_key-class_method" title="partition_key (class method)">.<strong>partition_key</strong>(tenant_name)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#query_monitor_enabled%3F-class_method" title="query_monitor_enabled? (class method)">.<strong>query_monitor_enabled?</strong>  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#register_multi_tenant_model-class_method" title="register_multi_tenant_model (class method)">.<strong>register_multi_tenant_model</strong>(model_klass)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Registry that maps table names to models (used by the query rewriter).</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#tenant_klass_defined%3F-class_method" title="tenant_klass_defined? (class method)">.<strong>tenant_klass_defined?</strong>(tenant_name)  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#with-class_method" title="with (class method)">.<strong>with</strong>(tenant, &amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#with_write_only_mode_enabled%3F-class_method" title="with_write_only_mode_enabled? (class method)">.<strong>with_write_only_mode_enabled?</strong>  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#without-class_method" title="without (class method)">.<strong>without</strong>(&amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#wrap_methods-class_method" title="wrap_methods (class method)">.<strong>wrap_methods</strong>(klass, owner, *method_names)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="class_method_details" class="method_details_list">
-    <h2>Class Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="current_tenant-class_method">
-  
-    .<strong>current_tenant</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-71
-72
-73</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 71</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span>
-  <span class='const'><span class='object_link'><a href="MultiTenant/Current.html" title="MultiTenant::Current (class)">Current</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tenant'>tenant</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="current_tenant=-class_method">
-  
-    .<strong>current_tenant=</strong>(tenant)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-67
-68
-69</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 67</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant='>current_tenant=</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant'>tenant</span><span class='rparen'>)</span>
-  <span class='const'><span class='object_link'><a href="MultiTenant/Current.html" title="MultiTenant::Current (class)">Current</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tenant'>tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_tenant'>tenant</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="current_tenant_class-class_method">
-  
-    .<strong>current_tenant_class</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-83
-84
-85
-86
-87
-88
-89</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 83</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_class'>current_tenant_class</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_current_tenant_is_id?'>current_tenant_is_id?</span>
-    <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_tenant_class'><span class='object_link'><a href="#default_tenant_class-class_method" title="MultiTenant.default_tenant_class (method)">default_tenant_class</a></span></span> <span class='op'>||</span> <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Only have tenant id, and no default tenant class set</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
-  <span class='kw'>elsif</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span>
-    <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="current_tenant_id-class_method">
-  
-    .<strong>current_tenant_id</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-75
-76
-77</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 75</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'>current_tenant_id</span>
-  <span class='id identifier rubyid_current_tenant_is_id?'>current_tenant_is_id?</span> <span class='op'>?</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>:</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="current_tenant_is_id?-class_method">
-  
-    .<strong>current_tenant_is_id?</strong>  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-79
-80
-81</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 79</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_is_id?'>current_tenant_is_id?</span>
-  <span class='id identifier rubyid_current_tenant'>current_tenant</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="default_tenant_class-class_method">
-  
-    .<strong>default_tenant_class</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-22
-23
-24</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 22</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_tenant_class'>default_tenant_class</span>
-  <span class='cvar'>@@default_tenant_class</span> <span class='op'>||=</span> <span class='kw'>nil</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="default_tenant_class=-class_method">
-  
-    .<strong>default_tenant_class=</strong>(tenant_class)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Style/ClassVars In some cases we only have an ID - if defined well return the default tenant class in such cases</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-18
-19
-20</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 18</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_tenant_class='>default_tenant_class=</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_class'>tenant_class</span><span class='rparen'>)</span>
-  <span class='cvar'>@@default_tenant_class</span> <span class='op'>=</span> <span class='id identifier rubyid_tenant_class'>tenant_class</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="enable_query_monitor-class_method">
-  
-    .<strong>enable_query_monitor</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-10
-11
-12</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_monitor.rb', line 10</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_enable_query_monitor'>enable_query_monitor</span>
-  <span class='cvar'>@@enable_query_monitor</span> <span class='op'>=</span> <span class='kw'>true</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="enable_write_only_mode-class_method">
-  
-    .<strong>enable_write_only_mode</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Write-only Mode - this only adds the tenant_id to new records, but doesnt require its presence for SELECTs/UPDATEs/DELETEs</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-28
-29
-30</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 28</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_enable_write_only_mode'>enable_write_only_mode</span>
-  <span class='cvar'>@@enable_write_only_mode</span> <span class='op'>=</span> <span class='kw'>true</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="load_current_tenant!-class_method">
-  
-    .<strong>load_current_tenant!</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-91
-92
-93
-94
-95
-96
-97</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 91</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load_current_tenant!'>load_current_tenant!</span>
-  <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_current_tenant_is_id?'>current_tenant_is_id?</span>
-  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MultiTenant.current_tenant must be set to load</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-
-  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_tenant_class'><span class='object_link'><a href="#default_tenant_class-class_method" title="MultiTenant.default_tenant_class (method)">default_tenant_class</a></span></span> <span class='op'>||</span> <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Only have tenant id, and no default tenant class set</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
-  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="multi_tenant_model_for_arel-class_method">
-  
-    .<strong>multi_tenant_model_for_arel</strong>(arel)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-57
-58
-59
-60
-61
-62
-63
-64
-65</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 57</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_arel'>multi_tenant_model_for_arel</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:ast</span><span class='rparen'>)</span>
-
-  <span class='kw'>if</span> <span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Nodes</span><span class='op'>::</span><span class='const'>JoinSource</span>
-    <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>else</span>
-    <span class='const'><span class='object_link'><a href="" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="multi_tenant_model_for_table-class_method">
-  
-    .<strong>multi_tenant_model_for_table</strong>(table_name)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-44
-45
-46
-47
-48
-49
-50
-51
-52
-53
-54
-55</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 44</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'>multi_tenant_model_for_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='cvar'>@@multi_tenant_models</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
-
-  <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='cvar'>@@multi_tenant_model_table_names</span><span class='rparen'>)</span>
-    <span class='cvar'>@@multi_tenant_model_table_names</span> <span class='op'>=</span> <span class='cvar'>@@multi_tenant_models</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_model'>model</span><span class='op'>|</span>
-      <span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span>
-    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
-  <span class='kw'>end</span>
-
-  <span class='cvar'>@@multi_tenant_model_table_names</span><span class='lbracket'>[</span><span class='id identifier rubyid_table_name'>table_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
-  <span class='comment'># rubocop:enable Style/ClassVars
-</span><span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="partition_key-class_method">
-  
-    .<strong>partition_key</strong>(tenant_name)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-12
-13
-14</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 12</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="query_monitor_enabled?-class_method">
-  
-    .<strong>query_monitor_enabled?</strong>  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-14
-15
-16</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_monitor.rb', line 14</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_query_monitor_enabled?'>query_monitor_enabled?</span>
-  <span class='cvar'>@@enable_query_monitor</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="register_multi_tenant_model-class_method">
-  
-    .<strong>register_multi_tenant_model</strong>(model_klass)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Registry that maps table names to models (used by the query rewriter)</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-37
-38
-39
-40
-41
-42</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 37</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_register_multi_tenant_model'>register_multi_tenant_model</span><span class='lparen'>(</span><span class='id identifier rubyid_model_klass'>model_klass</span><span class='rparen'>)</span>
-  <span class='cvar'>@@multi_tenant_models</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
-  <span class='cvar'>@@multi_tenant_models</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_model_klass'>model_klass</span><span class='rparen'>)</span>
-
-  <span class='id identifier rubyid_remove_class_variable'>remove_class_variable</span><span class='lparen'>(</span><span class='symbol'>:@@multi_tenant_model_table_names</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='cvar'>@@multi_tenant_model_table_names</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="tenant_klass_defined?-class_method">
-  
-    .<strong>tenant_klass_defined?</strong>(tenant_name)  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-8
-9
-10</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 8</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tenant_klass_defined?'>tenant_klass_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-  <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_classify'>classify</span><span class='period'>.</span><span class='id identifier rubyid_safe_constantize'>safe_constantize</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="with-class_method">
-  
-    .<strong>with</strong>(tenant, &amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-99
-100
-101
-102
-103
-104
-105
-106
-107
-108
-109</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 99</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant'>tenant</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>if</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>==</span> <span class='id identifier rubyid_tenant'>tenant</span>
-
-  <span class='id identifier rubyid_old_tenant'>old_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span>
-  <span class='kw'>begin</span>
-    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_tenant'>tenant</span>
-    <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
-  <span class='kw'>ensure</span>
-    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_old_tenant'>old_tenant</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="with_write_only_mode_enabled?-class_method">
-  
-    .<strong>with_write_only_mode_enabled?</strong>  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-32
-33
-34</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 32</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'>with_write_only_mode_enabled?</span>
-  <span class='cvar'>@@enable_write_only_mode</span> <span class='op'>||=</span> <span class='kw'>false</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="without-class_method">
-  
-    .<strong>without</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-111
-112
-113
-114
-115
-116
-117
-118
-119
-120
-121</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 111</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_without'>without</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>if</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-
-  <span class='id identifier rubyid_old_tenant'>old_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span>
-  <span class='kw'>begin</span>
-    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>=</span> <span class='kw'>nil</span>
-    <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
-  <span class='kw'>ensure</span>
-    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_old_tenant'>old_tenant</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="wrap_methods-class_method">
-  
-    .<strong>wrap_methods</strong>(klass, owner, *method_names)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-129
-130
-131
-132
-133
-134
-135
-136
-137
-138
-139
-140
-141
-142
-143</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/multi_tenant.rb', line 129</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_wrap_methods'>wrap_methods</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_method_names'>method_names</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_method_names'>method_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method_name'>method_name</span><span class='op'>|</span>
-    <span class='id identifier rubyid_original_method_name'>original_method_name</span> <span class='op'>=</span> <span class='symbol'>:&quot;_mt_original_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
-    <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span> <span class='heredoc_beg'>&lt;&lt;-CODE</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
-<span class='tstring_content'>      alias_method :</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_method_name'>original_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>, :</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>
-      def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(*args, &amp;block)
-        if MultiTenant.multi_tenant_model_for_table(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.class.table_name).present? &amp;&amp; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.persisted? &amp;&amp; MultiTenant.current_tenant_id.nil? &amp;&amp; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.class.respond_to?(:partition_key) &amp;&amp; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.attributes.include?(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.class.partition_key)
-          MultiTenant.with(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.public_send(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_owner'>owner</span><span class='embexpr_end'>}</span><span class='tstring_content'>.class.partition_key)) { </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_method_name'>original_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(*args, &amp;block) }
-        else
-          </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_method_name'>original_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(*args, &amp;block)
-        end
-      end
-</span><span class='heredoc_end'>    CODE
-</span>  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/ArelTenantVisitor.html b/docs/source/_static/api-reference/MultiTenant/ArelTenantVisitor.html
deleted file mode 100644
index c27cf8b..0000000
--- a/docs/source/_static/api-reference/MultiTenant/ArelTenantVisitor.html
+++ /dev/null
@@ -1,755 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::ArelTenantVisitor
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::ArelTenantVisitor";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (A)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">ArelTenantVisitor</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::ArelTenantVisitor
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">MultiTenant::ArelTenantVisitor</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#contexts-instance_method" title="#contexts (instance method)">#<strong>contexts</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute contexts.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(arel)  &#x21d2; ArelTenantVisitor </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of ArelTenantVisitor.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_Arel_Attributes_Attribute-instance_method" title="#visit_Arel_Attributes_Attribute (instance method)">#<strong>visit_Arel_Attributes_Attribute</strong>(*args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>rubocop:disable Naming/MethodName.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_Arel_Nodes_Equality-instance_method" title="#visit_Arel_Nodes_Equality (instance method)">#<strong>visit_Arel_Nodes_Equality</strong>(obj, *args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_Arel_Nodes_OuterJoin-instance_method" title="#visit_Arel_Nodes_OuterJoin (instance method)">#<strong>visit_Arel_Nodes_OuterJoin</strong>(obj, _collector = nil)  &#x21d2; Object </a>
-    
-
-    
-      (also: #visit_Arel_Nodes_FullOuterJoin, #visit_Arel_Nodes_RightOuterJoin)
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>rubocop:disable Naming/MethodName.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_Arel_Nodes_SelectCore-instance_method" title="#visit_Arel_Nodes_SelectCore (instance method)">#<strong>visit_Arel_Nodes_SelectCore</strong>(obj, *_args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_Arel_Table-instance_method" title="#visit_Arel_Table (instance method)">#<strong>visit_Arel_Table</strong>(obj, _collector = nil)  &#x21d2; Object </a>
-    
-
-    
-      (also: #visit_Arel_Nodes_TableAlias)
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_MultiTenant_TenantEnforcementClause-instance_method" title="#visit_MultiTenant_TenantEnforcementClause (instance method)">#<strong>visit_MultiTenant_TenantEnforcementClause</strong>(obj)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_MultiTenant_TenantJoinEnforcementClause-instance_method" title="#visit_MultiTenant_TenantJoinEnforcementClause (instance method)">#<strong>visit_MultiTenant_TenantJoinEnforcementClause</strong>(obj)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-<div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(arel)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::ArelTenantVisitor (class)">ArelTenantVisitor</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of ArelTenantVisitor.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-66
-67
-68
-69
-70
-71
-72
-73</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 66</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='rparen'>)</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
-  <span class='ivar'>@statement_node_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
-
-  <span class='ivar'>@contexts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
-  <span class='ivar'>@current_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
-  <span class='id identifier rubyid_accept'>accept</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="contexts-instance_method">
-  
-    #<strong>contexts</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute contexts.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-75
-76
-77</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 75</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_contexts'>contexts</span>
-  <span class='ivar'>@contexts</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="visit_Arel_Attributes_Attribute-instance_method">
-  
-    #<strong>visit_Arel_Attributes_Attribute</strong>(*args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Naming/MethodName</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-78
-79
-80
-81
-82</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 78</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_Arel_Attributes_Attribute'>visit_Arel_Attributes_Attribute</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_Arel_Nodes_Equality-instance_method">
-  
-    #<strong>visit_Arel_Nodes_Equality</strong>(obj, *args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-84
-85
-86
-87
-88
-89
-90
-91
-92
-93</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 84</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_Arel_Nodes_Equality'>visit_Arel_Nodes_Equality</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Arel</span><span class='op'>::</span><span class='const'>Attributes</span><span class='op'>::</span><span class='const'>Attribute</span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span>
-    <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-    <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
-      <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_visited_handled_relation'>visited_handled_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_Arel_Nodes_OuterJoin-instance_method">
-  
-    #<strong>visit_Arel_Nodes_OuterJoin</strong>(obj, _collector = nil)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-    <span class="aliases">Also known as:
-    <span class="names"><span id='visit_Arel_Nodes_FullOuterJoin-instance_method'>visit_Arel_Nodes_FullOuterJoin</span>, <span id='visit_Arel_Nodes_RightOuterJoin-instance_method'>visit_Arel_Nodes_RightOuterJoin</span></span>
-    </span>
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Naming/MethodName</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-128
-129
-130
-131
-132
-133
-134
-135</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 128</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_Arel_Nodes_OuterJoin'>visit_Arel_Nodes_OuterJoin</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid__collector'>_collector</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_nest_context'>nest_context</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span> <span class='kw'>do</span>
-    <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_discover_relations'>discover_relations</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span>
-      <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_right'>right</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_Arel_Nodes_SelectCore-instance_method">
-  
-    #<strong>visit_Arel_Nodes_SelectCore</strong>(obj, *_args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-109
-110
-111
-112
-113
-114
-115
-116
-117
-118
-119
-120
-121
-122
-123</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 109</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_Arel_Nodes_SelectCore'>visit_Arel_Nodes_SelectCore</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid__args'>_args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_nest_context'>nest_context</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span> <span class='kw'>do</span>
-    <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_discover_relations'>discover_relations</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span>
-    <span class='kw'>end</span>
-    <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_wheres'>wheres</span>
-    <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span>
-    <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_windows'>windows</span>
-    <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_having'>having</span><span class='rparen'>)</span>
-      <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_having'>having</span>
-    <span class='kw'>else</span>
-      <span class='id identifier rubyid_visit'>visit</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_havings'>havings</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_Arel_Table-instance_method">
-  
-    #<strong>visit_Arel_Table</strong>(obj, _collector = nil)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-    <span class="aliases">Also known as:
-    <span class="names"><span id='visit_Arel_Nodes_TableAlias-instance_method'>visit_Arel_Nodes_TableAlias</span></span>
-    </span>
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-103
-104
-105</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 103</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_Arel_Table'>visit_Arel_Table</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid__collector'>_collector</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
-  <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_visited_relation'>visited_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_tenant_relation?'>tenant_relation?</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_MultiTenant_TenantEnforcementClause-instance_method">
-  
-    #<strong>visit_MultiTenant_TenantEnforcementClause</strong>(obj)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-95
-96
-97</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 95</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_MultiTenant_TenantEnforcementClause'>visit_MultiTenant_TenantEnforcementClause</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='op'>*</span><span class='rparen'>)</span>
-  <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_visited_handled_relation'>visited_handled_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_MultiTenant_TenantJoinEnforcementClause-instance_method">
-  
-    #<strong>visit_MultiTenant_TenantJoinEnforcementClause</strong>(obj)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-99
-100
-101</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 99</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_MultiTenant_TenantJoinEnforcementClause'>visit_MultiTenant_TenantJoinEnforcementClause</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='op'>*</span><span class='rparen'>)</span>
-  <span class='ivar'>@current_context</span><span class='period'>.</span><span class='id identifier rubyid_visited_handled_relation'>visited_handled_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/ArelVisitorsDepthFirst.html b/docs/source/_static/api-reference/MultiTenant/ArelVisitorsDepthFirst.html
deleted file mode 100644
index 2bb4c0f..0000000
--- a/docs/source/_static/api-reference/MultiTenant/ArelVisitorsDepthFirst.html
+++ /dev/null
@@ -1,208 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::ArelVisitorsDepthFirst
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::ArelVisitorsDepthFirst";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (A)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">ArelVisitorsDepthFirst</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::ArelVisitorsDepthFirst
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Arel::Visitors::Visitor</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Arel::Visitors::Visitor</li>
-          
-            <li class="next">MultiTenant::ArelVisitorsDepthFirst</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/arel_visitors_depth_first.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(block = nil)  &#x21d2; ArelVisitorsDepthFirst </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of ArelVisitorsDepthFirst.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-  <div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(block = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::ArelVisitorsDepthFirst (class)">ArelVisitorsDepthFirst</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of ArelVisitorsDepthFirst.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-5
-6
-7
-8</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/arel_visitors_depth_first.rb', line 5</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
-  <span class='ivar'>@block</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='op'>||</span> <span class='id identifier rubyid_proc'>proc</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/BaseTenantEnforcementClause.html b/docs/source/_static/api-reference/MultiTenant/BaseTenantEnforcementClause.html
deleted file mode 100644
index e8f67a0..0000000
--- a/docs/source/_static/api-reference/MultiTenant/BaseTenantEnforcementClause.html
+++ /dev/null
@@ -1,462 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::BaseTenantEnforcementClause
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::BaseTenantEnforcementClause";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (B)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">BaseTenantEnforcementClause</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::BaseTenantEnforcementClause
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Arel::Nodes::Node</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Arel::Nodes::Node</li>
-          
-            <li class="next">MultiTenant::BaseTenantEnforcementClause</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-<div id="subclasses">
-  <h2>Direct Known Subclasses</h2>
-  <p class="children"><span class='object_link'><a href="TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span>, <span class='object_link'><a href="TenantJoinEnforcementClause.html" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span></p>
-</div>
-
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#tenant_attribute-instance_method" title="#tenant_attribute (instance method)">#<strong>tenant_attribute</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute tenant_attribute.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(tenant_attribute)  &#x21d2; BaseTenantEnforcementClause </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of BaseTenantEnforcementClause.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#to_sql-instance_method" title="#to_sql (instance method)">#<strong>to_sql</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#to_str-instance_method" title="#to_str (instance method)">#<strong>to_str</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-  <div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(tenant_attribute)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of BaseTenantEnforcementClause.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-179
-180
-181
-182
-183</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 179</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='rparen'>)</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
-  <span class='ivar'>@tenant_attribute</span> <span class='op'>=</span> <span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span>
-  <span class='ivar'>@tenant_model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="tenant_attribute-instance_method">
-  
-    #<strong>tenant_attribute</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute tenant_attribute.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-177
-178
-179</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 177</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span>
-  <span class='ivar'>@tenant_attribute</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="to_s-instance_method">
-  
-    #<strong>to_s</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-185
-186
-187</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 185</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
-  <span class='id identifier rubyid_to_sql'>to_sql</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="to_sql-instance_method">
-  
-    #<strong>to_sql</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-193
-194
-195
-196
-197</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 193</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_to_sql'>to_sql</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_collector'>collector</span> <span class='op'>=</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Collectors</span><span class='op'>::</span><span class='const'>SQLString</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
-  <span class='id identifier rubyid_collector'>collector</span> <span class='op'>=</span> <span class='ivar'>@tenant_model</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_visitor'>visitor</span><span class='period'>.</span><span class='id identifier rubyid_accept'>accept</span> <span class='id identifier rubyid_tenant_arel'>tenant_arel</span><span class='comma'>,</span> <span class='id identifier rubyid_collector'>collector</span>
-  <span class='id identifier rubyid_collector'>collector</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="to_str-instance_method">
-  
-    #<strong>to_str</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-189
-190
-191</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 189</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_to_str'>to_str</span>
-  <span class='id identifier rubyid_to_sql'>to_sql</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/Context.html b/docs/source/_static/api-reference/MultiTenant/Context.html
deleted file mode 100644
index 2d1fa6d..0000000
--- a/docs/source/_static/api-reference/MultiTenant/Context.html
+++ /dev/null
@@ -1,659 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::Context
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::Context";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">Context</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::Context
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">MultiTenant::Context</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#arel_node-instance_method" title="#arel_node (instance method)">#<strong>arel_node</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute arel_node.</p>
-</div></span>
-  
-</li>
-
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#handled_relations-instance_method" title="#handled_relations (instance method)">#<strong>handled_relations</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute handled_relations.</p>
-</div></span>
-  
-</li>
-
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#known_relations-instance_method" title="#known_relations (instance method)">#<strong>known_relations</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute known_relations.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#discover_relations-instance_method" title="#discover_relations (instance method)">#<strong>discover_relations</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(arel_node)  &#x21d2; Context </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of Context.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#unhandled_relations-instance_method" title="#unhandled_relations (instance method)">#<strong>unhandled_relations</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visited_handled_relation-instance_method" title="#visited_handled_relation (instance method)">#<strong>visited_handled_relation</strong>(relation)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visited_relation-instance_method" title="#visited_relation (instance method)">#<strong>visited_relation</strong>(relation)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-<div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(arel_node)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::Context (class)">Context</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of Context.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-32
-33
-34
-35
-36
-37</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 32</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arel_node'>arel_node</span><span class='rparen'>)</span>
-  <span class='ivar'>@arel_node</span> <span class='op'>=</span> <span class='id identifier rubyid_arel_node'>arel_node</span>
-  <span class='ivar'>@known_relations</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
-  <span class='ivar'>@handled_relations</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
-  <span class='ivar'>@discovering</span> <span class='op'>=</span> <span class='kw'>false</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="arel_node-instance_method">
-  
-    #<strong>arel_node</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute arel_node.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-30
-31
-32</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 30</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_arel_node'>arel_node</span>
-  <span class='ivar'>@arel_node</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      
-      <span id=""></span>
-      <div class="method_details ">
-  <h3 class="signature " id="handled_relations-instance_method">
-  
-    #<strong>handled_relations</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute handled_relations.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-30
-31
-32</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 30</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_handled_relations'>handled_relations</span>
-  <span class='ivar'>@handled_relations</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      
-      <span id=""></span>
-      <div class="method_details ">
-  <h3 class="signature " id="known_relations-instance_method">
-  
-    #<strong>known_relations</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute known_relations.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-30
-31
-32</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 30</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_known_relations'>known_relations</span>
-  <span class='ivar'>@known_relations</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="discover_relations-instance_method">
-  
-    #<strong>discover_relations</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-39
-40
-41
-42
-43
-44</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 39</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_discover_relations'>discover_relations</span>
-  <span class='id identifier rubyid_old_discovering'>old_discovering</span> <span class='op'>=</span> <span class='ivar'>@discovering</span>
-  <span class='ivar'>@discovering</span> <span class='op'>=</span> <span class='kw'>true</span>
-  <span class='kw'>yield</span>
-  <span class='ivar'>@discovering</span> <span class='op'>=</span> <span class='id identifier rubyid_old_discovering'>old_discovering</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="unhandled_relations-instance_method">
-  
-    #<strong>unhandled_relations</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-56
-57
-58</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 56</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_unhandled_relations'>unhandled_relations</span>
-  <span class='id identifier rubyid_known_relations'>known_relations</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span> <span class='op'>-</span> <span class='id identifier rubyid_handled_relations'>handled_relations</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visited_handled_relation-instance_method">
-  
-    #<strong>visited_handled_relation</strong>(relation)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-52
-53
-54</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 52</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visited_handled_relation'>visited_handled_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-  <span class='ivar'>@handled_relations</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Table.html" title="MultiTenant::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Table.html#initialize-instance_method" title="MultiTenant::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visited_relation-instance_method">
-  
-    #<strong>visited_relation</strong>(relation)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-46
-47
-48
-49
-50</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 46</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visited_relation'>visited_relation</span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@discovering</span>
-
-  <span class='ivar'>@known_relations</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Table.html" title="MultiTenant::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Table.html#initialize-instance_method" title="MultiTenant::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_relation'>relation</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/ControllerExtensions.html b/docs/source/_static/api-reference/MultiTenant/ControllerExtensions.html
deleted file mode 100644
index 20b69bc..0000000
--- a/docs/source/_static/api-reference/MultiTenant/ControllerExtensions.html
+++ /dev/null
@@ -1,202 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::ControllerExtensions
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::ControllerExtensions";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">ControllerExtensions</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::ControllerExtensions
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/controller_extensions.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#set_current_tenant_through_filter-instance_method" title="#set_current_tenant_through_filter (instance method)">#<strong>set_current_tenant_through_filter</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="set_current_tenant_through_filter-instance_method">
-  
-    #<strong>set_current_tenant_through_filter</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-9
-10
-11
-12
-13
-14
-15
-16
-17
-18
-19
-20
-21
-22
-23
-24
-25</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/controller_extensions.rb', line 9</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_set_current_tenant_through_filter'>set_current_tenant_through_filter</span>
-  <span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
-    <span class='id identifier rubyid_helper_method'>helper_method</span> <span class='symbol'>:current_tenant</span> <span class='kw'>if</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:helper_method</span><span class='rparen'>)</span>
-
-    <span class='id identifier rubyid_private'>private</span>
-
-    <span class='comment'># rubocop:disable Naming/AccessorMethodName
-</span>    <span class='kw'>def</span> <span class='id identifier rubyid_set_current_tenant'>set_current_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_current_tenant_object'>current_tenant_object</span><span class='rparen'>)</span>
-      <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="../MultiTenant.html#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_current_tenant_object'>current_tenant_object</span>
-    <span class='kw'>end</span>
-    <span class='comment'># rubocop:enable Naming/AccessorMethodName
-</span>
-    <span class='kw'>def</span> <span class='id identifier rubyid_current_tenant'>current_tenant</span>
-      <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="../MultiTenant.html#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/CopyFromClient.html b/docs/source/_static/api-reference/MultiTenant/CopyFromClient.html
deleted file mode 100644
index de6a779..0000000
--- a/docs/source/_static/api-reference/MultiTenant/CopyFromClient.html
+++ /dev/null
@@ -1,186 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::CopyFromClient
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::CopyFromClient";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">CopyFromClient</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::CopyFromClient
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/copy_from_client.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#copy_from_client-instance_method" title="#copy_from_client (instance method)">#<strong>copy_from_client</strong>(columns, &amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="copy_from_client-instance_method">
-  
-    #<strong>copy_from_client</strong>(columns, &amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-22
-23
-24
-25
-26
-27
-28
-29
-30</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/copy_from_client.rb', line 22</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_copy_from_client'>copy_from_client</span><span class='lparen'>(</span><span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_conn'>conn</span>         <span class='op'>=</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_raw_connection'>raw_connection</span>
-  <span class='id identifier rubyid_column_types'>column_types</span> <span class='op'>=</span> <span class='id identifier rubyid_columns'>columns</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_type_for_attribute'>type_for_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
-  <span class='id identifier rubyid_helper'>helper</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="CopyFromClientHelper.html" title="MultiTenant::CopyFromClientHelper (class)">CopyFromClientHelper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CopyFromClientHelper.html#initialize-instance_method" title="MultiTenant::CopyFromClientHelper#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_conn'>conn</span><span class='comma'>,</span> <span class='id identifier rubyid_column_types'>column_types</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_copy_data'>copy_data</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>COPY </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_quoted_table_name'>quoted_table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_columns'>columns</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;,&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot;) FROM STDIN</span><span class='tstring_end'>}</span></span><span class='comma'>,</span> <span class='const'>PG</span><span class='op'>::</span><span class='const'>TextEncoder</span><span class='op'>::</span><span class='const'>CopyRow</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
-    <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_helper'>helper</span>
-  <span class='kw'>end</span>
-  <span class='id identifier rubyid_helper'>helper</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/CopyFromClientHelper.html b/docs/source/_static/api-reference/MultiTenant/CopyFromClientHelper.html
deleted file mode 100644
index 25028d7..0000000
--- a/docs/source/_static/api-reference/MultiTenant/CopyFromClientHelper.html
+++ /dev/null
@@ -1,362 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::CopyFromClientHelper
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::CopyFromClientHelper";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">CopyFromClientHelper</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::CopyFromClientHelper
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">MultiTenant::CopyFromClientHelper</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/copy_from_client.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Designed to be mixed into an ActiveRecord model to provide a copy_from_client method that allows for efficient bulk insertion of data into a PostgreSQL database using the COPY command</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#count-instance_method" title="#count (instance method)">#<strong>count</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute count.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(row)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(conn, column_types)  &#x21d2; CopyFromClientHelper </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of CopyFromClientHelper.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-<div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(conn, column_types)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::CopyFromClientHelper (class)">CopyFromClientHelper</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of CopyFromClientHelper.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-8
-9
-10
-11
-12</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/copy_from_client.rb', line 8</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_conn'>conn</span><span class='comma'>,</span> <span class='id identifier rubyid_column_types'>column_types</span><span class='rparen'>)</span>
-  <span class='ivar'>@count</span> <span class='op'>=</span> <span class='int'>0</span>
-  <span class='ivar'>@conn</span> <span class='op'>=</span> <span class='id identifier rubyid_conn'>conn</span>
-  <span class='ivar'>@column_types</span> <span class='op'>=</span> <span class='id identifier rubyid_column_types'>column_types</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="count-instance_method">
-  
-    #<strong>count</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute count.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-6
-7
-8</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/copy_from_client.rb', line 6</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_count'>count</span>
-  <span class='ivar'>@count</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="<<-instance_method">
-  
-    #<strong>&lt;&lt;</strong>(row)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-14
-15
-16
-17
-18</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/copy_from_client.rb', line 14</span>
-
-<span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_row'>row</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_val'>val</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='op'>|</span> <span class='ivar'>@column_types</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_serialize'>serialize</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
-  <span class='ivar'>@conn</span><span class='period'>.</span><span class='id identifier rubyid_put_copy_data'>put_copy_data</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
-  <span class='ivar'>@count</span> <span class='op'>+=</span> <span class='int'>1</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/Current.html b/docs/source/_static/api-reference/MultiTenant/Current.html
deleted file mode 100644
index c88b2fe..0000000
--- a/docs/source/_static/api-reference/MultiTenant/Current.html
+++ /dev/null
@@ -1,124 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::Current
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::Current";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">Current</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::Current
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">ActiveSupport::CurrentAttributes</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">ActiveSupport::CurrentAttributes</li>
-          
-            <li class="next">MultiTenant::Current</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/multi_tenant.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-
-  
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/DatabaseStatements.html b/docs/source/_static/api-reference/MultiTenant/DatabaseStatements.html
deleted file mode 100644
index 4cedf31..0000000
--- a/docs/source/_static/api-reference/MultiTenant/DatabaseStatements.html
+++ /dev/null
@@ -1,366 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::DatabaseStatements
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::DatabaseStatements";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (D)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">DatabaseStatements</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::DatabaseStatements
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(arel, name = nil, binds = [])  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#join_to_delete-instance_method" title="#join_to_delete (instance method)">#<strong>join_to_delete</strong>(delete, *args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#join_to_update-instance_method" title="#join_to_update (instance method)">#<strong>join_to_update</strong>(update, *args)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(arel, name = nil, binds = [])  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="delete-instance_method">
-  
-    #<strong>delete</strong>(arel, name = nil, binds = [])  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-268
-269
-270
-271
-272
-273
-274</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 268</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_arel'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_arel-class_method" title="MultiTenant.multi_tenant_model_for_arel (method)">multi_tenant_model_for_arel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-    <span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="join_to_delete-instance_method">
-  
-    #<strong>join_to_delete</strong>(delete, *args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-251
-252
-253
-254
-255
-256
-257
-258</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 251</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_join_to_delete'>join_to_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_delete'>delete</span> <span class='op'>=</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_delete'>delete</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='period'>.</span><span class='id identifier rubyid_left'>left</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-    <span class='id identifier rubyid_delete'>delete</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-  <span class='id identifier rubyid_delete'>delete</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="join_to_update-instance_method">
-  
-    #<strong>join_to_update</strong>(update, *args)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-242
-243
-244
-245
-246
-247
-248
-249</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 242</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_join_to_update'>join_to_update</span><span class='lparen'>(</span><span class='id identifier rubyid_update'>update</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_update'>update</span> <span class='op'>=</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_update'>update</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_update'>update</span><span class='period'>.</span><span class='id identifier rubyid_ast'>ast</span><span class='period'>.</span><span class='id identifier rubyid_relation'>relation</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-    <span class='id identifier rubyid_update'>update</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-  <span class='id identifier rubyid_update'>update</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="update-instance_method">
-  
-    #<strong>update</strong>(arel, name = nil, binds = [])  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-260
-261
-262
-263
-264
-265
-266</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 260</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_arel'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_arel-class_method" title="MultiTenant.multi_tenant_model_for_arel (method)">multi_tenant_model_for_arel</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-    <span class='id identifier rubyid_arel'>arel</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/FastTruncate.html b/docs/source/_static/api-reference/MultiTenant/FastTruncate.html
deleted file mode 100644
index d799e29..0000000
--- a/docs/source/_static/api-reference/MultiTenant/FastTruncate.html
+++ /dev/null
@@ -1,226 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::FastTruncate
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::FastTruncate";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (F)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">FastTruncate</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::FastTruncate
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/fast_truncate.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Class Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#run-class_method" title="run (class method)">.<strong>run</strong>(exclude: [&#39;schema_migrations&#39;])  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="class_method_details" class="method_details_list">
-    <h2>Class Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="run-class_method">
-  
-    .<strong>run</strong>(exclude: [&#39;schema_migrations&#39;])  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-6
-7
-8
-9
-10
-11
-12
-13
-14
-15
-16
-17
-18
-19
-20
-21
-22
-23
-24
-25
-26
-27
-28
-29
-30
-31
-32
-33
-34</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/fast_truncate.rb', line 6</span>
-
-<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='label'>exclude:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>schema_migrations</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
-  <span class='comment'># This is a slightly faster version of DatabaseCleaner.clean_with(:truncation, pre_count: true)
-</span>  <span class='const'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>
-  DO LANGUAGE plpgsql $$
-  DECLARE
-    t record;
-    tables text[];
-    seq_exists boolean;
-    needs_truncate boolean;
-  BEGIN
-    FOR t IN SELECT schemaname, tablename FROM pg_tables WHERE schemaname = &#39;public&#39; AND tablename NOT IN (%s) LOOP
-      EXECUTE &#39;SELECT EXISTS (SELECT * from pg_class c WHERE c.relkind = &#39;&#39;S&#39;&#39;
-       AND c.relname=&#39;&#39;&#39; || t.tablename || &#39;_id_seq&#39;&#39;)&#39; into seq_exists;
-      IF seq_exists THEN
-        EXECUTE &#39;SELECT is_called FROM &#39; || t.tablename || &#39;_id_seq&#39; INTO needs_truncate;
-      ELSE
-        needs_truncate := true;
-      END IF;
-
-      IF needs_truncate THEN
-        tables := array_append(tables, quote_ident(t.schemaname) || &#39;.&#39; || quote_ident(t.tablename));
-      END IF;
-    END LOOP;
-
-    IF array_length(tables, 1) &gt; 0 THEN
-      EXECUTE &#39;TRUNCATE TABLE &#39; || array_to_string(tables, &#39;, &#39;) || &#39; RESTART IDENTITY CASCADE&#39;;
-    END IF;
-  END$$;</span><span class='tstring_end'>)</span></span><span class='comma'>,</span> <span class='id identifier rubyid_exclude'>exclude</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/MigrationExtensions.html b/docs/source/_static/api-reference/MultiTenant/MigrationExtensions.html
deleted file mode 100644
index b429250..0000000
--- a/docs/source/_static/api-reference/MultiTenant/MigrationExtensions.html
+++ /dev/null
@@ -1,554 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::MigrationExtensions
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::MigrationExtensions";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (M)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">MigrationExtensions</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::MigrationExtensions
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/migrations.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#citus_version-instance_method" title="#citus_version (instance method)">#<strong>citus_version</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#create_distributed_table-instance_method" title="#create_distributed_table (instance method)">#<strong>create_distributed_table</strong>(table_name, partition_key)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#create_reference_table-instance_method" title="#create_reference_table (instance method)">#<strong>create_reference_table</strong>(table_name)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#enable_extension_on_all_nodes-instance_method" title="#enable_extension_on_all_nodes (instance method)">#<strong>enable_extension_on_all_nodes</strong>(extension)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#execute_on_all_nodes-instance_method" title="#execute_on_all_nodes (instance method)">#<strong>execute_on_all_nodes</strong>(sql)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#rebalance_table_shards-instance_method" title="#rebalance_table_shards (instance method)">#<strong>rebalance_table_shards</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#undistribute_table-instance_method" title="#undistribute_table (instance method)">#<strong>undistribute_table</strong>(table_name)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="citus_version-instance_method">
-  
-    #<strong>citus_version</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-59
-60
-61
-62
-63</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 59</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_citus_version'>citus_version</span>
-  <span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT extversion FROM pg_extension WHERE extname = &#39;citus&#39;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_getvalue'>getvalue</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:split</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:first</span><span class='rparen'>)</span>
-<span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
-  <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid tuple number 0</span><span class='tstring_end'>&#39;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="create_distributed_table-instance_method">
-  
-    #<strong>create_distributed_table</strong>(table_name, partition_key)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-3
-4
-5
-6
-7
-8
-9
-10
-11
-12
-13
-14</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 3</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_create_distributed_table'>create_distributed_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_citus_version'>citus_version</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-
-  <span class='id identifier rubyid_reversible'>reversible</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
-    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_up'>up</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT create_distributed_table($$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$, $$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$)</span><span class='tstring_end'>&quot;</span></span>
-    <span class='kw'>end</span>
-    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_down'>down</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_undistribute_table'>undistribute_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="create_reference_table-instance_method">
-  
-    #<strong>create_reference_table</strong>(table_name)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-16
-17
-18
-19
-20
-21
-22
-23
-24
-25
-26
-27</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 16</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_create_reference_table'>create_reference_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_citus_version'>citus_version</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-
-  <span class='id identifier rubyid_reversible'>reversible</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
-    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_up'>up</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT create_reference_table($$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$)</span><span class='tstring_end'>&quot;</span></span>
-    <span class='kw'>end</span>
-    <span class='id identifier rubyid_dir'>dir</span><span class='period'>.</span><span class='id identifier rubyid_down'>down</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_undistribute_table'>undistribute_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="enable_extension_on_all_nodes-instance_method">
-  
-    #<strong>enable_extension_on_all_nodes</strong>(extension)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-55
-56
-57</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 55</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_enable_extension_on_all_nodes'>enable_extension_on_all_nodes</span><span class='lparen'>(</span><span class='id identifier rubyid_extension'>extension</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_execute_on_all_nodes'>execute_on_all_nodes</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CREATE EXTENSION IF NOT EXISTS \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="execute_on_all_nodes-instance_method">
-  
-    #<strong>execute_on_all_nodes</strong>(sql)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-41
-42
-43
-44
-45
-46
-47
-48
-49
-50
-51
-52
-53</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 41</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_execute_on_all_nodes'>execute_on_all_nodes</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_execute'>execute</span> <span class='id identifier rubyid_sql'>sql</span>
-
-  <span class='kw'>case</span> <span class='id identifier rubyid_citus_version'>citus_version</span>
-  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6.0</span><span class='tstring_end'>&#39;</span></span>
-    <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT citus_run_on_all_workers($$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sql'>sql</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$)</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># initial citus_tools.sql with different names
-</span>  <span class='kw'>when</span> <span class='kw'>nil</span>
-    <span class='comment'># Do nothing, this is regular Postgres
-</span>  <span class='kw'>else</span>
-    <span class='comment'># 6.1 and newer
-</span>    <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT run_command_on_workers($$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sql'>sql</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$)</span><span class='tstring_end'>&quot;</span></span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="rebalance_table_shards-instance_method">
-  
-    #<strong>rebalance_table_shards</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-35
-36
-37
-38
-39</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 35</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_rebalance_table_shards'>rebalance_table_shards</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_citus_version'>citus_version</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-
-  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT rebalance_table_shards()</span><span class='tstring_end'>&#39;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="undistribute_table-instance_method">
-  
-    #<strong>undistribute_table</strong>(table_name)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-29
-30
-31
-32
-33</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/migrations.rb', line 29</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_undistribute_table'>undistribute_table</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_citus_version'>citus_version</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-
-  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT undistribute_table($$</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$$))</span><span class='tstring_end'>&quot;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/MissingTenantError.html b/docs/source/_static/api-reference/MultiTenant/MissingTenantError.html
deleted file mode 100644
index cff4c2c..0000000
--- a/docs/source/_static/api-reference/MultiTenant/MissingTenantError.html
+++ /dev/null
@@ -1,124 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Exception: MultiTenant::MissingTenantError
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::MissingTenantError";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (M)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">MissingTenantError</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Exception: MultiTenant::MissingTenantError
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">StandardError</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">StandardError</li>
-          
-            <li class="next">MultiTenant::MissingTenantError</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/multi_tenant.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-
-  
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/ModelExtensionsClassMethods.html b/docs/source/_static/api-reference/MultiTenant/ModelExtensionsClassMethods.html
deleted file mode 100644
index ccc822f..0000000
--- a/docs/source/_static/api-reference/MultiTenant/ModelExtensionsClassMethods.html
+++ /dev/null
@@ -1,492 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::ModelExtensionsClassMethods
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::ModelExtensionsClassMethods";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (M)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">ModelExtensionsClassMethods</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::ModelExtensionsClassMethods
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/model_extensions.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Extension to the model to allow scoping of models to the current tenant. This is done by adding the multitenant method to the models that need to be scoped. This method is called in the model declaration. Adds scoped_by_tenant? partition_key, primary_key and inherited methods to the model</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-  
-    <h2>
-      Constant Summary
-      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
-    </h2>
-
-    <dl class="constants">
-      
-        <dt id="DEFAULT_ID_FIELD-constant" class="">DEFAULT_ID_FIELD =
-          
-        </dt>
-        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
-      
-    </dl>
-  
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#multi_tenant-instance_method" title="#multi_tenant (instance method)">#<strong>multi_tenant</strong>(tenant_name, options = {})  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>executes when multi_tenant method is called in the model.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="multi_tenant-instance_method">
-  
-    #<strong>multi_tenant</strong>(tenant_name, options = {})  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>executes when multi_tenant method is called in the model. This method adds the following methods to the model that calls it. scoped_by_tenant? - returns true if the model is scoped by tenant partition_key - returns the partition key for the model primary_key - returns the primary key for the model</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-16
-17
-18
-19
-20
-21
-22
-23
-24
-25
-26
-27
-28
-29
-30
-31
-32
-33
-34
-35
-36
-37
-38
-39
-40
-41
-42
-43
-44
-45
-46
-47
-48
-49
-50
-51
-52
-53
-54
-55
-56
-57
-58
-59
-60
-61
-62
-63
-64
-65
-66
-67
-68
-69
-70
-71
-72
-73
-74
-75
-76
-77
-78
-79
-80
-81
-82
-83
-84
-85
-86
-87
-88
-89
-90
-91
-92
-93
-94
-95
-96
-97
-98
-99
-100
-101
-102
-103
-104
-105
-106
-107
-108
-109
-110
-111
-112
-113
-114
-115
-116
-117
-118
-119
-120
-121
-122
-123
-124
-125
-126
-127
-128
-129
-130
-131
-132
-133
-134
-135
-136
-137
-138
-139
-140
-141
-142
-143
-144
-145
-146
-147
-148
-149
-150
-151
-152
-153
-154
-155
-156
-157</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/model_extensions.rb', line 16</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_multi_tenant'>multi_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_underscore'>underscore</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='op'>==</span> <span class='id identifier rubyid_tenant_name'>tenant_name</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_table_name'>table_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_table_name'>table_name</span><span class='period'>.</span><span class='id identifier rubyid_singularize'>singularize</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='op'>==</span> <span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-    <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_write_only_mode_enabled?'><span class='object_link'><a href="../MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span></span>
-      <span class='comment'># This is the tenant model itself. Workaround for https://github.com/citusdata/citus/issues/687
-</span>      <span class='id identifier rubyid_before_create'>before_create</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span>
-        <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_columns_hash'>columns_hash</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbol'>:uuid</span>
-               <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span>
-             <span class='kw'>else</span>
-               <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_select_value'>select_value</span><span class='lparen'>(</span>
-                 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT nextval(&#39;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>_seq&#39;::regclass)</span><span class='tstring_end'>&quot;</span></span>
-               <span class='rparen'>)</span>
-             <span class='kw'>end</span>
-        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>||=</span> <span class='id identifier rubyid_id'>id</span>
-      <span class='rbrace'>}</span>
-    <span class='kw'>end</span>
-  <span class='kw'>else</span>
-    <span class='kw'>class</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
-      <span class='kw'>def</span> <span class='id identifier rubyid_scoped_by_tenant?'>scoped_by_tenant?</span>
-        <span class='kw'>true</span>
-      <span class='kw'>end</span>
-
-      <span class='comment'># Allow partition_key to be set from a superclass if not already set in this class
-</span>      <span class='kw'>def</span> <span class='id identifier rubyid_partition_key'>partition_key</span>
-        <span class='ivar'>@partition_key</span> <span class='op'>||=</span> <span class='id identifier rubyid_ancestors'>ancestors</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@partition_key</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
-                                    <span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:instance_variable_get</span><span class='comma'>,</span> <span class='symbol'>:@partition_key</span><span class='rparen'>)</span>
-      <span class='kw'>end</span>
-
-      <span class='comment'># Avoid primary_key errors when using composite primary keys (e.g. id, tenant_id)
-</span>      <span class='kw'>def</span> <span class='id identifier rubyid_primary_key'>primary_key</span>
-        <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>PRIMARY_KEY_NOT_SET</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='op'>!</span><span class='const'>PRIMARY_KEY_NOT_SET</span><span class='period'>.</span><span class='id identifier rubyid_equal?'>equal?</span><span class='lparen'>(</span><span class='ivar'>@primary_key</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='ivar'>@primary_key</span>
-          <span class='kw'>return</span> <span class='ivar'>@primary_key</span>
-        <span class='kw'>end</span>
-
-        <span class='id identifier rubyid_primary_object_keys'>primary_object_keys</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_schema_cache'>schema_cache</span><span class='period'>.</span><span class='id identifier rubyid_primary_keys'>primary_keys</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rbracket'>]</span>
-
-        <span class='ivar'>@primary_key</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_primary_object_keys'>primary_object_keys</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
-                         <span class='id identifier rubyid_primary_object_keys'>primary_object_keys</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
-                       <span class='kw'>elsif</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_schema_cache'>schema_cache</span><span class='period'>.</span><span class='id identifier rubyid_columns_hash'>columns_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='const'><span class='object_link'><a href="#DEFAULT_ID_FIELD-constant" title="MultiTenant::ModelExtensionsClassMethods::DEFAULT_ID_FIELD (constant)">DEFAULT_ID_FIELD</a></span></span>
-                         <span class='const'><span class='object_link'><a href="#DEFAULT_ID_FIELD-constant" title="MultiTenant::ModelExtensionsClassMethods::DEFAULT_ID_FIELD (constant)">DEFAULT_ID_FIELD</a></span></span>
-                       <span class='kw'>end</span>
-      <span class='kw'>end</span>
-
-      <span class='kw'>def</span> <span class='id identifier rubyid_inherited'>inherited</span><span class='lparen'>(</span><span class='id identifier rubyid_subclass'>subclass</span><span class='rparen'>)</span>
-        <span class='kw'>super</span>
-        <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_multi_tenant_model'><span class='object_link'><a href="../MultiTenant.html#register_multi_tenant_model-class_method" title="MultiTenant.register_multi_tenant_model (method)">register_multi_tenant_model</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_subclass'>subclass</span><span class='rparen'>)</span>
-      <span class='kw'>end</span>
-    <span class='kw'>end</span>
-
-    <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_multi_tenant_model'><span class='object_link'><a href="../MultiTenant.html#register_multi_tenant_model-class_method" title="MultiTenant.register_multi_tenant_model (method)">register_multi_tenant_model</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
-
-    <span class='ivar'>@partition_key</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:partition_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_partition_key'><span class='object_link'><a href="../MultiTenant.html#partition_key-class_method" title="MultiTenant.partition_key (method)">partition_key</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_partition_key'>partition_key</span> <span class='op'>=</span> <span class='ivar'>@partition_key</span>
-
-    <span class='comment'># Create an implicit belongs_to association only if tenant class exists
-</span>    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tenant_klass_defined?'><span class='object_link'><a href="../MultiTenant.html#tenant_klass_defined%3F-class_method" title="MultiTenant.tenant_klass_defined? (method)">tenant_klass_defined?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-      <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='symbol'>:class_name</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span><span class='comma'>,</span> <span class='symbol'>:optional</span><span class='rparen'>)</span>
-                                       <span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>foreign_key:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:partition_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-    <span class='kw'>end</span>
-
-    <span class='comment'># New instances should have the tenant set
-</span>    <span class='id identifier rubyid_after_initialize'>after_initialize</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
-      <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span> <span class='op'>&amp;&amp;</span>
-         <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_attribute_present?'>attribute_present?</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
-        <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='rparen'>)</span>
-      <span class='kw'>end</span>
-    <span class='rbrace'>}</span>
-
-    <span class='comment'># Below block adds the following methods to the model that calls it.
-</span>    <span class='comment'># partition_key= - returns the partition key for the model.class &lt;&lt; self &#39;partition&#39; method defined above
-</span>    <span class='comment'># is the getter method. Here, there is additional check to assure that the tenant id is not changed once set
-</span>    <span class='comment'># tenant_name- returns the name of the tenant model. Its setter and getter methods defined separately
-</span>    <span class='comment'># Getter checks for the tenant association and if it is not loaded, returns the current tenant id set
-</span>    <span class='comment'># in the MultiTenant module
-</span>    <span class='id identifier rubyid_to_include'>to_include</span> <span class='op'>=</span> <span class='const'>Module</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_define_method'>define_method</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tenant_id'>tenant_id</span><span class='op'>|</span>
-        <span class='id identifier rubyid_write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_tenant_id'>tenant_id</span><span class='rparen'>)</span>
-
-        <span class='comment'># Rails 5 `attribute_will_change!` uses the attribute-method-call rather than `read_attribute`
-</span>        <span class='comment'># and will raise ActiveModel::MissingAttributeError if that column was not selected.
-</span>        <span class='comment'># This is rescued as NoMethodError and in MRI attribute_was is assigned an arbitrary Object
-</span>        <span class='id identifier rubyid_was'>was</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>_was</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
-        <span class='id identifier rubyid_was_nil_or_skipped'>was_nil_or_skipped</span> <span class='op'>=</span> <span class='id identifier rubyid_was'>was</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_was'>was</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>Object</span><span class='rparen'>)</span>
-
-        <span class='kw'>if</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>_changed?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_persisted?'>persisted?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_was_nil_or_skipped'>was_nil_or_skipped</span>
-          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantIsImmutable.html" title="MultiTenant::TenantIsImmutable (class)">TenantIsImmutable</a></span></span>
-        <span class='kw'>end</span>
-
-        <span class='id identifier rubyid_tenant_id'>tenant_id</span>
-      <span class='kw'>end</span>
-
-      <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tenant_klass_defined?'><span class='object_link'><a href="../MultiTenant.html#tenant_klass_defined%3F-class_method" title="MultiTenant.tenant_klass_defined? (method)">tenant_klass_defined?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='rparen'>)</span>
-        <span class='id identifier rubyid_define_method'>define_method</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_model'>model</span><span class='op'>|</span>
-          <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
-          <span class='kw'>if</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>_changed?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_persisted?'>persisted?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>_was</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TenantIsImmutable.html" title="MultiTenant::TenantIsImmutable (class)">TenantIsImmutable</a></span></span>
-          <span class='kw'>end</span>
-
-          <span class='id identifier rubyid_model'>model</span>
-        <span class='kw'>end</span>
-
-        <span class='id identifier rubyid_define_method'>define_method</span> <span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>do</span>
-          <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_association'>association</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_name'>tenant_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_loaded?'>loaded?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_is_id?'><span class='object_link'><a href="../MultiTenant.html#current_tenant_is_id%3F-class_method" title="MultiTenant.current_tenant_is_id? (method)">current_tenant_is_id?</a></span></span> <span class='op'>&amp;&amp;</span>
-             <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span>
-            <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'><span class='object_link'><a href="../MultiTenant.html#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span></span>
-          <span class='kw'>else</span>
-            <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
-          <span class='kw'>end</span>
-        <span class='kw'>end</span>
-      <span class='kw'>end</span>
-    <span class='kw'>end</span>
-    <span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_to_include'>to_include</span>
-
-    <span class='comment'># Below blocks sets tenant_id for the current session with the tenant_id of the record
-</span>    <span class='comment'># If the tenant is not set for the `session.After` the save operation current session tenant is set to nil
-</span>    <span class='comment'># If tenant is set for the session, save operation is performed as it is
-</span>    <span class='id identifier rubyid_around_save'>around_save</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
-      <span class='id identifier rubyid_record_tenant'>record_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_attribute_was'>attribute_was</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span>
-      <span class='kw'>if</span> <span class='id identifier rubyid_persisted?'>persisted?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_record_tenant'>record_tenant</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-        <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="../MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='rbrace'>}</span>
-      <span class='kw'>else</span>
-        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
-      <span class='kw'>end</span>
-    <span class='rbrace'>}</span>
-
-    <span class='id identifier rubyid_around_update'>around_update</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
-      <span class='id identifier rubyid_record_tenant'>record_tenant</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_attribute_was'>attribute_was</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span>
-      <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_record_tenant'>record_tenant</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-        <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="../MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='rbrace'>}</span>
-      <span class='kw'>else</span>
-        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
-      <span class='kw'>end</span>
-    <span class='rbrace'>}</span>
-
-    <span class='id identifier rubyid_around_destroy'>around_destroy</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
-      <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-        <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="../MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_key'>partition_key</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='rbrace'>}</span>
-      <span class='kw'>else</span>
-        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
-      <span class='kw'>end</span>
-    <span class='rbrace'>}</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/QueryMonitor.html b/docs/source/_static/api-reference/MultiTenant/QueryMonitor.html
deleted file mode 100644
index 3828b15..0000000
--- a/docs/source/_static/api-reference/MultiTenant/QueryMonitor.html
+++ /dev/null
@@ -1,257 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::QueryMonitor
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::QueryMonitor";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (Q)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">QueryMonitor</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::QueryMonitor
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">MultiTenant::QueryMonitor</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_monitor.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:enable Style/ClassVars QueryMonitor class to log a warning when a query fails and there is no tenant set start and finish methods are required to be register sql.active_record hook</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#finish-instance_method" title="#finish (instance method)">#<strong>finish</strong>(_name, _id, payload)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>(_name, _id, _payload)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="finish-instance_method">
-  
-    #<strong>finish</strong>(_name, _id, payload)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-24
-25
-26
-27
-28
-29
-30</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_monitor.rb', line 24</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_finish'>finish</span><span class='lparen'>(</span><span class='id identifier rubyid__name'>_name</span><span class='comma'>,</span> <span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_query_monitor_enabled?'><span class='object_link'><a href="../MultiTenant.html#query_monitor_enabled%3F-class_method" title="MultiTenant.query_monitor_enabled? (method)">query_monitor_enabled?</a></span></span>
-
-  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:exception</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="../MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
-
-  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WARNING: Tenant not present - make sure to add MultiTenant.with(tenant) { ... }</span><span class='tstring_end'>&#39;</span></span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="start-instance_method">
-  
-    #<strong>start</strong>(_name, _id, _payload)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-22</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_monitor.rb', line 22</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid__name'>_name</span><span class='comma'>,</span> <span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid__payload'>_payload</span><span class='rparen'>)</span> <span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/Table.html b/docs/source/_static/api-reference/MultiTenant/Table.html
deleted file mode 100644
index bb5c368..0000000
--- a/docs/source/_static/api-reference/MultiTenant/Table.html
+++ /dev/null
@@ -1,419 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::Table
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::Table";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (T)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">Table</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::Table
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">MultiTenant::Table</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#arel_table-instance_method" title="#arel_table (instance method)">#<strong>arel_table</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute arel_table.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#eql%3F-instance_method" title="#eql? (instance method)">#<strong>eql?</strong>(other)  &#x21d2; Boolean </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(arel_table)  &#x21d2; Table </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of Table.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-<div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(arel_table)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::Table (class)">Table</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of Table.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-9
-10
-11</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 9</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arel_table'>arel_table</span><span class='rparen'>)</span>
-  <span class='ivar'>@arel_table</span> <span class='op'>=</span> <span class='id identifier rubyid_arel_table'>arel_table</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="arel_table-instance_method">
-  
-    #<strong>arel_table</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute arel_table.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-7
-8
-9</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 7</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_arel_table'>arel_table</span>
-  <span class='ivar'>@arel_table</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="eql?-instance_method">
-  
-    #<strong>eql?</strong>(other)  &#x21d2; <tt>Boolean</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-
-  </div>
-</div>
-<div class="tags">
-  
-<p class="tag_title">Returns:</p>
-<ul class="return">
-  
-    <li>
-      
-      
-        <span class='type'>(<tt>Boolean</tt>)</span>
-      
-      
-      
-    </li>
-  
-</ul>
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-13
-14
-15
-16</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 13</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
-  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>&amp;&amp;</span>
-    <span class='id identifier rubyid_equality_fields'>equality_fields</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_equality_fields'>equality_fields</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="hash-instance_method">
-  
-    #<strong>hash</strong>  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-18
-19
-20</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 18</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_hash'>hash</span>
-  <span class='id identifier rubyid_equality_fields'>equality_fields</span><span class='period'>.</span><span class='id identifier rubyid_hash'>hash</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/TenantEnforcementClause.html b/docs/source/_static/api-reference/MultiTenant/TenantEnforcementClause.html
deleted file mode 100644
index 63815f2..0000000
--- a/docs/source/_static/api-reference/MultiTenant/TenantEnforcementClause.html
+++ /dev/null
@@ -1,148 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::TenantEnforcementClause
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::TenantEnforcementClause";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (T)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">TenantEnforcementClause</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::TenantEnforcementClause
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName"><span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Arel::Nodes::Node</li>
-          
-            <li class="next"><span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></li>
-          
-            <li class="next">MultiTenant::TenantEnforcementClause</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-  <h2>Instance Attribute Summary</h2>
-  
-  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></h3>
-  <p class="inherited"><span class='object_link'><a href="BaseTenantEnforcementClause.html#tenant_attribute-instance_method" title="MultiTenant::BaseTenantEnforcementClause#tenant_attribute (method)">#tenant_attribute</a></span></p>
-
-
-
-  
-  
-  
-  
-  
-  
-  <h2>Method Summary</h2>
-  
-  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></h3>
-  <p class="inherited"><span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">#initialize</a></span>, <span class='object_link'><a href="BaseTenantEnforcementClause.html#to_s-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_s (method)">#to_s</a></span>, <span class='object_link'><a href="BaseTenantEnforcementClause.html#to_sql-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_sql (method)">#to_sql</a></span>, <span class='object_link'><a href="BaseTenantEnforcementClause.html#to_str-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_str (method)">#to_str</a></span></p>
-
-  <div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">MultiTenant::BaseTenantEnforcementClause</a></span></p>
-  
-</div>
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/TenantIsImmutable.html b/docs/source/_static/api-reference/MultiTenant/TenantIsImmutable.html
deleted file mode 100644
index 6139053..0000000
--- a/docs/source/_static/api-reference/MultiTenant/TenantIsImmutable.html
+++ /dev/null
@@ -1,135 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Exception: MultiTenant::TenantIsImmutable
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::TenantIsImmutable";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (T)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">TenantIsImmutable</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Exception: MultiTenant::TenantIsImmutable
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">StandardError</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">StandardError</li>
-          
-            <li class="next">MultiTenant::TenantIsImmutable</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/multi_tenant.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>This exception is raised when a there is an attempt to change tenant</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-
-
-
-
-  
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/TenantJoinEnforcementClause.html b/docs/source/_static/api-reference/MultiTenant/TenantJoinEnforcementClause.html
deleted file mode 100644
index d16b345..0000000
--- a/docs/source/_static/api-reference/MultiTenant/TenantJoinEnforcementClause.html
+++ /dev/null
@@ -1,310 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: MultiTenant::TenantJoinEnforcementClause
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::TenantJoinEnforcementClause";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (T)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">TenantJoinEnforcementClause</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: MultiTenant::TenantJoinEnforcementClause
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName"><span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Arel::Nodes::Node</li>
-          
-            <li class="next"><span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></li>
-          
-            <li class="next">MultiTenant::TenantJoinEnforcementClause</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
-  <ul class="summary">
-    
-      <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#table_left-instance_method" title="#table_left (instance method)">#<strong>table_left</strong>  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-    
-      <span class="note title readonly">readonly</span>
-    
-    
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Returns the value of attribute table_left.</p>
-</div></span>
-  
-</li>
-
-    
-  </ul>
-
-
-
-  
-  
-  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></h3>
-  <p class="inherited"><span class='object_link'><a href="BaseTenantEnforcementClause.html#tenant_attribute-instance_method" title="MultiTenant::BaseTenantEnforcementClause#tenant_attribute (method)">#tenant_attribute</a></span></p>
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(tenant_attribute, table_left)  &#x21d2; TenantJoinEnforcementClause </a>
-    
-
-    
-  </span>
-  
-  
-    <span class="note title constructor">constructor</span>
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>A new instance of TenantJoinEnforcementClause.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-  
-  
-  
-  
-  
-  
-  
-  
-  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span></h3>
-  <p class="inherited"><span class='object_link'><a href="BaseTenantEnforcementClause.html#to_s-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_s (method)">#to_s</a></span>, <span class='object_link'><a href="BaseTenantEnforcementClause.html#to_sql-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_sql (method)">#to_sql</a></span>, <span class='object_link'><a href="BaseTenantEnforcementClause.html#to_str-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_str (method)">#to_str</a></span></p>
-
-  <div id="constructor_details" class="method_details_list">
-  <h2>Constructor Details</h2>
-  
-    <div class="method_details first">
-  <h3 class="signature first" id="initialize-instance_method">
-  
-    #<strong>initialize</strong>(tenant_attribute, table_left)  &#x21d2; <tt><span class='object_link'><a href="" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span></tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns a new instance of TenantJoinEnforcementClause.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-215
-216
-217
-218
-219</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 215</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='comma'>,</span> <span class='id identifier rubyid_table_left'>table_left</span><span class='rparen'>)</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant_attribute'>tenant_attribute</span><span class='rparen'>)</span>
-  <span class='ivar'>@table_left</span> <span class='op'>=</span> <span class='id identifier rubyid_table_left'>table_left</span>
-  <span class='ivar'>@model_left</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_multi_tenant_model_for_table'><span class='object_link'><a href="../MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_table_left'>table_left</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-  
-</div>
-
-  <div id="instance_attr_details" class="attr_details">
-    <h2>Instance Attribute Details</h2>
-    
-      
-      <span id=""></span>
-      <div class="method_details first">
-  <h3 class="signature first" id="table_left-instance_method">
-  
-    #<strong>table_left</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Returns the value of attribute table_left.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-213
-214
-215</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 213</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_table_left'>table_left</span>
-  <span class='ivar'>@table_left</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenant/TenantValueVisitor.html b/docs/source/_static/api-reference/MultiTenant/TenantValueVisitor.html
deleted file mode 100644
index 53cd23d..0000000
--- a/docs/source/_static/api-reference/MultiTenant/TenantValueVisitor.html
+++ /dev/null
@@ -1,239 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenant::TenantValueVisitor
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenant::TenantValueVisitor";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (T)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">TenantValueVisitor</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenant::TenantValueVisitor
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_MultiTenant_TenantEnforcementClause-instance_method" title="#visit_MultiTenant_TenantEnforcementClause (instance method)">#<strong>visit_MultiTenant_TenantEnforcementClause</strong>(obj, collector)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>rubocop:disable Naming/MethodName.</p>
-</div></span>
-  
-</li>
-
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#visit_MultiTenant_TenantJoinEnforcementClause-instance_method" title="#visit_MultiTenant_TenantJoinEnforcementClause (instance method)">#<strong>visit_MultiTenant_TenantJoinEnforcementClause</strong>(obj, collector)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="visit_MultiTenant_TenantEnforcementClause-instance_method">
-  
-    #<strong>visit_MultiTenant_TenantEnforcementClause</strong>(obj, collector)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>rubocop:disable Naming/MethodName</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-230
-231
-232</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 230</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_MultiTenant_TenantEnforcementClause'>visit_MultiTenant_TenantEnforcementClause</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_collector'>collector</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_collector'>collector</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_obj'>obj</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-      <div class="method_details ">
-  <h3 class="signature " id="visit_MultiTenant_TenantJoinEnforcementClause-instance_method">
-  
-    #<strong>visit_MultiTenant_TenantJoinEnforcementClause</strong>(obj, collector)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-234
-235
-236</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 234</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_visit_MultiTenant_TenantJoinEnforcementClause'>visit_MultiTenant_TenantJoinEnforcementClause</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_collector'>collector</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_collector'>collector</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_obj'>obj</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/MultiTenantFindBy.html b/docs/source/_static/api-reference/MultiTenantFindBy.html
deleted file mode 100644
index 40ad065..0000000
--- a/docs/source/_static/api-reference/MultiTenantFindBy.html
+++ /dev/null
@@ -1,180 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: MultiTenantFindBy
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "MultiTenantFindBy";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index (M)</a> &raquo;
-    
-    
-    <span class="title">MultiTenantFindBy</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: MultiTenantFindBy
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/query_rewriter.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#cached_find_by_statement-instance_method" title="#cached_find_by_statement (instance method)">#<strong>cached_find_by_statement</strong>(key, &amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="cached_find_by_statement-instance_method">
-  
-    #<strong>cached_find_by_statement</strong>(key, &amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-375
-376
-377
-378
-379
-380</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/query_rewriter.rb', line 375</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_cached_find_by_statement'>cached_find_by_statement</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>return</span> <span class='kw'>super</span> <span class='kw'>unless</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:scoped_by_tenant?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_scoped_by_tenant?'>scoped_by_tenant?</span>
-
-  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'><span class='object_link'><a href="MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
-  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/Sidekiq.html b/docs/source/_static/api-reference/Sidekiq.html
deleted file mode 100644
index 5ecbd37..0000000
--- a/docs/source/_static/api-reference/Sidekiq.html
+++ /dev/null
@@ -1,126 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: Sidekiq
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "Sidekiq";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index (S)</a> &raquo;
-    
-    
-    <span class="title">Sidekiq</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: Sidekiq
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/sidekiq.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Bulk push support for Sidekiq while setting multi-tenant information. This is a copy of the Sidekiq::Client#push_bulk method with the addition of setting the multi-tenant information for each job.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-  
-    
-      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Sidekiq/Client.html" title="Sidekiq::Client (class)">Client</a></span>
-    
-  
-</p>
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/Sidekiq/Client.html b/docs/source/_static/api-reference/Sidekiq/Client.html
deleted file mode 100644
index 1a18841..0000000
--- a/docs/source/_static/api-reference/Sidekiq/Client.html
+++ /dev/null
@@ -1,302 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: Sidekiq::Client
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "Sidekiq::Client";
-  relpath = '../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span></span>
-     &raquo; 
-    <span class="title">Client</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: Sidekiq::Client
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Sidekiq::Client</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/sidekiq.rb</dd>
-  </dl>
-  
-</div>
-
-
-
-
-
-
-
-
-  
-    <h2>
-      Class Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#push_bulk_with_tenants-class_method" title="push_bulk_with_tenants (class method)">.<strong>push_bulk_with_tenants</strong>(items)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#push_bulk_with_tenants-instance_method" title="#push_bulk_with_tenants (instance method)">#<strong>push_bulk_with_tenants</strong>(items)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'>
-<p>Allows the caller to enqueue multiple Sidekiq jobs with tenant information in a single call.</p>
-</div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="class_method_details" class="method_details_list">
-    <h2>Class Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="push_bulk_with_tenants-class_method">
-  
-    .<strong>push_bulk_with_tenants</strong>(items)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-84
-85
-86</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/sidekiq.rb', line 84</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_push_bulk_with_tenants'>push_bulk_with_tenants</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_push_bulk_with_tenants'>push_bulk_with_tenants</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="push_bulk_with_tenants-instance_method">
-  
-    #<strong>push_bulk_with_tenants</strong>(items)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><div class="docstring">
-  <div class="discussion">
-    
-<p>Allows the caller to enqueue multiple Sidekiq jobs with tenant information in a single call. It ensures that each job is processed within the correct tenant context and returns an array of job IDs for the enqueued jobs</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-62
-63
-64
-65
-66
-67
-68
-69
-70
-71
-72
-73
-74
-75
-76
-77
-78
-79
-80</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/sidekiq.rb', line 62</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_push_bulk_with_tenants'>push_bulk_with_tenants</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_first_job'>first_job</span> <span class='op'>=</span> <span class='id identifier rubyid_items'>items</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jobs</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
-  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_first_job'>first_job</span> <span class='comment'># no jobs to push
-</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_first_job'>first_job</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bulk arguments must be an Array of Hashes: [{ &#39;args&#39; =&gt; [1], &#39;tenant_id&#39; =&gt; 1 }, ...]</span><span class='tstring_end'>&quot;</span></span>
-  <span class='kw'>end</span>
-
-  <span class='id identifier rubyid_normed'>normed</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_item'>normalize_item</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jobs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>args</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_payloads'>payloads</span> <span class='op'>=</span> <span class='id identifier rubyid_items'>items</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jobs</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_job'>job</span><span class='op'>|</span>
-    <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="../MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_job'>job</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tenant_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span>
-      <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_normed'>normed</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>args</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_job'>job</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>args</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jid</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_hex'>hex</span><span class='lparen'>(</span><span class='int'>12</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enqueued_at</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span>
-      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_process_single'>process_single</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>class</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_copy'>copy</span><span class='rparen'>)</span>
-      <span class='id identifier rubyid_result'>result</span> <span class='op'>||</span> <span class='kw'>nil</span>
-    <span class='kw'>end</span>
-  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
-
-  <span class='id identifier rubyid_raw_push'>raw_push</span><span class='lparen'>(</span><span class='id identifier rubyid_payloads'>payloads</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_payloads'>payloads</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
-  <span class='id identifier rubyid_payloads'>payloads</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant.html b/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant.html
deleted file mode 100644
index e6b45f6..0000000
--- a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant.html
+++ /dev/null
@@ -1,126 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Module: Sidekiq::Middleware::MultiTenant
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "Sidekiq::Middleware::MultiTenant";
-  relpath = '../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../_index.html">Index (M)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span></span> &raquo; <span class='title'>Middleware</span>
-     &raquo; 
-    <span class="title">MultiTenant</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Module: Sidekiq::Middleware::MultiTenant
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/sidekiq.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Adds methods to handle tenant information both in the client and server.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div><h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-  
-    
-      <strong class="classes">Classes:</strong> <span class='object_link'><a href="MultiTenant/Client.html" title="Sidekiq::Middleware::MultiTenant::Client (class)">Client</a></span>, <span class='object_link'><a href="MultiTenant/Server.html" title="Sidekiq::Middleware::MultiTenant::Server (class)">Server</a></span>
-    
-  
-</p>
-
-
-
-
-
-
-
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Client.html b/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Client.html
deleted file mode 100644
index bb036f0..0000000
--- a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Client.html
+++ /dev/null
@@ -1,217 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: Sidekiq::Middleware::MultiTenant::Client
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "Sidekiq::Middleware::MultiTenant::Client";
-  relpath = '../../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../../_index.html">Index (C)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../../Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span></span> &raquo; <span class='title'>Middleware</span> &raquo; <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">Client</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: Sidekiq::Middleware::MultiTenant::Client
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Sidekiq::Middleware::MultiTenant::Client</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/sidekiq.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Get the current tenant and store in the message to be sent to Sidekiq.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(_worker_class, msg, _queue, _redis_pool)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="call-instance_method">
-  
-    #<strong>call</strong>(_worker_class, msg, _queue, _redis_pool)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-7
-8
-9
-10
-11
-12
-13
-14
-15
-16
-17</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/sidekiq.rb', line 7</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid__worker_class'>_worker_class</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='id identifier rubyid__queue'>_queue</span><span class='comma'>,</span> <span class='id identifier rubyid__redis_pool'>_redis_pool</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant'>current_tenant</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
-    <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multi_tenant</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span>
-      <span class='lbrace'>{</span>
-        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>class</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_class'>current_tenant_class</span><span class='comma'>,</span>
-        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_tenant_id'>current_tenant_id</span>
-      <span class='rbrace'>}</span>
-  <span class='kw'>end</span>
-
-  <span class='kw'>yield</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Server.html b/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Server.html
deleted file mode 100644
index c2283ea..0000000
--- a/docs/source/_static/api-reference/Sidekiq/Middleware/MultiTenant/Server.html
+++ /dev/null
@@ -1,219 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Class: Sidekiq::Middleware::MultiTenant::Server
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "Sidekiq::Middleware::MultiTenant::Server";
-  relpath = '../../../';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="../../../class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="../../../_index.html">Index (S)</a> &raquo;
-    <span class='title'><span class='object_link'><a href="../../../Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span></span> &raquo; <span class='title'>Middleware</span> &raquo; <span class='title'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span>
-     &raquo; 
-    <span class="title">Server</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="../../../class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Class: Sidekiq::Middleware::MultiTenant::Server
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-  <dl>
-    <dt>Inherits:</dt>
-    <dd>
-      <span class="inheritName">Object</span>
-      
-        <ul class="fullTree">
-          <li>Object</li>
-          
-            <li class="next">Sidekiq::Middleware::MultiTenant::Server</li>
-          
-        </ul>
-        <a href="#" class="inheritanceTree">show all</a>
-      
-    </dd>
-  </dl>
-  
-
-  
-  
-  
-  
-  
-
-  
-
-  
-  <dl>
-    <dt>Defined in:</dt>
-    <dd>lib/activerecord-multi-tenant/sidekiq.rb</dd>
-  </dl>
-  
-</div>
-
-<h2>Overview</h2><div class="docstring">
-  <div class="discussion">
-    
-<p>Pull the tenant out and run the current thread with it.</p>
-
-
-  </div>
-</div>
-<div class="tags">
-  
-
-</div>
-
-
-
-
-
-
-  
-    <h2>
-      Instance Method Summary
-      <small><a href="#" class="summary_toggle">collapse</a></small>
-    </h2>
-
-    <ul class="summary">
-      
-        <li class="public ">
-  <span class="summary_signature">
-    
-      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(_worker_class, msg, _queue, &amp;block)  &#x21d2; Object </a>
-    
-
-    
-  </span>
-  
-  
-  
-  
-  
-  
-  
-
-  
-    <span class="summary_desc"><div class='inline'></div></span>
-  
-</li>
-
-      
-    </ul>
-  
-
-
-
-  <div id="instance_method_details" class="method_details_list">
-    <h2>Instance Method Details</h2>
-
-    
-      <div class="method_details first">
-  <h3 class="signature first" id="call-instance_method">
-  
-    #<strong>call</strong>(_worker_class, msg, _queue, &amp;block)  &#x21d2; <tt>Object</tt> 
-  
-
-  
-
-  
-</h3><table class="source_code">
-  <tr>
-    <td>
-      <pre class="lines">
-
-
-22
-23
-24
-25
-26
-27
-28
-29
-30
-31
-32
-33</pre>
-    </td>
-    <td>
-      <pre class="code"><span class="info file"># File 'lib/activerecord-multi-tenant/sidekiq.rb', line 22</span>
-
-<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid__worker_class'>_worker_class</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='id identifier rubyid__queue'>_queue</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multi_tenant</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_tenant'>tenant</span> <span class='op'>=</span> <span class='kw'>begin</span>
-      <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multi_tenant</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>class</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_constantize'>constantize</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multi_tenant</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
-    <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>RecordNotFound</span>
-      <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multi_tenant</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
-    <span class='kw'>end</span>
-    <span class='const'><span class='object_link'><a href="../MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'>with</span><span class='lparen'>(</span><span class='id identifier rubyid_tenant'>tenant</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
-  <span class='kw'>else</span>
-    <span class='kw'>yield</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span></pre>
-    </td>
-  </tr>
-</table>
-</div>
-    
-  </div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:24 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/_index.html b/docs/source/_static/api-reference/_index.html
deleted file mode 100644
index ffaea9a..0000000
--- a/docs/source/_static/api-reference/_index.html
+++ /dev/null
@@ -1,399 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = null;
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1 class="noborder title">Documentation by YARD 0.9.34</h1>
-<div id="listing">
-  <h1 class="alphaindex">Alphabetic Index</h1>
-  
-  <h2>File Listing</h2>
-  <ul id="files" class="index_inline_list">
-  
-  
-    <li class="r1"><a href="index.html" title="README">README</a></li>
-    
-  
-  </ul>
-
-<div class="clear"></div>
-<h2>Namespace Listing A-Z</h2>
-
-
-
-
-<table>
-  <tr>
-    <td valign='top' width="33%">
-      
-        
-        <ul id="alpha_A" class="alpha">
-          <li class="letter">A</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html" title="MultiTenant::ArelTenantVisitor (class)">ArelTenantVisitor</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/ArelVisitorsDepthFirst.html" title="MultiTenant::ArelVisitorsDepthFirst (class)">ArelVisitorsDepthFirst</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/Associations/Association.html" title="ActiveRecord::Associations::Association (class)">Association</a></span>
-                
-                  <small>(ActiveRecord::Associations)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/Associations.html" title="ActiveRecord::Associations (module)">Associations</a></span>
-                
-                  <small>(ActiveRecord)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_B" class="alpha">
-          <li class="letter">B</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_C" class="alpha">
-          <li class="letter">C</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/Associations/ClassMethods.html" title="ActiveRecord::Associations::ClassMethods (module)">ClassMethods</a></span>
-                
-                  <small>(ActiveRecord::Associations)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Client.html" title="Sidekiq::Middleware::MultiTenant::Client (class)">Client</a></span>
-                
-                  <small>(Sidekiq::Middleware::MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="Sidekiq/Client.html" title="Sidekiq::Client (class)">Client</a></span>
-                
-                  <small>(Sidekiq)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span>
-                
-                  <small>(ActiveRecord)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/Context.html" title="MultiTenant::Context (class)">Context</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/ControllerExtensions.html" title="MultiTenant::ControllerExtensions (module)">ControllerExtensions</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/CopyFromClient.html" title="MultiTenant::CopyFromClient (module)">CopyFromClient</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html" title="MultiTenant::CopyFromClientHelper (class)">CopyFromClientHelper</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/Current.html" title="MultiTenant::Current (class)">Current</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_D" class="alpha">
-          <li class="letter">D</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/DatabaseStatements.html" title="MultiTenant::DatabaseStatements (module)">DatabaseStatements</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_F" class="alpha">
-          <li class="letter">F</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/FastTruncate.html" title="MultiTenant::FastTruncate (module)">FastTruncate</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_M" class="alpha">
-          <li class="letter">M</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/MigrationExtensions.html" title="MultiTenant::MigrationExtensions (module)">MigrationExtensions</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/MissingTenantError.html" title="MultiTenant::MissingTenantError (class)">MissingTenantError</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/ModelExtensionsClassMethods.html" title="MultiTenant::ModelExtensionsClassMethods (module)">ModelExtensionsClassMethods</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">MultiTenant</a></span>
-                
-                  <small>(Sidekiq::Middleware)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenantFindBy.html" title="MultiTenantFindBy (module)">MultiTenantFindBy</a></span>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_Q" class="alpha">
-          <li class="letter">Q</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/QueryMethods.html" title="ActiveRecord::QueryMethods (module)">QueryMethods</a></span>
-                
-                  <small>(ActiveRecord)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/QueryMonitor.html" title="MultiTenant::QueryMonitor (class)">QueryMonitor</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-          </td><td valign='top' width="33%">
-          
-        
-        <ul id="alpha_S" class="alpha">
-          <li class="letter">S</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/SchemaDumper.html" title="ActiveRecord::SchemaDumper (class)">SchemaDumper</a></span>
-                
-                  <small>(ActiveRecord)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="ActiveRecord/ConnectionAdapters/SchemaStatements.html" title="ActiveRecord::ConnectionAdapters::SchemaStatements (module)">SchemaStatements</a></span>
-                
-                  <small>(ActiveRecord::ConnectionAdapters)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Server.html" title="Sidekiq::Middleware::MultiTenant::Server (class)">Server</a></span>
-                
-                  <small>(Sidekiq::Middleware::MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-        
-        <ul id="alpha_T" class="alpha">
-          <li class="letter">T</li>
-          <ul>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/Table.html" title="MultiTenant::Table (class)">Table</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/TenantIsImmutable.html" title="MultiTenant::TenantIsImmutable (class)">TenantIsImmutable</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/TenantJoinEnforcementClause.html" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-              <li>
-                <span class='object_link'><a href="MultiTenant/TenantValueVisitor.html" title="MultiTenant::TenantValueVisitor (module)">TenantValueVisitor</a></span>
-                
-                  <small>(MultiTenant)</small>
-                
-              </li>
-            
-          </ul>
-        </ul>
-      
-    </td>
-  </tr>
-</table>
-
-</div>
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/class_list.html b/docs/source/_static/api-reference/class_list.html
deleted file mode 100644
index c959f4e..0000000
--- a/docs/source/_static/api-reference/class_list.html
+++ /dev/null
@@ -1,51 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <meta charset="utf-8" />
-    
-      <link rel="stylesheet" href="css/full_list.css" type="text/css" media="screen" />
-    
-      <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" />
-    
-
-    
-      <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-    
-      <script type="text/javascript" charset="utf-8" src="js/full_list.js"></script>
-    
-
-    <title>Class List</title>
-    <base id="base_target" target="_parent" />
-  </head>
-  <body>
-    <div id="content">
-      <div class="fixed_header">
-        <h1 id="full_list_header">Class List</h1>
-        <div id="full_list_nav">
-          
-            <span><a target="_self" href="class_list.html">
-              Classes
-            </a></span>
-          
-            <span><a target="_self" href="method_list.html">
-              Methods
-            </a></span>
-          
-            <span><a target="_self" href="file_list.html">
-              Files
-            </a></span>
-          
-        </div>
-
-        <div id="search">Search: <input type="text" /></div>
-      </div>
-
-      <ul id="full_list" class="class">
-        <li id="object_" class="odd"><div class="item" style="padding-left:30px"><span class='object_link'><a href="top-level-namespace.html" title="Top Level Namespace (root)">Top Level Namespace</a></span></div></li>
-<li id='object_ActiveRecord' class='even'><div class='item' style='padding-left:30px'><a class='toggle'></a> <span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><small class='search_info'>Top Level Namespace</small></div><ul><li id='object_ActiveRecord::Associations' class='collapsed odd'><div class='item' style='padding-left:45px'><a class='toggle'></a> <span class='object_link'><a href="ActiveRecord/Associations.html" title="ActiveRecord::Associations (module)">Associations</a></span><small class='search_info'>ActiveRecord</small></div><ul><li id='object_ActiveRecord::Associations::Association' class='collapsed'><div class='item' style='padding-left:60px'><span class='object_link'><a href="ActiveRecord/Associations/Association.html" title="ActiveRecord::Associations::Association (class)">Association</a></span> &lt; Object<small class='search_info'>ActiveRecord::Associations</small></div></li><li id='object_ActiveRecord::Associations::ClassMethods' class='collapsed'><div class='item' style='padding-left:60px'><span class='object_link'><a href="ActiveRecord/Associations/ClassMethods.html" title="ActiveRecord::Associations::ClassMethods (module)">ClassMethods</a></span><small class='search_info'>ActiveRecord::Associations</small></div></li></ul></li><li id='object_ActiveRecord::ConnectionAdapters' class='collapsed even'><div class='item' style='padding-left:45px'><a class='toggle'></a> <span class='object_link'><a href="ActiveRecord/ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span><small class='search_info'>ActiveRecord</small></div><ul><li id='object_ActiveRecord::ConnectionAdapters::SchemaStatements' class='collapsed'><div class='item' style='padding-left:60px'><span class='object_link'><a href="ActiveRecord/ConnectionAdapters/SchemaStatements.html" title="ActiveRecord::ConnectionAdapters::SchemaStatements (module)">SchemaStatements</a></span><small class='search_info'>ActiveRecord::ConnectionAdapters</small></div></li></ul></li><li id='object_ActiveRecord::QueryMethods' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="ActiveRecord/QueryMethods.html" title="ActiveRecord::QueryMethods (module)">QueryMethods</a></span><small class='search_info'>ActiveRecord</small></div></li><li id='object_ActiveRecord::SchemaDumper' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="ActiveRecord/SchemaDumper.html" title="ActiveRecord::SchemaDumper (class)">SchemaDumper</a></span> &lt; Object<small class='search_info'>ActiveRecord</small></div></li></ul></li><li id='object_MultiTenant' class='odd'><div class='item' style='padding-left:30px'><a class='toggle'></a> <span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span><small class='search_info'>Top Level Namespace</small></div><ul><li id='object_MultiTenant::ArelTenantVisitor' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html" title="MultiTenant::ArelTenantVisitor (class)">ArelTenantVisitor</a></span> &lt; Object<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::ArelVisitorsDepthFirst' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/ArelVisitorsDepthFirst.html" title="MultiTenant::ArelVisitorsDepthFirst (class)">ArelVisitorsDepthFirst</a></span> &lt; Visitor<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::BaseTenantEnforcementClause' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html" title="MultiTenant::BaseTenantEnforcementClause (class)">BaseTenantEnforcementClause</a></span> &lt; Node<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::Context' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/Context.html" title="MultiTenant::Context (class)">Context</a></span> &lt; Object<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::ControllerExtensions' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/ControllerExtensions.html" title="MultiTenant::ControllerExtensions (module)">ControllerExtensions</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::CopyFromClient' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/CopyFromClient.html" title="MultiTenant::CopyFromClient (module)">CopyFromClient</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::CopyFromClientHelper' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html" title="MultiTenant::CopyFromClientHelper (class)">CopyFromClientHelper</a></span> &lt; Object<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::Current' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/Current.html" title="MultiTenant::Current (class)">Current</a></span> &lt; CurrentAttributes<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::DatabaseStatements' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/DatabaseStatements.html" title="MultiTenant::DatabaseStatements (module)">DatabaseStatements</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::FastTruncate' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/FastTruncate.html" title="MultiTenant::FastTruncate (module)">FastTruncate</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::MigrationExtensions' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/MigrationExtensions.html" title="MultiTenant::MigrationExtensions (module)">MigrationExtensions</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::MissingTenantError' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/MissingTenantError.html" title="MultiTenant::MissingTenantError (class)">MissingTenantError</a></span> &lt; StandardError<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::ModelExtensionsClassMethods' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/ModelExtensionsClassMethods.html" title="MultiTenant::ModelExtensionsClassMethods (module)">ModelExtensionsClassMethods</a></span><small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::QueryMonitor' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/QueryMonitor.html" title="MultiTenant::QueryMonitor (class)">QueryMonitor</a></span> &lt; Object<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::Table' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/Table.html" title="MultiTenant::Table (class)">Table</a></span> &lt; Object<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::TenantEnforcementClause' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/TenantEnforcementClause.html" title="MultiTenant::TenantEnforcementClause (class)">TenantEnforcementClause</a></span> &lt; BaseTenantEnforcementClause<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::TenantIsImmutable' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/TenantIsImmutable.html" title="MultiTenant::TenantIsImmutable (class)">TenantIsImmutable</a></span> &lt; StandardError<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::TenantJoinEnforcementClause' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/TenantJoinEnforcementClause.html" title="MultiTenant::TenantJoinEnforcementClause (class)">TenantJoinEnforcementClause</a></span> &lt; BaseTenantEnforcementClause<small class='search_info'>MultiTenant</small></div></li><li id='object_MultiTenant::TenantValueVisitor' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="MultiTenant/TenantValueVisitor.html" title="MultiTenant::TenantValueVisitor (module)">TenantValueVisitor</a></span><small class='search_info'>MultiTenant</small></div></li></ul></li><li id='object_MultiTenantFindBy' class='odd'><div class='item' style='padding-left:30px'><span class='object_link'><a href="MultiTenantFindBy.html" title="MultiTenantFindBy (module)">MultiTenantFindBy</a></span><small class='search_info'>Top Level Namespace</small></div></li><li id='object_Sidekiq' class='even'><div class='item' style='padding-left:30px'><a class='toggle'></a> <span class='object_link'><a href="Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span><small class='search_info'>Top Level Namespace</small></div><ul><li id='object_Sidekiq::Client' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="Sidekiq/Client.html" title="Sidekiq::Client (class)">Client</a></span> &lt; Object<small class='search_info'>Sidekiq</small></div></li></ul></li><li id='object_Sidekiq::Middleware::MultiTenant' class='even'><div class='item' style='padding-left:30px'><a class='toggle'></a> <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant.html" title="Sidekiq::Middleware::MultiTenant (module)">Sidekiq::Middleware::MultiTenant</a></span><small class='search_info'>Sidekiq::Middleware</small></div><ul><li id='object_Sidekiq::Middleware::MultiTenant::Client' class='collapsed odd'><div class='item' style='padding-left:45px'><span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Client.html" title="Sidekiq::Middleware::MultiTenant::Client (class)">Client</a></span> &lt; Object<small class='search_info'>Sidekiq::Middleware::MultiTenant</small></div></li><li id='object_Sidekiq::Middleware::MultiTenant::Server' class='collapsed even'><div class='item' style='padding-left:45px'><span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Server.html" title="Sidekiq::Middleware::MultiTenant::Server (class)">Server</a></span> &lt; Object<small class='search_info'>Sidekiq::Middleware::MultiTenant</small></div></li></ul></li>
-
-      </ul>
-    </div>
-  </body>
-</html>
diff --git a/docs/source/_static/api-reference/css/common.css b/docs/source/_static/api-reference/css/common.css
deleted file mode 100644
index cf25c45..0000000
--- a/docs/source/_static/api-reference/css/common.css
+++ /dev/null
@@ -1 +0,0 @@
-/* Override this file with custom rules */
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/css/full_list.css b/docs/source/_static/api-reference/css/full_list.css
deleted file mode 100644
index fa35982..0000000
--- a/docs/source/_static/api-reference/css/full_list.css
+++ /dev/null
@@ -1,58 +0,0 @@
-body {
-  margin: 0;
-  font-family: "Lucida Sans", "Lucida Grande", Verdana, Arial, sans-serif;
-  font-size: 13px;
-  height: 101%;
-  overflow-x: hidden;
-  background: #fafafa;
-}
-
-h1 { padding: 12px 10px; padding-bottom: 0; margin: 0; font-size: 1.4em; }
-.clear { clear: both; }
-.fixed_header { position: fixed; background: #fff; width: 100%; padding-bottom: 10px; margin-top: 0; top: 0; z-index: 9999; height: 70px; }
-#search { position: absolute; right: 5px; top: 9px; padding-left: 24px; }
-#content.insearch #search, #content.insearch #noresults { background: url(data:image/gif;base64,R0lGODlhEAAQAPYAAP///wAAAPr6+pKSkoiIiO7u7sjIyNjY2J6engAAAI6OjsbGxjIyMlJSUuzs7KamppSUlPLy8oKCghwcHLKysqSkpJqamvT09Pj4+KioqM7OzkRERAwMDGBgYN7e3ujo6Ly8vCoqKjY2NkZGRtTU1MTExDw8PE5OTj4+PkhISNDQ0MrKylpaWrS0tOrq6nBwcKysrLi4uLq6ul5eXlxcXGJiYoaGhuDg4H5+fvz8/KKiohgYGCwsLFZWVgQEBFBQUMzMzDg4OFhYWBoaGvDw8NbW1pycnOLi4ubm5kBAQKqqqiQkJCAgIK6urnJyckpKSjQ0NGpqatLS0sDAwCYmJnx8fEJCQlRUVAoKCggICLCwsOTk5ExMTPb29ra2tmZmZmhoaNzc3KCgoBISEiIiIgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCAAAACwAAAAAEAAQAAAHaIAAgoMgIiYlg4kACxIaACEJCSiKggYMCRselwkpghGJBJEcFgsjJyoAGBmfggcNEx0flBiKDhQFlIoCCA+5lAORFb4AJIihCRbDxQAFChAXw9HSqb60iREZ1omqrIPdJCTe0SWI09GBACH5BAkIAAAALAAAAAAQABAAAAdrgACCgwc0NTeDiYozCQkvOTo9GTmDKy8aFy+NOBA7CTswgywJDTIuEjYFIY0JNYMtKTEFiRU8Pjwygy4ws4owPyCKwsMAJSTEgiQlgsbIAMrO0dKDGMTViREZ14kYGRGK38nHguHEJcvTyIEAIfkECQgAAAAsAAAAABAAEAAAB2iAAIKDAggPg4iJAAMJCRUAJRIqiRGCBI0WQEEJJkWDERkYAAUKEBc4Po1GiKKJHkJDNEeKig4URLS0ICImJZAkuQAhjSi/wQyNKcGDCyMnk8u5rYrTgqDVghgZlYjcACTA1sslvtHRgQAh+QQJCAAAACwAAAAAEAAQAAAHZ4AAgoOEhYaCJSWHgxGDJCQARAtOUoQRGRiFD0kJUYWZhUhKT1OLhR8wBaaFBzQ1NwAlkIszCQkvsbOHL7Y4q4IuEjaqq0ZQD5+GEEsJTDCMmIUhtgk1lo6QFUwJVDKLiYJNUd6/hoEAIfkECQgAAAAsAAAAABAAEAAAB2iAAIKDhIWGgiUlh4MRgyQkjIURGRiGGBmNhJWHm4uen4ICCA+IkIsDCQkVACWmhwSpFqAABQoQF6ALTkWFnYMrVlhWvIKTlSAiJiVVPqlGhJkhqShHV1lCW4cMqSkAR1ofiwsjJyqGgQAh+QQJCAAAACwAAAAAEAAQAAAHZ4AAgoOEhYaCJSWHgxGDJCSMhREZGIYYGY2ElYebi56fhyWQniSKAKKfpaCLFlAPhl0gXYNGEwkhGYREUywag1wJwSkHNDU3D0kJYIMZQwk8MjPBLx9eXwuETVEyAC/BOKsuEjYFhoEAIfkECQgAAAAsAAAAABAAEAAAB2eAAIKDhIWGgiUlh4MRgyQkjIURGRiGGBmNhJWHm4ueICImip6CIQkJKJ4kigynKaqKCyMnKqSEK05StgAGQRxPYZaENqccFgIID4KXmQBhXFkzDgOnFYLNgltaSAAEpxa7BQoQF4aBACH5BAkIAAAALAAAAAAQABAAAAdogACCg4SFggJiPUqCJSWGgkZjCUwZACQkgxGEXAmdT4UYGZqCGWQ+IjKGGIUwPzGPhAc0NTewhDOdL7Ykji+dOLuOLhI2BbaFETICx4MlQitdqoUsCQ2vhKGjglNfU0SWmILaj43M5oEAOwAAAAAAAAAAAA==) no-repeat center left; }
-#full_list { padding: 0; list-style: none; margin-left: 0; margin-top: 80px; font-size: 1.1em; }
-#full_list ul { padding: 0; }
-#full_list li { padding: 0; margin: 0; list-style: none; }
-#full_list li .item { padding: 5px 5px 5px 12px; }
-#noresults { padding: 7px 12px; background: #fff; }
-#content.insearch #noresults { margin-left: 7px; }
-li.collapsed ul { display: none; }
-li a.toggle { cursor: default; position: relative; left: -5px; top: 4px; text-indent: -999px; width: 10px; height: 9px; margin-left: -10px; display: block; float: left; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK8AAACvABQqw0mAAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTM5jWRgMAAAAVdEVYdENyZWF0aW9uIFRpbWUAMy8xNC8wOeNZPpQAAAE2SURBVDiNrZTBccIwEEXfelIAHUA6CZ24BGaWO+FuzZAK4k6gg5QAdGAq+Bxs2Yqx7BzyL7Llp/VfzZeQhCTc/ezuGzKKnKSzpCxXJM8fwNXda3df5RZETlIt6YUzSQDs93sl8w3wBZxCCE10GM1OcWbWjB2mWgEH4Mfdyxm3PSepBHibgQE2wLe7r4HjEidpnXMYdQPKEMJcsZ4zs2POYQOcaPfwMVOo58zsAdMt18BuoVDPxUJRacELbXv3hUIX2vYmOUvi8C8ydz/ThjXrqKqqLbDIAdsCKBd+Wo7GWa7o9qzOQHVVVXeAbs+yHHCH4aTsaCOQqunmUy1yBUAXkdMIfMlgF5EXLo2OpV/c/Up7jG4hhHcYLgWzAZXUc2b2ixsfvc/RmNNfOXD3Q/oeL9axJE1yT9IOoUu6MGUkAAAAAElFTkSuQmCC) no-repeat bottom left; }
-li.collapsed a.toggle { opacity: 0.5; cursor: default; background-position: top left; }
-li { color: #888; cursor: pointer; }
-li.deprecated { text-decoration: line-through; font-style: italic; }
-li.odd { background: #f0f0f0; }
-li.even { background: #fafafa; }
-.item:hover { background: #ddd; }
-li small:before { content: "("; }
-li small:after { content: ")"; }
-li small.search_info { display: none; }
-a, a:visited { text-decoration: none; color: #05a; }
-li.clicked > .item { background: #05a; color: #ccc; }
-li.clicked > .item a, li.clicked > .item a:visited { color: #eee; }
-li.clicked > .item a.toggle { opacity: 0.5; background-position: bottom right; }
-li.collapsed.clicked a.toggle { background-position: top right; }
-#search input { border: 1px solid #bbb; border-radius: 3px; }
-#full_list_nav { margin-left: 10px; font-size: 0.9em; display: block; color: #aaa; }
-#full_list_nav a, #nav a:visited { color: #358; }
-#full_list_nav a:hover { background: transparent; color: #5af; }
-#full_list_nav span:after { content: ' | '; }
-#full_list_nav span:last-child:after { content: ''; }
-
-#content h1 { margin-top: 0; }
-li { white-space: nowrap; cursor: normal; }
-li small { display: block; font-size: 0.8em; }
-li small:before { content: ""; }
-li small:after { content: ""; }
-li small.search_info { display: none; }
-#search { width: 170px; position: static; margin: 3px; margin-left: 10px; font-size: 0.9em; color: #888; padding-left: 0; padding-right: 24px; }
-#content.insearch #search { background-position: center right; }
-#search input { width: 110px; }
-
-#full_list.insearch ul { display: block; }
-#full_list.insearch .item { display: none; }
-#full_list.insearch .found { display: block; padding-left: 11px !important; }
-#full_list.insearch li a.toggle { display: none; }
-#full_list.insearch li small.search_info { display: block; }
diff --git a/docs/source/_static/api-reference/css/style.css b/docs/source/_static/api-reference/css/style.css
deleted file mode 100644
index eb0dbc8..0000000
--- a/docs/source/_static/api-reference/css/style.css
+++ /dev/null
@@ -1,497 +0,0 @@
-html {
-  width: 100%;
-  height: 100%;
-}
-body {
-  font-family: "Lucida Sans", "Lucida Grande", Verdana, Arial, sans-serif;
-  font-size: 13px;
-  width: 100%;
-  margin: 0;
-  padding: 0;
-  display: flex;
-  display: -webkit-flex;
-  display: -ms-flexbox;
-}
-
-#nav {
-  position: relative;
-  width: 100%;
-  height: 100%;
-  border: 0;
-  border-right: 1px dotted #eee;
-  overflow: auto;
-}
-.nav_wrap {
-  margin: 0;
-  padding: 0;
-  width: 20%;
-  height: 100%;
-  position: relative;
-  display: flex;
-  display: -webkit-flex;
-  display: -ms-flexbox;
-  flex-shrink: 0;
-  -webkit-flex-shrink: 0;
-  -ms-flex: 1 0;
-}
-#resizer {
-  position: absolute;
-  right: -5px;
-  top: 0;
-  width: 10px;
-  height: 100%;
-  cursor: col-resize;
-  z-index: 9999;
-}
-#main {
-  flex: 5 1;
-  -webkit-flex: 5 1;
-  -ms-flex: 5 1;
-  outline: none;
-  position: relative;
-  background: #fff;
-  padding: 1.2em;
-  padding-top: 0.2em;
-  box-sizing: border-box;
-}
-
-@media (max-width: 920px) {
-  .nav_wrap { width: 100%; top: 0; right: 0; overflow: visible; position: absolute; }
-  #resizer { display: none; }
-  #nav {
-    z-index: 9999;
-    background: #fff;
-    display: none;
-    position: absolute;
-    top: 40px;
-    right: 12px;
-    width: 500px;
-    max-width: 80%;
-    height: 80%;
-    overflow-y: scroll;
-    border: 1px solid #999;
-    border-collapse: collapse;
-    box-shadow: -7px 5px 25px #aaa;
-    border-radius: 2px;
-  }
-}
-
-@media (min-width: 920px) {
-  body { height: 100%; overflow: hidden; }
-  #main { height: 100%; overflow: auto; }
-  #search { display: none; }
-}
-
-#main img { max-width: 100%; }
-h1 { font-size: 25px; margin: 1em 0 0.5em; padding-top: 4px; border-top: 1px dotted #d5d5d5; }
-h1.noborder { border-top: 0px; margin-top: 0; padding-top: 4px; }
-h1.title { margin-bottom: 10px; }
-h1.alphaindex { margin-top: 0; font-size: 22px; }
-h2 {
-  padding: 0;
-  padding-bottom: 3px;
-  border-bottom: 1px #aaa solid;
-  font-size: 1.4em;
-  margin: 1.8em 0 0.5em;
-  position: relative;
-}
-h2 small { font-weight: normal; font-size: 0.7em; display: inline; position: absolute; right: 0; }
-h2 small a {
-  display: block;
-  height: 20px;
-  border: 1px solid #aaa;
-  border-bottom: 0;
-  border-top-left-radius: 5px;
-  background: #f8f8f8;
-  position: relative;
-  padding: 2px 7px;
-}
-.clear { clear: both; }
-.inline { display: inline; }
-.inline p:first-child { display: inline; }
-.docstring, .tags, #filecontents { font-size: 15px; line-height: 1.5145em; }
-.docstring p > code, .docstring p > tt, .tags p > code, .tags p > tt {
-  color: #c7254e; background: #f9f2f4; padding: 2px 4px; font-size: 1em;
-  border-radius: 4px;
-}
-.docstring h1, .docstring h2, .docstring h3, .docstring h4 { padding: 0; border: 0; border-bottom: 1px dotted #bbb; }
-.docstring h1 { font-size: 1.2em; }
-.docstring h2 { font-size: 1.1em; }
-.docstring h3, .docstring h4 { font-size: 1em; border-bottom: 0; padding-top: 10px; }
-.summary_desc .object_link a, .docstring .object_link a {
-  font-family: monospace; font-size: 1.05em;
-  color: #05a; background: #EDF4FA; padding: 2px 4px; font-size: 1em;
-  border-radius: 4px;
-}
-.rdoc-term { padding-right: 25px; font-weight: bold; }
-.rdoc-list p { margin: 0; padding: 0; margin-bottom: 4px; }
-.summary_desc pre.code .object_link a, .docstring pre.code .object_link a {
-  padding: 0px; background: inherit; color: inherit; border-radius: inherit;
-}
-
-/* style for <table> */
-#filecontents table, .docstring table { border-collapse: collapse; }
-#filecontents table th, #filecontents table td,
-.docstring table th, .docstring table td { border: 1px solid #ccc; padding: 8px; padding-right: 17px; }
-#filecontents table tr:nth-child(odd),
-.docstring table tr:nth-child(odd) { background: #eee; }
-#filecontents table tr:nth-child(even),
-.docstring table tr:nth-child(even) { background: #fff; }
-#filecontents table th, .docstring table th { background: #fff; }
-
-/* style for <ul> */
-#filecontents li > p, .docstring li > p { margin: 0px; }
-#filecontents ul, .docstring ul { padding-left: 20px; }
-/* style for <dl> */
-#filecontents dl, .docstring dl { border: 1px solid #ccc; }
-#filecontents dt, .docstring dt { background: #ddd; font-weight: bold; padding: 3px 5px; }
-#filecontents dd, .docstring dd { padding: 5px 0px; margin-left: 18px; }
-#filecontents dd > p, .docstring dd > p { margin: 0px; }
-
-.note {
-  color: #222;
-  margin: 20px 0;
-  padding: 10px;
-  border: 1px solid #eee;
-  border-radius: 3px;
-  display: block;
-}
-.docstring .note {
-  border-left-color: #ccc;
-  border-left-width: 5px;
-}
-.note.todo { background: #ffffc5; border-color: #ececaa; }
-.note.returns_void { background: #efefef; }
-.note.deprecated { background: #ffe5e5; border-color: #e9dada; }
-.note.title.deprecated { background: #ffe5e5; border-color: #e9dada; }
-.note.private { background: #ffffc5; border-color: #ececaa; }
-.note.title { padding: 3px 6px; font-size: 0.9em; font-family: "Lucida Sans", "Lucida Grande", Verdana, Arial, sans-serif; display: inline; }
-.summary_signature + .note.title { margin-left: 7px; }
-h1 .note.title { font-size: 0.5em; font-weight: normal; padding: 3px 5px; position: relative; top: -3px; text-transform: capitalize; }
-.note.title { background: #efefef; }
-.note.title.constructor { color: #fff; background: #6a98d6; border-color: #6689d6; }
-.note.title.writeonly { color: #fff; background: #45a638; border-color: #2da31d; }
-.note.title.readonly { color: #fff; background: #6a98d6; border-color: #6689d6; }
-.note.title.private { background: #d5d5d5; border-color: #c5c5c5; }
-.note.title.not_defined_here { background: transparent; border: none; font-style: italic; }
-.discussion .note { margin-top: 6px; }
-.discussion .note:first-child { margin-top: 0; }
-
-h3.inherited {
-  font-style: italic;
-  font-family: "Lucida Sans", "Lucida Grande", Verdana, Arial, sans-serif;
-  font-weight: normal;
-  padding: 0;
-  margin: 0;
-  margin-top: 12px;
-  margin-bottom: 3px;
-  font-size: 13px;
-}
-p.inherited {
-  padding: 0;
-  margin: 0;
-  margin-left: 25px;
-}
-
-.box_info dl {
-  margin: 0;
-  border: 0;
-  width: 100%;
-  font-size: 1em;
-  display: flex;
-  display: -webkit-flex;
-  display: -ms-flexbox;
-}
-.box_info dl dt {
-  flex-shrink: 0;
-  -webkit-flex-shrink: 1;
-  -ms-flex-shrink: 1;
-  width: 100px;
-  text-align: right;
-  font-weight: bold;
-  border: 1px solid #aaa;
-  border-width: 1px 0px 0px 1px;
-  padding: 6px 0;
-  padding-right: 10px;
-}
-.box_info dl dd {
-  flex-grow: 1;
-  -webkit-flex-grow: 1;
-  -ms-flex: 1;
-  max-width: 420px;
-  padding: 6px 0;
-  padding-right: 20px;
-  border: 1px solid #aaa;
-  border-width: 1px 1px 0 0;
-  overflow: hidden;
-  position: relative;
-}
-.box_info dl:last-child > * {
-  border-bottom: 1px solid #aaa;
-}
-.box_info dl:nth-child(odd) > * { background: #eee; }
-.box_info dl:nth-child(even) > * { background: #fff; }
-.box_info dl > * { margin: 0; }
-
-ul.toplevel { list-style: none; padding-left: 0; font-size: 1.1em; }
-.index_inline_list { padding-left: 0; font-size: 1.1em; }
-
-.index_inline_list li {
-  list-style: none;
-  display: inline-block;
-  padding: 0 12px;
-  line-height: 30px;
-  margin-bottom: 5px;
-}
-
-dl.constants { margin-left: 10px; }
-dl.constants dt { font-weight: bold; font-size: 1.1em; margin-bottom: 5px; }
-dl.constants.compact dt { display: inline-block; font-weight: normal }
-dl.constants dd { width: 75%; white-space: pre; font-family: monospace; margin-bottom: 18px; }
-dl.constants .docstring .note:first-child { margin-top: 5px; }
-
-.summary_desc {
-  margin-left: 32px;
-  display: block;
-  font-family: sans-serif;
-  font-size: 1.1em;
-  margin-top: 8px;
-  line-height: 1.5145em;
-  margin-bottom: 0.8em;
-}
-.summary_desc tt { font-size: 0.9em; }
-dl.constants .note { padding: 2px 6px; padding-right: 12px; margin-top: 6px; }
-dl.constants .docstring { margin-left: 32px; font-size: 0.9em; font-weight: normal; }
-dl.constants .tags { padding-left: 32px; font-size: 0.9em; line-height: 0.8em; }
-dl.constants .discussion *:first-child { margin-top: 0; }
-dl.constants .discussion *:last-child { margin-bottom: 0; }
-
-.method_details { border-top: 1px dotted #ccc; margin-top: 25px; padding-top: 0; }
-.method_details.first { border: 0; margin-top: 5px; }
-.method_details.first h3.signature { margin-top: 1em; }
-p.signature, h3.signature {
-  font-size: 1.1em; font-weight: normal; font-family: Monaco, Consolas, Courier, monospace;
-  padding: 6px 10px; margin-top: 1em;
-  background: #E8F4FF; border: 1px solid #d8d8e5; border-radius: 5px;
-}
-p.signature tt,
-h3.signature tt { font-family: Monaco, Consolas, Courier, monospace; }
-p.signature .overload,
-h3.signature .overload { display: block; }
-p.signature .extras,
-h3.signature .extras { font-weight: normal; font-family: sans-serif; color: #444; font-size: 1em; }
-p.signature .not_defined_here,
-h3.signature .not_defined_here,
-p.signature .aliases,
-h3.signature .aliases { display: block; font-weight: normal; font-size: 0.9em; font-family: sans-serif; margin-top: 0px; color: #555; }
-p.signature .aliases .names,
-h3.signature .aliases .names { font-family: Monaco, Consolas, Courier, monospace; font-weight: bold; color: #000; font-size: 1.2em; }
-
-.tags .tag_title { font-size: 1.05em; margin-bottom: 0; font-weight: bold; }
-.tags .tag_title tt { color: initial; padding: initial; background: initial; }
-.tags ul { margin-top: 5px; padding-left: 30px; list-style: square; }
-.tags ul li { margin-bottom: 3px; }
-.tags ul .name { font-family: monospace; font-weight: bold; }
-.tags ul .note { padding: 3px 6px; }
-.tags { margin-bottom: 12px; }
-
-.tags .examples .tag_title { margin-bottom: 10px; font-weight: bold; }
-.tags .examples .inline p { padding: 0; margin: 0; font-weight: bold; font-size: 1em; }
-.tags .examples .inline p:before { content: ""; font-size: 1em; margin-right: 5px; }
-
-.tags .overload .overload_item { list-style: none; margin-bottom: 25px; }
-.tags .overload .overload_item .signature {
-  padding: 2px 8px;
-  background: #F1F8FF; border: 1px solid #d8d8e5; border-radius: 3px;
-}
-.tags .overload .signature { margin-left: -15px; font-family: monospace; display: block; font-size: 1.1em; }
-.tags .overload .docstring { margin-top: 15px; }
-
-.defines { display: none; }
-
-#method_missing_details .notice.this { position: relative; top: -8px; color: #888; padding: 0; margin: 0; }
-
-.showSource { font-size: 0.9em; }
-.showSource a, .showSource a:visited { text-decoration: none; color: #666; }
-
-#content a, #content a:visited { text-decoration: none; color: #05a; }
-#content a:hover { background: #ffffa5; }
-
-ul.summary {
-  list-style: none;
-  font-family: monospace;
-  font-size: 1em;
-  line-height: 1.5em;
-  padding-left: 0px;
-}
-ul.summary a, ul.summary a:visited {
-  text-decoration: none; font-size: 1.1em;
-}
-ul.summary li { margin-bottom: 5px; }
-.summary_signature { padding: 4px 8px; background: #f8f8f8; border: 1px solid #f0f0f0; border-radius: 5px; }
-.summary_signature:hover { background: #CFEBFF; border-color: #A4CCDA; cursor: pointer; }
-.summary_signature.deprecated { background: #ffe5e5; border-color: #e9dada; }
-ul.summary.compact li { display: inline-block; margin: 0px 5px 0px 0px; line-height: 2.6em;}
-ul.summary.compact .summary_signature { padding: 5px 7px; padding-right: 4px; }
-#content .summary_signature:hover a,
-#content .summary_signature:hover a:visited {
-  background: transparent;
-  color: #049;
-}
-
-p.inherited a { font-family: monospace; font-size: 0.9em; }
-p.inherited { word-spacing: 5px; font-size: 1.2em; }
-
-p.children { font-size: 1.2em; }
-p.children a { font-size: 0.9em; }
-p.children strong { font-size: 0.8em; }
-p.children strong.modules { padding-left: 5px; }
-
-ul.fullTree { display: none; padding-left: 0; list-style: none; margin-left: 0; margin-bottom: 10px; }
-ul.fullTree ul { margin-left: 0; padding-left: 0; list-style: none; }
-ul.fullTree li { text-align: center; padding-top: 18px; padding-bottom: 12px; background: url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAHtJREFUeNqMzrEJAkEURdGzuhgZbSoYWcAWoBVsB4JgZAGmphsZCZYzTQgWNCYrDN9RvMmHx+X916SUBFbo8CzD1idXrLErw1mQttgXtyrOcQ/Ny5p4Qh+2XqLYYazsPWNTiuMkRxa4vcV+evuNAUOLIx5+c2hyzv7hNQC67Q+/HHmlEwAAAABJRU5ErkJggg==) no-repeat top center; }
-ul.fullTree li:first-child { padding-top: 0; background: transparent; }
-ul.fullTree li:last-child { padding-bottom: 0; }
-.showAll ul.fullTree { display: block; }
-.showAll .inheritName { display: none; }
-
-#search { position: absolute; right: 12px; top: 0px; z-index: 9000; }
-#search a {
-  display: block; float: left;
-  padding: 4px 8px; text-decoration: none; color: #05a; fill: #05a;
-  border: 1px solid #d8d8e5;
-  border-bottom-left-radius: 3px; border-bottom-right-radius: 3px;
-  background: #F1F8FF;
-  box-shadow: -1px 1px 3px #ddd;
-}
-#search a:hover { background: #f5faff; color: #06b; fill: #06b; }
-#search a.active {
-  background: #568; padding-bottom: 20px; color: #fff; fill: #fff;
-  border: 1px solid #457;
-  border-top-left-radius: 5px; border-top-right-radius: 5px;
-}
-#search a.inactive { color: #999; fill: #999; }
-.inheritanceTree, .toggleDefines {
-  float: right;
-  border-left: 1px solid #aaa;
-  position: absolute; top: 0; right: 0;
-  height: 100%;
-  background: #f6f6f6;
-  padding: 5px;
-  min-width: 55px;
-  text-align: center;
-}
-
-#menu { font-size: 1.3em; color: #bbb; }
-#menu .title, #menu a { font-size: 0.7em; }
-#menu .title a { font-size: 1em; }
-#menu .title { color: #555; }
-#menu a, #menu a:visited { color: #333; text-decoration: none; border-bottom: 1px dotted #bbd; }
-#menu a:hover { color: #05a; }
-
-#footer { margin-top: 15px; border-top: 1px solid #ccc; text-align: center; padding: 7px 0; color: #999; }
-#footer a, #footer a:visited { color: #444; text-decoration: none; border-bottom: 1px dotted #bbd; }
-#footer a:hover { color: #05a; }
-
-#listing ul.alpha { font-size: 1.1em; }
-#listing ul.alpha { margin: 0; padding: 0; padding-bottom: 10px; list-style: none; }
-#listing ul.alpha li.letter { font-size: 1.4em; padding-bottom: 10px; }
-#listing ul.alpha ul { margin: 0; padding-left: 15px; }
-#listing ul small { color: #666; font-size: 0.7em; }
-
-li.r1 { background: #f0f0f0; }
-li.r2 { background: #fafafa; }
-
-#content ul.summary li.deprecated .summary_signature a,
-#content ul.summary li.deprecated .summary_signature a:visited { text-decoration: line-through; font-style: italic; }
-
-#toc {
-  position: relative;
-  float: right;
-  overflow-x: auto;
-  right: -3px;
-  margin-left: 20px;
-  margin-bottom: 20px;
-  padding: 20px; padding-right: 30px;
-  max-width: 300px;
-  z-index: 5000;
-  background: #fefefe;
-  border: 1px solid #ddd;
-  box-shadow: -2px 2px 6px #bbb;
-}
-#toc .title { margin: 0; }
-#toc ol { padding-left: 1.8em; }
-#toc li { font-size: 1.1em; line-height: 1.7em; }
-#toc > ol > li { font-size: 1.1em; font-weight: bold; }
-#toc ol > li > ol { font-size: 0.9em; }
-#toc ol ol > li > ol { padding-left: 2.3em; }
-#toc ol + li { margin-top: 0.3em; }
-#toc.hidden { padding: 10px; background: #fefefe; box-shadow: none; }
-#toc.hidden:hover { background: #fafafa; }
-#filecontents h1 + #toc.nofloat { margin-top: 0; }
-@media (max-width: 560px) {
-  #toc {
-    margin-left: 0;
-    margin-top: 16px;
-    float: none;
-    max-width: none;
-  }
-}
-
-/* syntax highlighting */
-.source_code { display: none; padding: 3px 8px; border-left: 8px solid #ddd; margin-top: 5px; }
-#filecontents pre.code, .docstring pre.code, .source_code pre { font-family: monospace; }
-#filecontents pre.code, .docstring pre.code { display: block; }
-.source_code .lines { padding-right: 12px; color: #555; text-align: right; }
-#filecontents pre.code, .docstring pre.code,
-.tags pre.example {
-  padding: 9px 14px;
-  margin-top: 4px;
-  border: 1px solid #e1e1e8;
-  background: #f7f7f9;
-  border-radius: 4px;
-  font-size: 1em;
-  overflow-x: auto;
-  line-height: 1.2em;
-}
-pre.code { color: #000; tab-size: 2; }
-pre.code .info.file { color: #555; }
-pre.code .val { color: #036A07; }
-pre.code .tstring_content,
-pre.code .heredoc_beg, pre.code .heredoc_end,
-pre.code .qwords_beg, pre.code .qwords_end, pre.code .qwords_sep,
-pre.code .words_beg, pre.code .words_end, pre.code .words_sep,
-pre.code .qsymbols_beg, pre.code .qsymbols_end, pre.code .qsymbols_sep,
-pre.code .symbols_beg, pre.code .symbols_end, pre.code .symbols_sep,
-pre.code .tstring, pre.code .dstring { color: #036A07; }
-pre.code .fid, pre.code .rubyid_new, pre.code .rubyid_to_s,
-pre.code .rubyid_to_sym, pre.code .rubyid_to_f,
-pre.code .dot + pre.code .id,
-pre.code .rubyid_to_i pre.code .rubyid_each { color: #0085FF; }
-pre.code .comment { color: #0066FF; }
-pre.code .const, pre.code .constant { color: #585CF6; }
-pre.code .label,
-pre.code .symbol { color: #C5060B; }
-pre.code .kw,
-pre.code .rubyid_require,
-pre.code .rubyid_extend,
-pre.code .rubyid_include { color: #0000FF; }
-pre.code .ivar { color: #318495; }
-pre.code .gvar,
-pre.code .rubyid_backref,
-pre.code .rubyid_nth_ref { color: #6D79DE; }
-pre.code .regexp, .dregexp { color: #036A07; }
-pre.code a { border-bottom: 1px dotted #bbf; }
-/* inline code */
-*:not(pre) > code {
-	padding: 1px 3px 1px 3px;
-	border: 1px solid #E1E1E8;
-	background: #F7F7F9;
-	border-radius: 4px;
-}
-
-/* Color fix for links */
-#content .summary_desc pre.code .id > .object_link a, /* identifier */
-#content .docstring pre.code .id > .object_link a { color: #0085FF; }
-#content .summary_desc pre.code .const > .object_link a, /* constant */
-#content .docstring pre.code .const > .object_link a { color: #585CF6; }
diff --git a/docs/source/_static/api-reference/file.README.html b/docs/source/_static/api-reference/file.README.html
deleted file mode 100644
index 222829a..0000000
--- a/docs/source/_static/api-reference/file.README.html
+++ /dev/null
@@ -1,167 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="UTF-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  File: README
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "README";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="file_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index</a> &raquo; 
-    <span class="title">File: README</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><div id='filecontents'>
-<h1 id="label-activerecord-multi-tenant++rdoc-image-3Ahttps-3A-2F-2Fimg.shields.io-2Fgem-2Fv-2Factiverecord-multi-tenant.svg++rdoc-image-3Ahttps-3A-2F-2Fimg.shields.io-2Fgem-2Fdt-2Factiverecord-multi-tenant.svg">activerecord-multi-tenant <a href="https://rubygems.org/gems/activerecord-multi-tenant"> rdoc-image:https://img.shields.io/gem/v/activerecord-multi-tenant.svg</a> <a href="https://rubygems.org/gems/activerecord-multi-tenant"> rdoc-image:https://img.shields.io/gem/dt/activerecord-multi-tenant.svg</a></h1>
-
-<p>Introduction Post: <a href="https://www.citusdata.com/blog/2017/01/05/easily-scale-out-multi-tenant-apps">www.citusdata.com/blog/2017/01/05/easily-scale-out-multi-tenant-apps</a>/</p>
-
-<p>ActiveRecord/Rails integration for multi-tenant databases, in particular the open-source <a href="https://github.com/citusdata/citus">Citus</a> extension for PostgreSQL.</p>
-
-<p>Enables easy scale-out by adding the tenant context to your queries, enabling the database (e.g. Citus) to efficiently route queries to the right database node.</p>
-
-<h2 id="label-Installation">Installation</h2>
-
-<p>Add the following to your Gemfile:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>activerecord-multi-tenant</span><span class='tstring_end'>&#39;</span></span>
-</code></pre>
-
-<h2 id="label-Supported+Rails+versions">Supported Rails versions</h2>
-
-<p>All Ruby on Rails versions starting with 6.0 or newer (up to 7.0) are supported.</p>
-
-<p>This gem only supports ActiveRecord (the Rails default ORM), and not alternative ORMs like Sequel.</p>
-
-<h2 id="label-Usage">Usage</h2>
-
-<p>It is required that you add <code>multi_tenant</code> definitions to your model in order to have full support for Citus, in particular when updating records.</p>
-
-<p>In the example of an analytics application, sharding on <code>customer_id</code>, annotate your models like this:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>PageView</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_multi_tenant'>multi_tenant</span> <span class='symbol'>:customer</span>
-  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbol'>:site</span>
-
-  <span class='comment'># ...
-</span><span class='kw'>end</span>
-
-<span class='kw'>class</span> <span class='const'>Site</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_multi_tenant'>multi_tenant</span> <span class='symbol'>:customer</span>
-  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:page_views</span>
-
-  <span class='comment'># ...
-</span><span class='kw'>end</span>
-</code></pre>
-
-<p>and then wrap all code that runs queries/modifications in blocks like this:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_customer_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-<span class='comment'># ...
-</span><span class='const'><span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_customer'>customer</span><span class='rparen'>)</span> <span class='kw'>do</span>
-  <span class='id identifier rubyid_site'>site</span> <span class='op'>=</span> <span class='const'>Site</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:site_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_update!'>update!</span> <span class='label'>last_accessed_at:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
-  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_page_views'>page_views</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
-<span class='kw'>end</span>
-</code></pre>
-
-<p>Inside controllers you can use a before_action together with set_current_tenant, to set the tenant for the current request:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_set_current_tenant_through_filter'>set_current_tenant_through_filter</span> <span class='comment'># Required to opt into this behavior
-</span>  <span class='id identifier rubyid_before_action'>before_action</span> <span class='symbol'>:set_customer_as_tenant</span>
-
-  <span class='kw'>def</span> <span class='id identifier rubyid_set_customer_as_tenant'>set_customer_as_tenant</span>
-    <span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_customer_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_set_current_tenant'>set_current_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_customer'>customer</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span>
-</code></pre>
-
-<h2 id="label-Rolling+out+activerecord-multi-tenant+for+your+application+-28write-only+mode-29">Rolling out activerecord-multi-tenant for your application (write-only mode)</h2>
-
-<p>The library relies on tenant_id to be present and NOT NULL for all rows. However, its often useful to have the library set the tenant_id for new records, and then backfilling tenant_id for existing records as a background task.</p>
-
-<p>To support this, there is a write-only mode, in which tenant_id is not included in queries, but only set for new records. Include the following in an initializer to enable it:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_enable_write_only_mode'><span class='object_link'><a href="MultiTenant.html#enable_write_only_mode-class_method" title="MultiTenant.enable_write_only_mode (method)">enable_write_only_mode</a></span></span>
-</code></pre>
-
-<p>Once you are ready to enforce tenancy, make your tenant_id column NOT NULL and simply remove that line.</p>
-
-<h2 id="label-Frequently+Asked+Questions">Frequently Asked Questions</h2>
-<ul><li>
-<p><strong>What if I have a table that doesnt relate to my tenant?</strong> (e.g. templates that are the same in every account)</p>
-</li></ul>
-
-<p>We recommend not using activerecord-multi-tenant on these tables. In case only some records in a table are not associated to a tenant (i.e. your templates are in the same table as actual objects), we recommend setting the tenant_id to 0, and then using MultiTenant.with(0) to access these objects.</p>
-<ul><li>
-<p><strong>What if my tenant model is not defined in my application?</strong></p>
-</li></ul>
-
-<p>The tenant model does not have to be defined. Use the gem as if the model was present. <code>MultiTenant.with</code> accepts either a tenant id or model instance.</p>
-
-<h2 id="label-Credits">Credits</h2>
-
-<p>This gem was initially based on <a href="https://github.com/ErwinM/acts_as_tenant">acts_as_tenant</a>, and still shares some code. We thank the authors for their efforts.</p>
-
-<h2 id="label-License">License</h2>
-
-<p>Copyright  2018, Citus Data Inc.<br> Licensed under the MIT license, see LICENSE file for details.</p>
-</div></div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/file_list.html b/docs/source/_static/api-reference/file_list.html
deleted file mode 100644
index 2b6df40..0000000
--- a/docs/source/_static/api-reference/file_list.html
+++ /dev/null
@@ -1,56 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <meta charset="utf-8" />
-    
-      <link rel="stylesheet" href="css/full_list.css" type="text/css" media="screen" />
-    
-      <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" />
-    
-
-    
-      <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-    
-      <script type="text/javascript" charset="utf-8" src="js/full_list.js"></script>
-    
-
-    <title>File List</title>
-    <base id="base_target" target="_parent" />
-  </head>
-  <body>
-    <div id="content">
-      <div class="fixed_header">
-        <h1 id="full_list_header">File List</h1>
-        <div id="full_list_nav">
-          
-            <span><a target="_self" href="class_list.html">
-              Classes
-            </a></span>
-          
-            <span><a target="_self" href="method_list.html">
-              Methods
-            </a></span>
-          
-            <span><a target="_self" href="file_list.html">
-              Files
-            </a></span>
-          
-        </div>
-
-        <div id="search">Search: <input type="text" /></div>
-      </div>
-
-      <ul id="full_list" class="file">
-        
-
-  <li id="object_README" class="odd">
-    <div class="item"><span class="object_link"><a href="index.html" title="README">README</a></span></div>
-  </li>
-  
-
-
-      </ul>
-    </div>
-  </body>
-</html>
diff --git a/docs/source/_static/api-reference/frames.html b/docs/source/_static/api-reference/frames.html
deleted file mode 100644
index 4f918f5..0000000
--- a/docs/source/_static/api-reference/frames.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<!DOCTYPE html>
-<html>
-<head>
-  <meta charset="utf-8">
-	<title>Documentation by YARD 0.9.34</title>
-</head>
-<script type="text/javascript">
-  var match = unescape(window.location.hash).match(/^#!(.+)/);
-  var name = match ? match[1] : 'index.html';
-  name = name.replace(/^(\w+):\/\//, '').replace(/^\/\//, '');
-  window.top.location = name;
-</script>
-<noscript>
-  <h1>Oops!</h1>
-  <h2>YARD requires JavaScript!</h2>
-</noscript>
-</html>
diff --git a/docs/source/_static/api-reference/index.html b/docs/source/_static/api-reference/index.html
deleted file mode 100644
index cf60c3a..0000000
--- a/docs/source/_static/api-reference/index.html
+++ /dev/null
@@ -1,167 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="UTF-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  File: README
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "README";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index</a> &raquo; 
-    <span class="title">File: README</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><div id='filecontents'>
-<h1 id="label-activerecord-multi-tenant++rdoc-image-3Ahttps-3A-2F-2Fimg.shields.io-2Fgem-2Fv-2Factiverecord-multi-tenant.svg++rdoc-image-3Ahttps-3A-2F-2Fimg.shields.io-2Fgem-2Fdt-2Factiverecord-multi-tenant.svg">activerecord-multi-tenant <a href="https://rubygems.org/gems/activerecord-multi-tenant"> rdoc-image:https://img.shields.io/gem/v/activerecord-multi-tenant.svg</a> <a href="https://rubygems.org/gems/activerecord-multi-tenant"> rdoc-image:https://img.shields.io/gem/dt/activerecord-multi-tenant.svg</a></h1>
-
-<p>Introduction Post: <a href="https://www.citusdata.com/blog/2017/01/05/easily-scale-out-multi-tenant-apps">www.citusdata.com/blog/2017/01/05/easily-scale-out-multi-tenant-apps</a>/</p>
-
-<p>ActiveRecord/Rails integration for multi-tenant databases, in particular the open-source <a href="https://github.com/citusdata/citus">Citus</a> extension for PostgreSQL.</p>
-
-<p>Enables easy scale-out by adding the tenant context to your queries, enabling the database (e.g. Citus) to efficiently route queries to the right database node.</p>
-
-<h2 id="label-Installation">Installation</h2>
-
-<p>Add the following to your Gemfile:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>activerecord-multi-tenant</span><span class='tstring_end'>&#39;</span></span>
-</code></pre>
-
-<h2 id="label-Supported+Rails+versions">Supported Rails versions</h2>
-
-<p>All Ruby on Rails versions starting with 6.0 or newer (up to 7.0) are supported.</p>
-
-<p>This gem only supports ActiveRecord (the Rails default ORM), and not alternative ORMs like Sequel.</p>
-
-<h2 id="label-Usage">Usage</h2>
-
-<p>It is required that you add <code>multi_tenant</code> definitions to your model in order to have full support for Citus, in particular when updating records.</p>
-
-<p>In the example of an analytics application, sharding on <code>customer_id</code>, annotate your models like this:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>PageView</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_multi_tenant'>multi_tenant</span> <span class='symbol'>:customer</span>
-  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbol'>:site</span>
-
-  <span class='comment'># ...
-</span><span class='kw'>end</span>
-
-<span class='kw'>class</span> <span class='const'>Site</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_multi_tenant'>multi_tenant</span> <span class='symbol'>:customer</span>
-  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:page_views</span>
-
-  <span class='comment'># ...
-</span><span class='kw'>end</span>
-</code></pre>
-
-<p>and then wrap all code that runs queries/modifications in blocks like this:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_customer_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-<span class='comment'># ...
-</span><span class='const'><span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with'><span class='object_link'><a href="MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_customer'>customer</span><span class='rparen'>)</span> <span class='kw'>do</span>
-  <span class='id identifier rubyid_site'>site</span> <span class='op'>=</span> <span class='const'>Site</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:site_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_update!'>update!</span> <span class='label'>last_accessed_at:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
-  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_page_views'>page_views</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
-<span class='kw'>end</span>
-</code></pre>
-
-<p>Inside controllers you can use a before_action together with set_current_tenant, to set the tenant for the current request:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span>
-  <span class='id identifier rubyid_set_current_tenant_through_filter'>set_current_tenant_through_filter</span> <span class='comment'># Required to opt into this behavior
-</span>  <span class='id identifier rubyid_before_action'>before_action</span> <span class='symbol'>:set_customer_as_tenant</span>
-
-  <span class='kw'>def</span> <span class='id identifier rubyid_set_customer_as_tenant'>set_customer_as_tenant</span>
-    <span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:current_customer_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
-    <span class='id identifier rubyid_set_current_tenant'>set_current_tenant</span><span class='lparen'>(</span><span class='id identifier rubyid_customer'>customer</span><span class='rparen'>)</span>
-  <span class='kw'>end</span>
-<span class='kw'>end</span>
-</code></pre>
-
-<h2 id="label-Rolling+out+activerecord-multi-tenant+for+your+application+-28write-only+mode-29">Rolling out activerecord-multi-tenant for your application (write-only mode)</h2>
-
-<p>The library relies on tenant_id to be present and NOT NULL for all rows. However, its often useful to have the library set the tenant_id for new records, and then backfilling tenant_id for existing records as a background task.</p>
-
-<p>To support this, there is a write-only mode, in which tenant_id is not included in queries, but only set for new records. Include the following in an initializer to enable it:</p>
-
-<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span></span><span class='period'>.</span><span class='id identifier rubyid_enable_write_only_mode'><span class='object_link'><a href="MultiTenant.html#enable_write_only_mode-class_method" title="MultiTenant.enable_write_only_mode (method)">enable_write_only_mode</a></span></span>
-</code></pre>
-
-<p>Once you are ready to enforce tenancy, make your tenant_id column NOT NULL and simply remove that line.</p>
-
-<h2 id="label-Frequently+Asked+Questions">Frequently Asked Questions</h2>
-<ul><li>
-<p><strong>What if I have a table that doesnt relate to my tenant?</strong> (e.g. templates that are the same in every account)</p>
-</li></ul>
-
-<p>We recommend not using activerecord-multi-tenant on these tables. In case only some records in a table are not associated to a tenant (i.e. your templates are in the same table as actual objects), we recommend setting the tenant_id to 0, and then using MultiTenant.with(0) to access these objects.</p>
-<ul><li>
-<p><strong>What if my tenant model is not defined in my application?</strong></p>
-</li></ul>
-
-<p>The tenant model does not have to be defined. Use the gem as if the model was present. <code>MultiTenant.with</code> accepts either a tenant id or model instance.</p>
-
-<h2 id="label-Credits">Credits</h2>
-
-<p>This gem was initially based on <a href="https://github.com/ErwinM/acts_as_tenant">acts_as_tenant</a>, and still shares some code. We thank the authors for their efforts.</p>
-
-<h2 id="label-License">License</h2>
-
-<p>Copyright  2018, Citus Data Inc.<br> Licensed under the MIT license, see LICENSE file for details.</p>
-</div></div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/js/app.js b/docs/source/_static/api-reference/js/app.js
deleted file mode 100644
index 8d067fe..0000000
--- a/docs/source/_static/api-reference/js/app.js
+++ /dev/null
@@ -1,314 +0,0 @@
-(function() {
-
-var localStorage = {}, sessionStorage = {};
-try { localStorage = window.localStorage; } catch (e) { }
-try { sessionStorage = window.sessionStorage; } catch (e) { }
-
-function createSourceLinks() {
-    $('.method_details_list .source_code').
-        before("<span class='showSource'>[<a href='#' class='toggleSource'>View source</a>]</span>");
-    $('.toggleSource').toggle(function() {
-       $(this).parent().nextAll('.source_code').slideDown(100);
-       $(this).text("Hide source");
-    },
-    function() {
-        $(this).parent().nextAll('.source_code').slideUp(100);
-        $(this).text("View source");
-    });
-}
-
-function createDefineLinks() {
-    var tHeight = 0;
-    $('.defines').after(" <a href='#' class='toggleDefines'>more...</a>");
-    $('.toggleDefines').toggle(function() {
-        tHeight = $(this).parent().prev().height();
-        $(this).prev().css('display', 'inline');
-        $(this).parent().prev().height($(this).parent().height());
-        $(this).text("(less)");
-    },
-    function() {
-        $(this).prev().hide();
-        $(this).parent().prev().height(tHeight);
-        $(this).text("more...");
-    });
-}
-
-function createFullTreeLinks() {
-    var tHeight = 0;
-    $('.inheritanceTree').toggle(function() {
-        tHeight = $(this).parent().prev().height();
-        $(this).parent().toggleClass('showAll');
-        $(this).text("(hide)");
-        $(this).parent().prev().height($(this).parent().height());
-    },
-    function() {
-        $(this).parent().toggleClass('showAll');
-        $(this).parent().prev().height(tHeight);
-        $(this).text("show all");
-    });
-}
-
-function searchFrameButtons() {
-  $('.full_list_link').click(function() {
-    toggleSearchFrame(this, $(this).attr('href'));
-    return false;
-  });
-  window.addEventListener('message', function(e) {
-    if (e.data === 'navEscape') {
-      $('#nav').slideUp(100);
-      $('#search a').removeClass('active inactive');
-      $(window).focus();
-    }
-  });
-
-  $(window).resize(function() {
-    if ($('#search:visible').length === 0) {
-      $('#nav').removeAttr('style');
-      $('#search a').removeClass('active inactive');
-      $(window).focus();
-    }
-  });
-}
-
-function toggleSearchFrame(id, link) {
-  var frame = $('#nav');
-  $('#search a').removeClass('active').addClass('inactive');
-  if (frame.attr('src') === link && frame.css('display') !== "none") {
-    frame.slideUp(100);
-    $('#search a').removeClass('active inactive');
-  }
-  else {
-    $(id).addClass('active').removeClass('inactive');
-    if (frame.attr('src') !== link) frame.attr('src', link);
-    frame.slideDown(100);
-  }
-}
-
-function linkSummaries() {
-  $('.summary_signature').click(function() {
-    document.location = $(this).find('a').attr('href');
-  });
-}
-
-function summaryToggle() {
-  $('.summary_toggle').click(function(e) {
-    e.preventDefault();
-    localStorage.summaryCollapsed = $(this).text();
-    $('.summary_toggle').each(function() {
-      $(this).text($(this).text() == "collapse" ? "expand" : "collapse");
-      var next = $(this).parent().parent().nextAll('ul.summary').first();
-      if (next.hasClass('compact')) {
-        next.toggle();
-        next.nextAll('ul.summary').first().toggle();
-      }
-      else if (next.hasClass('summary')) {
-        var list = $('<ul class="summary compact" />');
-        list.html(next.html());
-        list.find('.summary_desc, .note').remove();
-        list.find('a').each(function() {
-          $(this).html($(this).find('strong').html());
-          $(this).parent().html($(this)[0].outerHTML);
-        });
-        next.before(list);
-        next.toggle();
-      }
-    });
-    return false;
-  });
-  if (localStorage.summaryCollapsed == "collapse") {
-    $('.summary_toggle').first().click();
-  } else { localStorage.summaryCollapsed = "expand"; }
-}
-
-function constantSummaryToggle() {
-  $('.constants_summary_toggle').click(function(e) {
-    e.preventDefault();
-    localStorage.summaryCollapsed = $(this).text();
-    $('.constants_summary_toggle').each(function() {
-      $(this).text($(this).text() == "collapse" ? "expand" : "collapse");
-      var next = $(this).parent().parent().nextAll('dl.constants').first();
-      if (next.hasClass('compact')) {
-        next.toggle();
-        next.nextAll('dl.constants').first().toggle();
-      }
-      else if (next.hasClass('constants')) {
-        var list = $('<dl class="constants compact" />');
-        list.html(next.html());
-        list.find('dt').each(function() {
-           $(this).addClass('summary_signature');
-           $(this).text( $(this).text().split('=')[0]);
-          if ($(this).has(".deprecated").length) {
-             $(this).addClass('deprecated');
-          };
-        });
-        // Add the value of the constant as "Tooltip" to the summary object
-        list.find('pre.code').each(function() {
-          console.log($(this).parent());
-          var dt_element = $(this).parent().prev();
-          var tooltip = $(this).text();
-          if (dt_element.hasClass("deprecated")) {
-             tooltip = 'Deprecated. ' + tooltip;
-          };
-          dt_element.attr('title', tooltip);
-        });
-        list.find('.docstring, .tags, dd').remove();
-        next.before(list);
-        next.toggle();
-      }
-    });
-    return false;
-  });
-  if (localStorage.summaryCollapsed == "collapse") {
-    $('.constants_summary_toggle').first().click();
-  } else { localStorage.summaryCollapsed = "expand"; }
-}
-
-function generateTOC() {
-  if ($('#filecontents').length === 0) return;
-  var _toc = $('<ol class="top"></ol>');
-  var show = false;
-  var toc = _toc;
-  var counter = 0;
-  var tags = ['h2', 'h3', 'h4', 'h5', 'h6'];
-  var i;
-  var curli;
-  if ($('#filecontents h1').length > 1) tags.unshift('h1');
-  for (i = 0; i < tags.length; i++) { tags[i] = '#filecontents ' + tags[i]; }
-  var lastTag = parseInt(tags[0][1], 10);
-  $(tags.join(', ')).each(function() {
-    if ($(this).parents('.method_details .docstring').length != 0) return;
-    if (this.id == "filecontents") return;
-    show = true;
-    var thisTag = parseInt(this.tagName[1], 10);
-    if (this.id.length === 0) {
-      var proposedId = $(this).attr('toc-id');
-      if (typeof(proposedId) != "undefined") this.id = proposedId;
-      else {
-        var proposedId = $(this).text().replace(/[^a-z0-9-]/ig, '_');
-        if ($('#' + proposedId).length > 0) { proposedId += counter; counter++; }
-        this.id = proposedId;
-      }
-    }
-    if (thisTag > lastTag) {
-      for (i = 0; i < thisTag - lastTag; i++) {
-        if ( typeof(curli) == "undefined" ) {
-          curli = $('<li/>');
-          toc.append(curli);
-        }
-        toc = $('<ol/>');
-        curli.append(toc);
-        curli = undefined;
-      }
-    }
-    if (thisTag < lastTag) {
-      for (i = 0; i < lastTag - thisTag; i++) {
-        toc = toc.parent();
-        toc = toc.parent();
-      }
-    }
-    var title = $(this).attr('toc-title');
-    if (typeof(title) == "undefined") title = $(this).text();
-    curli =$('<li><a href="#' + this.id + '">' + title + '</a></li>'); 
-    toc.append(curli);
-    lastTag = thisTag;
-  });
-  if (!show) return;
-  html = '<div id="toc"><p class="title hide_toc"><a href="#"><strong>Table of Contents</strong></a></p></div>';
-  $('#content').prepend(html);
-  $('#toc').append(_toc);
-  $('#toc .hide_toc').toggle(function() {
-    $('#toc .top').slideUp('fast');
-    $('#toc').toggleClass('hidden');
-    $('#toc .title small').toggle();
-  }, function() {
-    $('#toc .top').slideDown('fast');
-    $('#toc').toggleClass('hidden');
-    $('#toc .title small').toggle();
-  });
-}
-
-function navResizeFn(e) {
-  if (e.which !== 1) {
-    navResizeFnStop();
-    return;
-  }
-
-  sessionStorage.navWidth = e.pageX.toString();
-  $('.nav_wrap').css('width', e.pageX);
-  $('.nav_wrap').css('-ms-flex', 'inherit');
-}
-
-function navResizeFnStop() {
-  $(window).unbind('mousemove', navResizeFn);
-  window.removeEventListener('message', navMessageFn, false);
-}
-
-function navMessageFn(e) {
-  if (e.data.action === 'mousemove') navResizeFn(e.data.event);
-  if (e.data.action === 'mouseup') navResizeFnStop();
-}
-
-function navResizer() {
-  $('#resizer').mousedown(function(e) {
-    e.preventDefault();
-    $(window).mousemove(navResizeFn);
-    window.addEventListener('message', navMessageFn, false);
-  });
-  $(window).mouseup(navResizeFnStop);
-
-  if (sessionStorage.navWidth) {
-    navResizeFn({which: 1, pageX: parseInt(sessionStorage.navWidth, 10)});
-  }
-}
-
-function navExpander() {
-  var done = false, timer = setTimeout(postMessage, 500);
-  function postMessage() {
-    if (done) return;
-    clearTimeout(timer);
-    var opts = { action: 'expand', path: pathId };
-    document.getElementById('nav').contentWindow.postMessage(opts, '*');
-    done = true;
-  }
-
-  window.addEventListener('message', function(event) {
-    if (event.data === 'navReady') postMessage();
-    return false;
-  }, false);
-}
-
-function mainFocus() {
-  var hash = window.location.hash;
-  if (hash !== '' && $(hash)[0]) {
-    $(hash)[0].scrollIntoView();
-  }
-
-  setTimeout(function() { $('#main').focus(); }, 10);
-}
-
-function navigationChange() {
-  // This works around the broken anchor navigation with the YARD template.
-  window.onpopstate = function() {
-    var hash = window.location.hash;
-    if (hash !== '' && $(hash)[0]) {
-      $(hash)[0].scrollIntoView();
-    }
-  };
-}
-
-$(document).ready(function() {
-  navResizer();
-  navExpander();
-  createSourceLinks();
-  createDefineLinks();
-  createFullTreeLinks();
-  searchFrameButtons();
-  linkSummaries();
-  summaryToggle();
-  constantSummaryToggle();
-  generateTOC();
-  mainFocus();
-  navigationChange();
-});
-
-})();
diff --git a/docs/source/_static/api-reference/js/full_list.js b/docs/source/_static/api-reference/js/full_list.js
deleted file mode 100644
index 59069c5..0000000
--- a/docs/source/_static/api-reference/js/full_list.js
+++ /dev/null
@@ -1,216 +0,0 @@
-(function() {
-
-var $clicked = $(null);
-var searchTimeout = null;
-var searchCache = [];
-var caseSensitiveMatch = false;
-var ignoreKeyCodeMin = 8;
-var ignoreKeyCodeMax = 46;
-var commandKey = 91;
-
-RegExp.escape = function(text) {
-    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
-}
-
-function escapeShortcut() {
-  $(document).keydown(function(evt) {
-    if (evt.which == 27) {
-      window.parent.postMessage('navEscape', '*');
-    }
-  });
-}
-
-function navResizer() {
-  $(window).mousemove(function(e) {
-    window.parent.postMessage({
-      action: 'mousemove', event: {pageX: e.pageX, which: e.which}
-    }, '*');
-  }).mouseup(function(e) {
-    window.parent.postMessage({action: 'mouseup'}, '*');
-  });
-  window.parent.postMessage("navReady", "*");
-}
-
-function clearSearchTimeout() {
-  clearTimeout(searchTimeout);
-  searchTimeout = null;
-}
-
-function enableLinks() {
-  // load the target page in the parent window
-  $('#full_list li').on('click', function(evt) {
-    $('#full_list li').removeClass('clicked');
-    $clicked = $(this);
-    $clicked.addClass('clicked');
-    evt.stopPropagation();
-
-    if (evt.target.tagName === 'A') return true;
-
-    var elem = $clicked.find('> .item .object_link a')[0];
-    var e = evt.originalEvent;
-    var newEvent = new MouseEvent(evt.originalEvent.type);
-    newEvent.initMouseEvent(e.type, e.canBubble, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);
-    elem.dispatchEvent(newEvent);
-    evt.preventDefault();
-    return false;
-  });
-}
-
-function enableToggles() {
-  // show/hide nested classes on toggle click
-  $('#full_list a.toggle').on('click', function(evt) {
-    evt.stopPropagation();
-    evt.preventDefault();
-    $(this).parent().parent().toggleClass('collapsed');
-    highlight();
-  });
-}
-
-function populateSearchCache() {
-  $('#full_list li .item').each(function() {
-    var $node = $(this);
-    var $link = $node.find('.object_link a');
-    if ($link.length > 0) {
-      searchCache.push({
-        node: $node,
-        link: $link,
-        name: $link.text(),
-        fullName: $link.attr('title').split(' ')[0]
-      });
-    }
-  });
-}
-
-function enableSearch() {
-  $('#search input').keyup(function(event) {
-    if (ignoredKeyPress(event)) return;
-    if (this.value === "") {
-      clearSearch();
-    } else {
-      performSearch(this.value);
-    }
-  });
-
-  $('#full_list').after("<div id='noresults' style='display:none'></div>");
-}
-
-function ignoredKeyPress(event) {
-  if (
-    (event.keyCode > ignoreKeyCodeMin && event.keyCode < ignoreKeyCodeMax) ||
-    (event.keyCode == commandKey)
-  ) {
-    return true;
-  } else {
-    return false;
-  }
-}
-
-function clearSearch() {
-  clearSearchTimeout();
-  $('#full_list .found').removeClass('found').each(function() {
-    var $link = $(this).find('.object_link a');
-    $link.text($link.text());
-  });
-  $('#full_list, #content').removeClass('insearch');
-  $clicked.parents().removeClass('collapsed');
-  highlight();
-}
-
-function performSearch(searchString) {
-  clearSearchTimeout();
-  $('#full_list, #content').addClass('insearch');
-  $('#noresults').text('').hide();
-  partialSearch(searchString, 0);
-}
-
-function partialSearch(searchString, offset) {
-  var lastRowClass = '';
-  var i = null;
-  for (i = offset; i < Math.min(offset + 50, searchCache.length); i++) {
-    var item = searchCache[i];
-    var searchName = (searchString.indexOf('::') != -1 ? item.fullName : item.name);
-    var matchString = buildMatchString(searchString);
-    var matchRegexp = new RegExp(matchString, caseSensitiveMatch ? "" : "i");
-    if (searchName.match(matchRegexp) == null) {
-      item.node.removeClass('found');
-      item.link.text(item.link.text());
-    }
-    else {
-      item.node.addClass('found');
-      item.node.removeClass(lastRowClass).addClass(lastRowClass == 'r1' ? 'r2' : 'r1');
-      lastRowClass = item.node.hasClass('r1') ? 'r1' : 'r2';
-      item.link.html(item.name.replace(matchRegexp, "<strong>$&</strong>"));
-    }
-  }
-  if(i == searchCache.length) {
-    searchDone();
-  } else {
-    searchTimeout = setTimeout(function() {
-      partialSearch(searchString, i);
-    }, 0);
-  }
-}
-
-function searchDone() {
-  searchTimeout = null;
-  highlight();
-  if ($('#full_list li:visible').size() === 0) {
-    $('#noresults').text('No results were found.').hide().fadeIn();
-  } else {
-    $('#noresults').text('').hide();
-  }
-  $('#content').removeClass('insearch');
-}
-
-function buildMatchString(searchString, event) {
-  caseSensitiveMatch = searchString.match(/[A-Z]/) != null;
-  var regexSearchString = RegExp.escape(searchString);
-  if (caseSensitiveMatch) {
-    regexSearchString += "|" +
-      $.map(searchString.split(''), function(e) { return RegExp.escape(e); }).
-      join('.+?');
-  }
-  return regexSearchString;
-}
-
-function highlight() {
-  $('#full_list li:visible').each(function(n) {
-    $(this).removeClass('even odd').addClass(n % 2 == 0 ? 'odd' : 'even');
-  });
-}
-
-/**
- * Expands the tree to the target element and its immediate
- * children.
- */
-function expandTo(path) {
-  var $target = $(document.getElementById('object_' + path));
-  $target.addClass('clicked');
-  $target.removeClass('collapsed');
-  $target.parentsUntil('#full_list', 'li').removeClass('collapsed');
-  if($target[0]) {
-    window.scrollTo(window.scrollX, $target.offset().top - 250);
-    highlight();
-  }
-}
-
-function windowEvents(event) {
-  var msg = event.data;
-  if (msg.action === "expand") {
-    expandTo(msg.path);
-  }
-  return false;
-}
-
-window.addEventListener("message", windowEvents, false);
-
-$(document).ready(function() {
-  escapeShortcut();
-  navResizer();
-  enableLinks();
-  enableToggles();
-  populateSearchCache();
-  enableSearch();
-});
-
-})();
diff --git a/docs/source/_static/api-reference/js/jquery.js b/docs/source/_static/api-reference/js/jquery.js
deleted file mode 100644
index 198b3ff..0000000
--- a/docs/source/_static/api-reference/js/jquery.js
+++ /dev/null
@@ -1,4 +0,0 @@
-/*! jQuery v1.7.1 jquery.com | jquery.org/license */
-(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
-f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
-{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
\ No newline at end of file
diff --git a/docs/source/_static/api-reference/method_list.html b/docs/source/_static/api-reference/method_list.html
deleted file mode 100644
index d17f26a..0000000
--- a/docs/source/_static/api-reference/method_list.html
+++ /dev/null
@@ -1,715 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <meta charset="utf-8" />
-    
-      <link rel="stylesheet" href="css/full_list.css" type="text/css" media="screen" />
-    
-      <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" />
-    
-
-    
-      <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-    
-      <script type="text/javascript" charset="utf-8" src="js/full_list.js"></script>
-    
-
-    <title>Method List</title>
-    <base id="base_target" target="_parent" />
-  </head>
-  <body>
-    <div id="content">
-      <div class="fixed_header">
-        <h1 id="full_list_header">Method List</h1>
-        <div id="full_list_nav">
-          
-            <span><a target="_self" href="class_list.html">
-              Classes
-            </a></span>
-          
-            <span><a target="_self" href="method_list.html">
-              Methods
-            </a></span>
-          
-            <span><a target="_self" href="file_list.html">
-              Files
-            </a></span>
-          
-        </div>
-
-        <div id="search">Search: <input type="text" /></div>
-      </div>
-
-      <ul id="full_list" class="method">
-        
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html#<<-instance_method" title="MultiTenant::CopyFromClientHelper#&lt;&lt; (method)">#&lt;&lt;</a></span>
-      <small>MultiTenant::CopyFromClientHelper</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#arel_node-instance_method" title="MultiTenant::Context#arel_node (method)">#arel_node</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Table.html#arel_table-instance_method" title="MultiTenant::Table#arel_table (method)">#arel_table</a></span>
-      <small>MultiTenant::Table</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/QueryMethods.html#build_arel-instance_method" title="ActiveRecord::QueryMethods#build_arel (method)">#build_arel</a></span>
-      <small>ActiveRecord::QueryMethods</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/QueryMethods.html#build_arel_orig-instance_method" title="ActiveRecord::QueryMethods#build_arel_orig (method)">#build_arel_orig</a></span>
-      <small>ActiveRecord::QueryMethods</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenantFindBy.html#cached_find_by_statement-instance_method" title="MultiTenantFindBy#cached_find_by_statement (method)">#cached_find_by_statement</a></span>
-      <small>MultiTenantFindBy</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Client.html#call-instance_method" title="Sidekiq::Middleware::MultiTenant::Client#call (method)">#call</a></span>
-      <small>Sidekiq::Middleware::MultiTenant::Client</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="Sidekiq/Middleware/MultiTenant/Server.html#call-instance_method" title="Sidekiq::Middleware::MultiTenant::Server#call (method)">#call</a></span>
-      <small>Sidekiq::Middleware::MultiTenant::Server</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#citus_version-instance_method" title="MultiTenant::MigrationExtensions#citus_version (method)">#citus_version</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#contexts-instance_method" title="MultiTenant::ArelTenantVisitor#contexts (method)">#contexts</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/CopyFromClient.html#copy_from_client-instance_method" title="MultiTenant::CopyFromClient#copy_from_client (method)">#copy_from_client</a></span>
-      <small>MultiTenant::CopyFromClient</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html#count-instance_method" title="MultiTenant::CopyFromClientHelper#count (method)">#count</a></span>
-      <small>MultiTenant::CopyFromClientHelper</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#create_distributed_table-instance_method" title="MultiTenant::MigrationExtensions#create_distributed_table (method)">#create_distributed_table</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#create_reference_table-instance_method" title="MultiTenant::MigrationExtensions#create_reference_table (method)">#create_reference_table</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/ConnectionAdapters/SchemaStatements.html#create_table-instance_method" title="ActiveRecord::ConnectionAdapters::SchemaStatements#create_table (method)">#create_table</a></span>
-      <small>ActiveRecord::ConnectionAdapters::SchemaStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#current_tenant-class_method" title="MultiTenant.current_tenant (method)">current_tenant</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#current_tenant=-class_method" title="MultiTenant.current_tenant= (method)">current_tenant=</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#current_tenant_class-class_method" title="MultiTenant.current_tenant_class (method)">current_tenant_class</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#current_tenant_id-class_method" title="MultiTenant.current_tenant_id (method)">current_tenant_id</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#current_tenant_is_id%3F-class_method" title="MultiTenant.current_tenant_is_id? (method)">current_tenant_is_id?</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#default_tenant_class-class_method" title="MultiTenant.default_tenant_class (method)">default_tenant_class</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#default_tenant_class=-class_method" title="MultiTenant.default_tenant_class= (method)">default_tenant_class=</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/DatabaseStatements.html#delete-instance_method" title="MultiTenant::DatabaseStatements#delete (method)">#delete</a></span>
-      <small>MultiTenant::DatabaseStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#discover_relations-instance_method" title="MultiTenant::Context#discover_relations (method)">#discover_relations</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#enable_extension_on_all_nodes-instance_method" title="MultiTenant::MigrationExtensions#enable_extension_on_all_nodes (method)">#enable_extension_on_all_nodes</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#enable_query_monitor-class_method" title="MultiTenant.enable_query_monitor (method)">enable_query_monitor</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#enable_write_only_mode-class_method" title="MultiTenant.enable_write_only_mode (method)">enable_write_only_mode</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Table.html#eql%3F-instance_method" title="MultiTenant::Table#eql? (method)">#eql?</a></span>
-      <small>MultiTenant::Table</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#execute_on_all_nodes-instance_method" title="MultiTenant::MigrationExtensions#execute_on_all_nodes (method)">#execute_on_all_nodes</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/QueryMonitor.html#finish-instance_method" title="MultiTenant::QueryMonitor#finish (method)">#finish</a></span>
-      <small>MultiTenant::QueryMonitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#handled_relations-instance_method" title="MultiTenant::Context#handled_relations (method)">#handled_relations</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/Associations/ClassMethods.html#has_and_belongs_to_many_with_tenant-instance_method" title="ActiveRecord::Associations::ClassMethods#has_and_belongs_to_many_with_tenant (method)">#has_and_belongs_to_many_with_tenant</a></span>
-      <small>ActiveRecord::Associations::ClassMethods</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Table.html#hash-instance_method" title="MultiTenant::Table#hash (method)">#hash</a></span>
-      <small>MultiTenant::Table</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Table.html#initialize-instance_method" title="MultiTenant::Table#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::Table</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#initialize-instance_method" title="MultiTenant::Context#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#initialize-instance_method" title="MultiTenant::ArelTenantVisitor#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html#initialize-instance_method" title="MultiTenant::BaseTenantEnforcementClause#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::BaseTenantEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/TenantJoinEnforcementClause.html#initialize-instance_method" title="MultiTenant::TenantJoinEnforcementClause#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::TenantJoinEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/CopyFromClientHelper.html#initialize-instance_method" title="MultiTenant::CopyFromClientHelper#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::CopyFromClientHelper</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelVisitorsDepthFirst.html#initialize-instance_method" title="MultiTenant::ArelVisitorsDepthFirst#initialize (method)">#initialize</a></span>
-      <small>MultiTenant::ArelVisitorsDepthFirst</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/DatabaseStatements.html#join_to_delete-instance_method" title="MultiTenant::DatabaseStatements#join_to_delete (method)">#join_to_delete</a></span>
-      <small>MultiTenant::DatabaseStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/DatabaseStatements.html#join_to_update-instance_method" title="MultiTenant::DatabaseStatements#join_to_update (method)">#join_to_update</a></span>
-      <small>MultiTenant::DatabaseStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#known_relations-instance_method" title="MultiTenant::Context#known_relations (method)">#known_relations</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#load_current_tenant!-class_method" title="MultiTenant.load_current_tenant! (method)">load_current_tenant!</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ModelExtensionsClassMethods.html#multi_tenant-instance_method" title="MultiTenant::ModelExtensionsClassMethods#multi_tenant (method)">#multi_tenant</a></span>
-      <small>MultiTenant::ModelExtensionsClassMethods</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#multi_tenant_model_for_arel-class_method" title="MultiTenant.multi_tenant_model_for_arel (method)">multi_tenant_model_for_arel</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#multi_tenant_model_for_table-class_method" title="MultiTenant.multi_tenant_model_for_table (method)">multi_tenant_model_for_table</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/ConnectionAdapters/SchemaStatements.html#orig_create_table-instance_method" title="ActiveRecord::ConnectionAdapters::SchemaStatements#orig_create_table (method)">#orig_create_table</a></span>
-      <small>ActiveRecord::ConnectionAdapters::SchemaStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#partition_key-class_method" title="MultiTenant.partition_key (method)">partition_key</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="Sidekiq/Client.html#push_bulk_with_tenants-instance_method" title="Sidekiq::Client#push_bulk_with_tenants (method)">#push_bulk_with_tenants</a></span>
-      <small>Sidekiq::Client</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="Sidekiq/Client.html#push_bulk_with_tenants-class_method" title="Sidekiq::Client.push_bulk_with_tenants (method)">push_bulk_with_tenants</a></span>
-      <small>Sidekiq::Client</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#query_monitor_enabled%3F-class_method" title="MultiTenant.query_monitor_enabled? (method)">query_monitor_enabled?</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#rebalance_table_shards-instance_method" title="MultiTenant::MigrationExtensions#rebalance_table_shards (method)">#rebalance_table_shards</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#register_multi_tenant_model-class_method" title="MultiTenant.register_multi_tenant_model (method)">register_multi_tenant_model</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/FastTruncate.html#run-class_method" title="MultiTenant::FastTruncate.run (method)">run</a></span>
-      <small>MultiTenant::FastTruncate</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ControllerExtensions.html#set_current_tenant_through_filter-instance_method" title="MultiTenant::ControllerExtensions#set_current_tenant_through_filter (method)">#set_current_tenant_through_filter</a></span>
-      <small>MultiTenant::ControllerExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/Associations/Association.html#skip_statement_cache%3F-instance_method" title="ActiveRecord::Associations::Association#skip_statement_cache? (method)">#skip_statement_cache?</a></span>
-      <small>ActiveRecord::Associations::Association</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="ActiveRecord/Associations/Association.html#skip_statement_cache_orig-instance_method" title="ActiveRecord::Associations::Association#skip_statement_cache_orig (method)">#skip_statement_cache_orig</a></span>
-      <small>ActiveRecord::Associations::Association</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/QueryMonitor.html#start-instance_method" title="MultiTenant::QueryMonitor#start (method)">#start</a></span>
-      <small>MultiTenant::QueryMonitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/TenantJoinEnforcementClause.html#table_left-instance_method" title="MultiTenant::TenantJoinEnforcementClause#table_left (method)">#table_left</a></span>
-      <small>MultiTenant::TenantJoinEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html#tenant_attribute-instance_method" title="MultiTenant::BaseTenantEnforcementClause#tenant_attribute (method)">#tenant_attribute</a></span>
-      <small>MultiTenant::BaseTenantEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#tenant_klass_defined%3F-class_method" title="MultiTenant.tenant_klass_defined? (method)">tenant_klass_defined?</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html#to_s-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_s (method)">#to_s</a></span>
-      <small>MultiTenant::BaseTenantEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html#to_sql-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_sql (method)">#to_sql</a></span>
-      <small>MultiTenant::BaseTenantEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/BaseTenantEnforcementClause.html#to_str-instance_method" title="MultiTenant::BaseTenantEnforcementClause#to_str (method)">#to_str</a></span>
-      <small>MultiTenant::BaseTenantEnforcementClause</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/MigrationExtensions.html#undistribute_table-instance_method" title="MultiTenant::MigrationExtensions#undistribute_table (method)">#undistribute_table</a></span>
-      <small>MultiTenant::MigrationExtensions</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#unhandled_relations-instance_method" title="MultiTenant::Context#unhandled_relations (method)">#unhandled_relations</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/DatabaseStatements.html#update-instance_method" title="MultiTenant::DatabaseStatements#update (method)">#update</a></span>
-      <small>MultiTenant::DatabaseStatements</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_Arel_Attributes_Attribute-instance_method" title="MultiTenant::ArelTenantVisitor#visit_Arel_Attributes_Attribute (method)">#visit_Arel_Attributes_Attribute</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_Arel_Nodes_Equality-instance_method" title="MultiTenant::ArelTenantVisitor#visit_Arel_Nodes_Equality (method)">#visit_Arel_Nodes_Equality</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_Arel_Nodes_OuterJoin-instance_method" title="MultiTenant::ArelTenantVisitor#visit_Arel_Nodes_OuterJoin (method)">#visit_Arel_Nodes_OuterJoin</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_Arel_Nodes_SelectCore-instance_method" title="MultiTenant::ArelTenantVisitor#visit_Arel_Nodes_SelectCore (method)">#visit_Arel_Nodes_SelectCore</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_Arel_Table-instance_method" title="MultiTenant::ArelTenantVisitor#visit_Arel_Table (method)">#visit_Arel_Table</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_MultiTenant_TenantEnforcementClause-instance_method" title="MultiTenant::ArelTenantVisitor#visit_MultiTenant_TenantEnforcementClause (method)">#visit_MultiTenant_TenantEnforcementClause</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/TenantValueVisitor.html#visit_MultiTenant_TenantEnforcementClause-instance_method" title="MultiTenant::TenantValueVisitor#visit_MultiTenant_TenantEnforcementClause (method)">#visit_MultiTenant_TenantEnforcementClause</a></span>
-      <small>MultiTenant::TenantValueVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/ArelTenantVisitor.html#visit_MultiTenant_TenantJoinEnforcementClause-instance_method" title="MultiTenant::ArelTenantVisitor#visit_MultiTenant_TenantJoinEnforcementClause (method)">#visit_MultiTenant_TenantJoinEnforcementClause</a></span>
-      <small>MultiTenant::ArelTenantVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/TenantValueVisitor.html#visit_MultiTenant_TenantJoinEnforcementClause-instance_method" title="MultiTenant::TenantValueVisitor#visit_MultiTenant_TenantJoinEnforcementClause (method)">#visit_MultiTenant_TenantJoinEnforcementClause</a></span>
-      <small>MultiTenant::TenantValueVisitor</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#visited_handled_relation-instance_method" title="MultiTenant::Context#visited_handled_relation (method)">#visited_handled_relation</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant/Context.html#visited_relation-instance_method" title="MultiTenant::Context#visited_relation (method)">#visited_relation</a></span>
-      <small>MultiTenant::Context</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#with-class_method" title="MultiTenant.with (method)">with</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#with_write_only_mode_enabled%3F-class_method" title="MultiTenant.with_write_only_mode_enabled? (method)">with_write_only_mode_enabled?</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="even ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#without-class_method" title="MultiTenant.without (method)">without</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-  <li class="odd ">
-    <div class="item">
-      <span class='object_link'><a href="MultiTenant.html#wrap_methods-class_method" title="MultiTenant.wrap_methods (method)">wrap_methods</a></span>
-      <small>MultiTenant</small>
-    </div>
-  </li>
-  
-
-
-      </ul>
-    </div>
-  </body>
-</html>
diff --git a/docs/source/_static/api-reference/top-level-namespace.html b/docs/source/_static/api-reference/top-level-namespace.html
deleted file mode 100644
index 285cd5d..0000000
--- a/docs/source/_static/api-reference/top-level-namespace.html
+++ /dev/null
@@ -1,126 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="utf-8">
-<meta name="viewport" content="width=device-width, initial-scale=1.0">
-<title>
-  Top Level Namespace
-  
-    &mdash; Documentation by YARD 0.9.34
-  
-</title>
-
-  <link rel="stylesheet" href="css/style.css" type="text/css" />
-
-  <link rel="stylesheet" href="css/common.css" type="text/css" />
-
-<script type="text/javascript">
-  pathId = "";
-  relpath = '';
-</script>
-
-
-  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
-
-  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
-
-
-  </head>
-  <body>
-    <div class="nav_wrap">
-      <iframe id="nav" src="class_list.html?1"></iframe>
-      <div id="resizer"></div>
-    </div>
-
-    <div id="main" tabindex="-1">
-      <div id="header">
-        <div id="menu">
-  
-    <a href="_index.html">Index</a> &raquo;
-    
-    
-    <span class="title">Top Level Namespace</span>
-  
-</div>
-
-        <div id="search">
-  
-    <a class="full_list_link" id="class_list_link"
-        href="class_list.html">
-
-        <svg width="24" height="24">
-          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
-          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
-        </svg>
-    </a>
-  
-</div>
-        <div class="clear"></div>
-      </div>
-
-      <div id="content"><h1>Top Level Namespace
-  
-  
-  
-</h1>
-<div class="box_info">
-  
-
-  
-  
-  
-  
-  <dl>
-      <dt>Includes:</dt>
-      <dd><span class='object_link'><a href="MultiTenantFindBy.html" title="MultiTenantFindBy (module)">MultiTenantFindBy</a></span></dd>
-  </dl>
-  
-  
-
-  
-
-  
-</div>
-
-<h2>Defined Under Namespace</h2>
-<p class="children">
-  
-    
-      <strong class="modules">Modules:</strong> <span class='object_link'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>, <span class='object_link'><a href="MultiTenant.html" title="MultiTenant (module)">MultiTenant</a></span>, <span class='object_link'><a href="MultiTenantFindBy.html" title="MultiTenantFindBy (module)">MultiTenantFindBy</a></span>, <span class='object_link'><a href="Sidekiq.html" title="Sidekiq (module)">Sidekiq</a></span>
-    
-  
-    
-  
-</p>
-
-
-
-
-
-
-
-
-  
-  
-  
-  
-  
-  
-  <h2>Method Summary</h2>
-  
-  <h3 class="inherited">Methods included from <span class='object_link'><a href="MultiTenantFindBy.html" title="MultiTenantFindBy (module)">MultiTenantFindBy</a></span></h3>
-  <p class="inherited"><span class='object_link'><a href="MultiTenantFindBy.html#cached_find_by_statement-instance_method" title="MultiTenantFindBy#cached_find_by_statement (method)">#cached_find_by_statement</a></span></p>
-
-
-</div>
-
-      <div id="footer">
-  Generated on Sat May 27 10:16:23 2023 by
-  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
-  0.9.34 (ruby-3.2.2).
-</div>
-
-    </div>
-  </body>
-</html>
\ No newline at end of file
diff --git a/docs/source/_templates/.gitignore b/docs/source/_templates/.gitignore
deleted file mode 100644
index 5e7d273..0000000
--- a/docs/source/_templates/.gitignore
+++ /dev/null
@@ -1,4 +0,0 @@
-# Ignore everything in this directory
-*
-# Except this file
-!.gitignore
diff --git a/docs/source/api-reference.rst b/docs/source/api-reference.rst
deleted file mode 100644
index 917ed13..0000000
--- a/docs/source/api-reference.rst
+++ /dev/null
@@ -1,8 +0,0 @@
-.. _api-reference:
-
-API Reference
-=============
-
-This section provides a detailed overview of the available classes, modules, and methods in the ``activerecord-multi-tenant`` gem.
-
-`Click here to open the HTML file <_static/api-reference/index.html>`_
\ No newline at end of file
diff --git a/docs/source/appendix.rst b/docs/source/appendix.rst
deleted file mode 100644
index 4a538d3..0000000
--- a/docs/source/appendix.rst
+++ /dev/null
@@ -1,26 +0,0 @@
-.. _appendix:
-
-Appendix
-========
-
-This section provides additional resources and acknowledgments related to ``activerecord-multi-tenant``.
-
-Glossary of Terms and Abbreviations
------------------------------------
-
-- **Multi-tenancy:** A software architecture in which a single instance of software serves multiple tenants.
-- **Tenant:** A group of users who share a common access with specific privileges to the software instance.
-- **Tenant ID:** A unique identifier for a tenant.
-
-
-References to External Resources
---------------------------------
-
-- `Official Rails Guide <https://guides.rubyonrails.org/>`_: A comprehensive guide to Ruby on Rails.
-- `ActiveRecord Documentation <https://api.rubyonrails.org/classes/ActiveRecord/Base.html>`_: Detailed documentation for ActiveRecord, the database toolkit used by ``activerecord-multi-tenant``.
-
-Acknowledgments and Credits
----------------------------
-
-We would like to thank the Ruby on Rails community for their contributions to open source, which have made projects like ``activerecord-multi-tenant`` possible.
-This gem was initially based on `acts_as_tenant <https://github.com/ErwinM/acts_as_tenant>`, and still shares some code. We thank the authors for their efforts.
diff --git a/docs/source/changelog.rst b/docs/source/changelog.rst
deleted file mode 100644
index 3f3f394..0000000
--- a/docs/source/changelog.rst
+++ /dev/null
@@ -1,8 +0,0 @@
-.. _changelog:
-
-Changelog
-=========
-
-This section provides a history of changes for each version of ``activerecord-multi-tenant``.
-For a complete history of changes, please refer to the official changelog on `GitHub <https://github.com/citusdata/activerecord-multi-tenant/blob/master/CHANGELOG.md>`_.
-
diff --git a/docs/source/community-and-support.rst b/docs/source/community-and-support.rst
deleted file mode 100644
index a28d42e..0000000
--- a/docs/source/community-and-support.rst
+++ /dev/null
@@ -1,26 +0,0 @@
-.. _community-and-support:
-
-Community and Support
-=====================
-
-If you need help with ``activerecord-multi-tenant``, there are several resources available to you.
-
-GitHub Repository
------------------
-
-The `activerecord-multi-tenant GitHub repository <https://github.com/citusdata/activerecord-multi-tenant>`_ is the first place to look for code, issues, and pull requests.
-
-Issue Tracker
--------------
-
-If you encounter issues with ``activerecord-multi-tenant``, you can report them in the `issue tracker <https://github.com/citusdata/activerecord-multi-tenant/issues>`_. Please provide as much detail as possible so we can address the issue effectively.
-
-Discussion Forums
------------------
-
-For general discussions about ``activerecord-multi-tenant``, you can use the `discussion forums <https://github.com/citusdata/activerecord-multi-tenant/discussions>`_. This is a great place to ask questions, share ideas, and engage with the ``activerecord-multi-tenant`` community.
-
-Documentation Feedback
-----------------------
-
-We strive to provide high-quality documentation for ``activerecord-multi-tenant``. If you have feedback or suggestions for improving the documentation, please open an issue in the `issue tracker <https://github.com/citusdata/activerecord-multi-tenant/issues>`_.
diff --git a/docs/source/conf.py b/docs/source/conf.py
deleted file mode 100644
index 5d01cfb..0000000
--- a/docs/source/conf.py
+++ /dev/null
@@ -1,30 +0,0 @@
-from datetime import date
-
-# Configuration file for the Sphinx documentation builder.
-#
-# For the full list of built-in configuration values, see the documentation:
-# https://www.sphinx-doc.org/en/master/usage/configuration.html
-
-# -- Project information -----------------------------------------------------
-# https://www.sphinx-doc.org/en/master/usage/configuration.html#project-information
-
-project = "ActiveRecord Multi-tenant"
-copyright = f"{date.today().year} .Citus Data Licensed under the MIT license, see License for details. "
-author = "Citus Data"
-release = "2.2.0"
-
-# -- General configuration ---------------------------------------------------
-# https://www.sphinx-doc.org/en/master/usage/configuration.html#general-configuration
-
-extensions = ["sphinxnotes.strike"]
-
-templates_path = ["_templates"]
-exclude_patterns = []
-
-language = "python"
-
-# -- Options for HTML output -------------------------------------------------
-# https://www.sphinx-doc.org/en/master/usage/configuration.html#options-for-html-output
-
-html_theme = "sphinx_rtd_theme"
-html_static_path = ["_static"]
diff --git a/docs/source/contributing.rst b/docs/source/contributing.rst
deleted file mode 100644
index a50a660..0000000
--- a/docs/source/contributing.rst
+++ /dev/null
@@ -1,70 +0,0 @@
-.. _contributing:
-
-Contributing
-============
-
-We welcome contributions to ``activerecord-multi-tenant``! This section provides guidelines for contributing to the project.
-
-Overview of the Development Process
------------------------------------
-
-``activerecord-multi-tenant`` is developed using a standard fork and pull request model. The `activerecord-multi-tenant GitHub repository <https://github.com/citusdata/activerecord-multi-tenant>`_ is the starting point for code contributions.
-
-Guidelines for Contributing
----------------------------
-
-1. **Fork the Repository:** Start by forking the official ``activerecord-multi-tenant`` repository to your own GitHub account.
-
-2. **Clone the Repository:** Clone the forked repository to your local machine and add the official repository as an upstream remote:
-
-   .. code-block:: bash
-
-      $ git clone https://github.com/citusdata/activerecord-multi-tenant.git
-      $ cd activerecord-multi-tenant
-      $ git remote add upstream https://github.com/your-github-account/activerecord-multi-tenant.git
-
-3. **Create a Feature Branch:** Create a new branch for each feature or bugfix:
-
-   .. code-block:: bash
-
-      $ git checkout -b my-feature-branch
-
-4. **Commit Your Changes:** Make your changes and commit them to your feature branch.
-
-5. **Push to GitHub:** Push your changes to your fork on GitHub:
-
-   .. code-block:: bash
-
-      $ git push origin my-feature-branch
-
-6. **Submit a Pull Request:** Open a pull request from your feature branch to the master branch of the official ``activerecord-multi-tenant`` repository.
-
-Please ensure your code adheres to the existing style conventions of the project. Include tests for any new features or bug fixes, and update the documentation as necessary.
-
-Setting Up a Development Environment
-------------------------------------
-
-To set up a development environment for ``activerecord-multi-tenant``, follow these steps:
-
-1. Clone the repository as described in the contributing guidelines.
-
-2. Install the required dependencies:
-
-   .. code-block:: bash
-
-      $ bundle install
-
-3. Run the tests to ensure everything is set up correctly:
-
-   .. code-block:: bash
-
-      $ bundle exec rake spec
-
-4. Compile documentation for the project:
-
-   .. code-block:: bash
-
-      $ cd docs
-      $ make pre-build
-      $ make html
-
diff --git a/docs/source/getting-started.rst b/docs/source/getting-started.rst
deleted file mode 100644
index f6aeb12..0000000
--- a/docs/source/getting-started.rst
+++ /dev/null
@@ -1,37 +0,0 @@
-.. _getting-started:
-
-Getting Started
-===============
-
-This section will guide you through the process of installing and setting up ``activerecord-multi-tenant`` in your Rails application.
-
-Installation
-------------
-
-To install ``activerecord-multi-tenant``, add the following line to your application's Gemfile:
-
-.. code-block:: ruby
-
-   gem install activerecord-multi-tenant
-
-Then execute:
-
-.. code-block:: bash
-
-   $ bundle install
-
-Or install it yourself as:
-
-.. code-block:: bash
-
-   $ gem install activerecord-multi-tenant
-
-Dependencies
-------------
-
-``activerecord-multi-tenant`` requires:
-
-- Ruby version 3.0.0 or later
-- Rails version 6.0.0 or later
-
-Please ensure that your application meets these requirements before installing the gem.
diff --git a/docs/source/guides-and-tutorials.rst b/docs/source/guides-and-tutorials.rst
deleted file mode 100644
index 74ba29c..0000000
--- a/docs/source/guides-and-tutorials.rst
+++ /dev/null
@@ -1,129 +0,0 @@
-.. _guides-and-tutorials:
-
-Guides and Tutorials
-====================
-
-This section provides step-by-step guides and tutorials on how to use ``activerecord-multi-tenant`` in various scenarios.
-
-Setting Up Multi tenancy in a New Project
-------------------------------------------
-
-To set up multi-tenancy in a new Rails project, follow these steps:
-
-1. Install the ``activerecord-multi-tenant`` gem as described in the :ref:`getting-started` section.
-
-2. Declare your tenant model in your ActiveRecord models:
-
-   .. code-block:: ruby
-
-      class User < ActiveRecord::Base
-        multi_tenant :company
-      end
-
-3. Set the current tenant before executing queries:
-
-   .. code-block:: ruby
-
-      ActiveRecord::MultiTenant.current_tenant = Company.first
-      @users = User.all
-
-Migrating an Existing Project to Use ``activerecord-multi-tenant``
-------------------------------------------------------------------
-
-If you have an existing Rails project and you want to add multi-tenancy support, follow these steps:
-
-1. Install the ``activerecord-multi-tenant`` gem as described in the :ref:`getting-started` section.
-
-2. Update your ActiveRecord models to declare the tenant model:
-
-   .. code-block:: ruby
-
-      class User < ActiveRecord::Base
-        multi_tenant :company
-      end
-
-3. Update your application logic to set the current tenant before executing queries.
-
-
-Using ``has_many`` , ``has_one`` , and ``belongs_to`` Associations
-------------------------------------------------------------------
-
-When using ``has_many``, ``has_one``, and ``belongs_to`` associations,
-there is nothing special you need to do to make them work with ``activerecord-multi-tenant``.
-The gem will automatically scope the associations to the current tenant.:
-
-.. code-block:: ruby
-
-   class User < ActiveRecord::Base
-     multi_tenant :company
-     has_many :posts
-   end
-
-   class Post < ActiveRecord::Base
-     belongs_to :user
-   end
-
-   ActiveRecord::MultiTenant.with(Company.first) do
-     @user = User.first
-     @user.posts # => Returns posts belonging to Company.first
-   end
-
-Using ``has_and_belongs_to_many`` Associations
------------------------------------------------
-
-When using ``has_and_belongs_to_many`` associations, you need to specify the tenant column and tenant class name to
-scope the association to the current tenant. If you set the ``tenant_enabled`` option to ``false``, the gem will
-not scope the association to the current tenant.
-
-.. code-block:: ruby
-
-    class Account < ActiveRecord::Base
-      multi_tenant :account
-      has_many :projects
-      has_one :manager, inverse_of: :account
-      has_many :optional_sub_tasks
-    end
-
-    class Manager < ActiveRecord::Base
-      multi_tenant :account
-      belongs_to :project
-      has_and_belongs_to_many :tasks, { tenant_column: :account_id, tenant_enabled: true,
-                                        tenant_class_name: 'Account' }
-    end
-
-    # Tests to check if the tenant column is set correctly
-    let(:task1) { Task.create! name: 'task1', project: project1, account: account1 }
-    let(:manager1) { Manager.create! name: 'manager1', account: account1, tasks: [task1] }
-
-    MultiTenant.with(account1) do
-        expect(manager1.tasks.first.account_id).to eq(task1.account_id) # true
-    end
-
-Using ``activerecord-multi-tenant`` with Controllers
------------------------------------------------------
-
-When using ``activerecord-multi-tenant`` with controllers, you need to set the current tenant in the controller
-before executing queries. You can do this by overriding the ``set_current_tenant`` method in your controller:
-
-.. code-block:: ruby
-
-    class ApplicationController < ActionController::Base
-      set_current_tenant_through_filter # Required to opt into this behavior
-      before_action :set_customer_as_tenant
-
-      def set_customer_as_tenant
-        customer = Customer.find(session[:current_customer_id])
-        set_current_tenant(customer)
-      end
-    end
-
-Best Practices and Recommendations
------------------------------------
-
-When using ``activerecord-multi-tenant``, keep the following best practices in mind:
-
-- Always set the current tenant before executing queries in a multitenant context.
-- Be mindful of the tenant scope when writing complex queries or joins.
-- If you prefer not to set a tenant for the global context, but need to specify one for certain sections of code,
-  you can utilize the `MultiTenant.with(tenant)` function. This will assign the `tenant` value
-  to the specific code block where it's used.
diff --git a/docs/source/index.rst b/docs/source/index.rst
deleted file mode 100644
index 6e5c26a..0000000
--- a/docs/source/index.rst
+++ /dev/null
@@ -1,54 +0,0 @@
-.. Django Multi-tenant documentation master file, created by
-    sphinx-quickstart on Mon Feb 13 13:32:28 2023.
-    You can adapt this file completely to your liking, but it should at least
-    contain the root `toctree` directive.
-
-Welcome to ActiveRecord Multi-tenant's documentation!
-======================================================
-
-|Build Status| |Coverage Status| |RubyGems Version| |Gem Downloads| |Latest Documentation Status|
-
-.. |Build Status| image:: https://github.com/citusdata/activerecord-multi-tenant/actions/workflows/active-record-multi-tenant-tests.yml/badge.svg
-   :target: https://github.com/citusdata/activerecord-multi-tenant/actions/workflows/active-record-multi-tenant-tests.yml
-   :alt: Build Status
-
-.. |Coverage Status| image:: https://codecov.io/gh/citusdata/activerecord-multi-tenant/branch/master/graph/badge.svg?token=rw0TsEk4Ld
-   :target: https://codecov.io/gh/citusdata/activerecord-multi-tenant
-   :alt: Coverage Status
-
-.. |RubyGems Version| image:: https://img.shields.io/gem/v/activerecord-multi-tenant.svg
-   :target: https://rubygems.org/gems/activerecord-multi-tenant
-
-.. |Gem Downloads| image:: https://img.shields.io/gem/dt/activerecord-multi-tenant.svg
-    :target: https://rubygems.org/gems/activerecord-multi-tenant
-    :alt: Gem Downloads
-
-.. |Latest Documentation Status| image:: https://readthedocs.org/projects/django-multitenant/badge/?version=latest
-   :target: https://activerecord-multi-tenant.readthedocs.io/en/latest/?badge=latest
-   :alt: Documentation Status
-
-
-activerecord-multi-tenant Documentation
-========================================
-
-Welcome to the official documentation for ``activerecord-multi-tenant``, a powerful and flexible gem for adding multi-tenancy support to your Rails applications using ActiveRecord.
-
-.. toctree::
-   :maxdepth: 2
-   :caption: Table of Contents
-
-   introduction
-   getting-started
-   usage-guide
-   guides-and-tutorials
-   api-reference
-   troubleshooting
-   contributing
-   changelog
-   community-and-support
-   appendix
-   license
-
-This documentation provides a comprehensive guide to using ``activerecord-multi-tenant``, including installation and configuration instructions, usage examples, API reference, troubleshooting tips, and more.
-
-Whether you're new to multi-tenancy or an experienced developer looking to integrate ``activerecord-multi-tenant`` into your existing Rails application, this documentation aims to provide the information you need.
diff --git a/docs/source/introduction.rst b/docs/source/introduction.rst
deleted file mode 100644
index e76d15e..0000000
--- a/docs/source/introduction.rst
+++ /dev/null
@@ -1,33 +0,0 @@
-.. _introduction:
-
-Introduction
-============
-
-Welcome to the official documentation for ``activerecord-multi-tenant``, a powerful and flexible gem for adding multi-tenancy support to your Rails applications using ActiveRecord.
-
-Overview
---------
-
-``activerecord-multi-tenant`` is designed to help developers manage and interact with data in multi-tenant environments. It provides a simple and intuitive API to scope your ActiveRecord models to specific tenants, ensuring data isolation and security while maintaining the simplicity and elegance that Rails developers love.
-
-Purpose
--------
-
-The purpose of this documentation is to provide a comprehensive guide to using ``activerecord-multi-tenant``. Whether you're new to multi-tenancy or an experienced developer looking to integrate ``activerecord-multi-tenant`` into your existing Rails application, this documentation aims to provide the information you need.
-
-Benefits of Using ``activerecord-multi-tenant``
-------------------------------------------------
-
-With ``activerecord-multi-tenant``, you can:
-
-- Easily scope your ActiveRecord models to specific tenants
-- Maintain data isolation and security in multi-tenant environments
-- Seamlessly integrate with your existing Rails applications
-- Benefit from the simplicity and elegance of the Rails framework
-
-Target Audience
----------------
-
-This documentation is intended for developers who are familiar with Ruby on Rails and ActiveRecord. Knowledge of multi-tenancy concepts is beneficial but not required, as we will cover these topics in the following sections.
-
-We hope you find this documentation helpful as you explore the capabilities of ``activerecord-multi-tenant``. Let's get started!
diff --git a/docs/source/license.rst b/docs/source/license.rst
deleted file mode 100644
index 3258400..0000000
--- a/docs/source/license.rst
+++ /dev/null
@@ -1,22 +0,0 @@
-.. _license:
-
-License
-===============================================
-Copyright (c) 2023  , Citus Data Inc.
-
-Permission is hereby granted, free of charge, to any person obtaining a copy of
-this software and associated documentation files (the "Software"), to deal in
-the Software without restriction, including without limitation the rights to use,
-copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the
-Software, and to permit persons to whom the Software is furnished to do so,
-subject to the following conditions:
-
-The above copyright notice and this permission notice shall be included in all
-copies or substantial portions of the Software.
-
-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
-FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
-COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
-IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
-CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
\ No newline at end of file
diff --git a/docs/source/troubleshooting.rst b/docs/source/troubleshooting.rst
deleted file mode 100644
index 3fb791d..0000000
--- a/docs/source/troubleshooting.rst
+++ /dev/null
@@ -1,41 +0,0 @@
-.. _troubleshooting:
-
-Troubleshooting
-===============
-
-This section provides solutions to common issues you might encounter when using ``activerecord-multi-tenant``.
-
-Common Issues and Their Solutions
----------------------------------
-
-**Issue:** Tenant scope is not applied to queries.
-
-**Solution:** Make sure you've set the current tenant before executing queries. Use the MultiTenant.with method to set the current tenant. For example:
-
-.. code-block:: ruby
-
-    MultiTenant.with(customer) do
-      site = Site.find(params[:site_id])
-      site.update! last_accessed_at: Time.now
-      site.page_views.count
-    end
-
-
-
-FAQs and Known Limitations
---------------------------
-
-**Q: Can I use multiple tenant models in the same application?**
-
-**A:** Yes, you can declare different tenant models in different ActiveRecord models. However, you can only set one current tenant at a time.
-
-**Q: Does ``activerecord-multi-tenant`` support Rails version 5.X?**
-
-**A:** ``activerecord-multi-tenant`` supports Rails 6.0.0 and later. For older versions of Rails, please use the appropriate version of the gem.
-
-
-
-Reporting Bugs and Requesting Features
---------------------------------------
-
-If you encounter a bug or have a feature request, please open an issue on the `activerecord-multi-tenant GitHub repository <https://github.com/citusdata/activerecord-multi-tenant/issues>`_. Please provide as much detail as possible so we can address the issue effectively.
diff --git a/docs/source/usage-guide.rst b/docs/source/usage-guide.rst
deleted file mode 100644
index 7025a73..0000000
--- a/docs/source/usage-guide.rst
+++ /dev/null
@@ -1,59 +0,0 @@
-.. _usage-guide:
-
-Usage Guide
-===========
-
-This section provides a comprehensive guide on how to use ``activerecord-multi-tenant`` in your Rails application.
-
-Basic Usage
------------
-
-To use ``activerecord-multi-tenant``, you need to declare the tenant model in your ActiveRecord models. Here's an example:
-
-.. code-block:: ruby
-
-    class PageView < ActiveRecord::Base
-      multi_tenant :customer
-      belongs_to :site
-
-      # ...
-    end
-
-    class Site < ActiveRecord::Base
-      multi_tenant :customer
-      has_many :page_views
-
-      # ...
-    end
-
-In this example, the ``PageView`` and ``Site`` models are scoped to the ``Customer`` model. This means that each user belongs to a specific customer.
-
-
-Then wrap all code that runs queries/modifications in blocks like this:
-
-.. code-block:: ruby
-
-    customer = Customer.find(session[:current_customer_id])
-    # ...
-    MultiTenant.with(customer) do
-      site = Site.find(params[:site_id])
-      site.update! last_accessed_at: Time.now
-      site.page_views.count
-    end
-
-Alternatively, if you don't want to use a block, you can set the current tenant explicitly:
-
-.. code-block:: ruby
-
-    customer = Customer.find(session[:current_customer_id])
-    MultiTenant.current_tenant = customer
-
-
-Multi-tenancy Concepts and Terminology
---------------------------------------
-
-Multi-tenancy is a software architecture in which a single instance of software serves multiple tenants. A tenant is a group of users who share a common access with specific privileges to the software instance.
-
-In the context of ``activerecord-multi-tenant``, a tenant is typically represented by a model in your Rails application (e.g., ``Customer``), and other models (e.g., ``PageView``) are scoped to this tenant model.
-
-
diff --git a/gemfiles/.bundle/config b/gemfiles/.bundle/config
new file mode 100644
index 0000000..c127f80
--- /dev/null
+++ b/gemfiles/.bundle/config
@@ -0,0 +1,2 @@
+---
+BUNDLE_RETRY: "1"
diff --git a/gemfiles/active_record_5.2.gemfile b/gemfiles/active_record_5.2.gemfile
new file mode 100644
index 0000000..4088617
--- /dev/null
+++ b/gemfiles/active_record_5.2.gemfile
@@ -0,0 +1,16 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "activerecord", "~> 5.2.0"
+gem "i18n", "~> 0.9.5"
+gem "nokogiri", "~> 1.7.1"
+gem "nio4r", "~> 2.3.1"
+gem "sprockets", "~> 3.7.1"
+gem "byebug", "~> 11.0"
+gem "rake", "12.0.0"
+gem "redis", "3.3.3"
+gem "pry-byebug", "3.9.0"
+
+gemspec path: "../"
diff --git a/gemfiles/active_record_5.2.gemfile.lock b/gemfiles/active_record_5.2.gemfile.lock
new file mode 100644
index 0000000..18b346d
--- /dev/null
+++ b/gemfiles/active_record_5.2.gemfile.lock
@@ -0,0 +1,190 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (5.2.3)
+      actionpack (= 5.2.3)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailer (5.2.3)
+      actionpack (= 5.2.3)
+      actionview (= 5.2.3)
+      activejob (= 5.2.3)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (5.2.3)
+      actionview (= 5.2.3)
+      activesupport (= 5.2.3)
+      rack (~> 2.0)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.0.2)
+    actionview (5.2.3)
+      activesupport (= 5.2.3)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.0.3)
+    activejob (5.2.3)
+      activesupport (= 5.2.3)
+      globalid (>= 0.3.6)
+    activemodel (5.2.3)
+      activesupport (= 5.2.3)
+    activerecord (5.2.3)
+      activemodel (= 5.2.3)
+      activesupport (= 5.2.3)
+      arel (>= 9.0)
+    activestorage (5.2.3)
+      actionpack (= 5.2.3)
+      activerecord (= 5.2.3)
+      marcel (~> 0.3.1)
+    activesupport (5.2.3)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 0.7, < 2)
+      minitest (~> 5.1)
+      tzinfo (~> 1.1)
+    appraisal (2.2.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    arel (9.0.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.2)
+    concurrent-ruby (1.1.6)
+    connection_pool (2.2.2)
+    crass (1.0.6)
+    diff-lcs (1.3)
+    erubi (1.9.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (0.9.5)
+      concurrent-ruby (~> 1.0)
+    loofah (2.5.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.1.0)
+    minitest (5.14.4)
+    nio4r (2.3.1)
+    nokogiri (1.7.2)
+      mini_portile2 (~> 2.1.0)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    rack (2.2.2)
+    rack-protection (2.0.8.1)
+      rack
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (5.2.3)
+      actioncable (= 5.2.3)
+      actionmailer (= 5.2.3)
+      actionpack (= 5.2.3)
+      actionview (= 5.2.3)
+      activejob (= 5.2.3)
+      activemodel (= 5.2.3)
+      activerecord (= 5.2.3)
+      activestorage (= 5.2.3)
+      activesupport (= 5.2.3)
+      bundler (>= 1.3.0)
+      railties (= 5.2.3)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (5.2.3)
+      actionpack (= 5.2.3)
+      activesupport (= 5.2.3)
+      method_source
+      rake (>= 0.8.7)
+      thor (>= 0.19.0, < 2.0)
+    rake (12.0.0)
+    redis (3.3.3)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.9.0)
+      rspec-core (~> 3.9.0)
+      rspec-expectations (~> 3.9.0)
+      rspec-mocks (~> 3.9.0)
+    rspec-core (3.9.2)
+      rspec-support (~> 3.9.3)
+    rspec-expectations (3.9.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-mocks (3.9.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-rails (4.0.1)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.9)
+      rspec-expectations (~> 3.9)
+      rspec-mocks (~> 3.9)
+      rspec-support (~> 3.9)
+    rspec-support (3.9.3)
+    sidekiq (5.0.4)
+      concurrent-ruby (~> 1.0)
+      connection_pool (~> 2.2, >= 2.2.0)
+      rack-protection (>= 1.5.0)
+      redis (~> 3.3, >= 3.3.3)
+    sprockets (3.7.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.2)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    thread_safe (0.3.6)
+    tzinfo (1.2.7)
+      thread_safe (~> 0.1)
+    websocket-driver (0.7.3)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord (~> 5.2.0)
+  activerecord-multi-tenant!
+  appraisal
+  byebug (~> 11.0)
+  i18n (~> 0.9.5)
+  nio4r (~> 2.3.1)
+  nokogiri (~> 1.7.1)
+  pg
+  pry
+  pry-byebug (= 3.9.0)
+  rake (= 12.0.0)
+  redis (= 3.3.3)
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  sprockets (~> 3.7.1)
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/active_record_6.0.gemfile b/gemfiles/active_record_6.0.gemfile
new file mode 100644
index 0000000..34c8499
--- /dev/null
+++ b/gemfiles/active_record_6.0.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "activerecord", "~> 6.0.3"
+
+gemspec path: "../"
diff --git a/gemfiles/active_record_6.0.gemfile.lock b/gemfiles/active_record_6.0.gemfile.lock
new file mode 100644
index 0000000..d5b5787
--- /dev/null
+++ b/gemfiles/active_record_6.0.gemfile.lock
@@ -0,0 +1,202 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      mail (>= 2.7.1)
+    actionmailer (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      actionview (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (6.0.3.1)
+      actionview (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      rack (~> 2.0, >= 2.0.8)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      nokogiri (>= 1.8.5)
+    actionview (6.0.3.1)
+      activesupport (= 6.0.3.1)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (6.0.3.1)
+      activesupport (= 6.0.3.1)
+      globalid (>= 0.3.6)
+    activemodel (6.0.3.1)
+      activesupport (= 6.0.3.1)
+    activerecord (6.0.3.1)
+      activemodel (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+    activestorage (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      marcel (~> 0.3.1)
+    activesupport (6.0.3.1)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 0.7, < 2)
+      minitest (~> 5.1)
+      tzinfo (~> 1.1)
+      zeitwerk (~> 2.2, >= 2.2.2)
+    appraisal (2.2.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.2)
+    concurrent-ruby (1.1.6)
+    connection_pool (2.2.2)
+    crass (1.0.6)
+    diff-lcs (1.3)
+    erubi (1.9.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (1.8.2)
+      concurrent-ruby (~> 1.0)
+    loofah (2.5.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.6.1)
+    minitest (5.14.4)
+    nio4r (2.5.4)
+    nokogiri (1.12.5)
+      mini_portile2 (~> 2.6.1)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.2)
+    rack-protection (2.0.8.1)
+      rack
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (6.0.3.1)
+      actioncable (= 6.0.3.1)
+      actionmailbox (= 6.0.3.1)
+      actionmailer (= 6.0.3.1)
+      actionpack (= 6.0.3.1)
+      actiontext (= 6.0.3.1)
+      actionview (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activemodel (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      bundler (>= 1.3.0)
+      railties (= 6.0.3.1)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      method_source
+      rake (>= 0.8.7)
+      thor (>= 0.20.3, < 2.0)
+    rake (13.0.6)
+    redis (4.1.4)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.9.0)
+      rspec-core (~> 3.9.0)
+      rspec-expectations (~> 3.9.0)
+      rspec-mocks (~> 3.9.0)
+    rspec-core (3.9.2)
+      rspec-support (~> 3.9.3)
+    rspec-expectations (3.9.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-mocks (3.9.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-rails (4.0.1)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.9)
+      rspec-expectations (~> 3.9)
+      rspec-mocks (~> 3.9)
+      rspec-support (~> 3.9)
+    rspec-support (3.9.3)
+    sidekiq (6.0.7)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      rack-protection (>= 2.0.0)
+      redis (>= 4.1.0)
+    sprockets (4.0.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.2)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    thread_safe (0.3.6)
+    tzinfo (1.2.7)
+      thread_safe (~> 0.1)
+    websocket-driver (0.7.3)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.3.0)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord (~> 6.0.3)
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/active_record_6.1.gemfile b/gemfiles/active_record_6.1.gemfile
new file mode 100644
index 0000000..ea2599c
--- /dev/null
+++ b/gemfiles/active_record_6.1.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "activerecord", "~> 6.1.0"
+
+gemspec path: "../"
diff --git a/gemfiles/active_record_6.1.gemfile.lock b/gemfiles/active_record_6.1.gemfile.lock
new file mode 100644
index 0000000..a2ce68d
--- /dev/null
+++ b/gemfiles/active_record_6.1.gemfile.lock
@@ -0,0 +1,202 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (6.1.0)
+      actionpack (= 6.1.0)
+      activesupport (= 6.1.0)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (6.1.0)
+      actionpack (= 6.1.0)
+      activejob (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      mail (>= 2.7.1)
+    actionmailer (6.1.0)
+      actionpack (= 6.1.0)
+      actionview (= 6.1.0)
+      activejob (= 6.1.0)
+      activesupport (= 6.1.0)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (6.1.0)
+      actionview (= 6.1.0)
+      activesupport (= 6.1.0)
+      rack (~> 2.0, >= 2.0.9)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (6.1.0)
+      actionpack (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      nokogiri (>= 1.8.5)
+    actionview (6.1.0)
+      activesupport (= 6.1.0)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (6.1.0)
+      activesupport (= 6.1.0)
+      globalid (>= 0.3.6)
+    activemodel (6.1.0)
+      activesupport (= 6.1.0)
+    activerecord (6.1.0)
+      activemodel (= 6.1.0)
+      activesupport (= 6.1.0)
+    activestorage (6.1.0)
+      actionpack (= 6.1.0)
+      activejob (= 6.1.0)
+      activerecord (= 6.1.0)
+      activesupport (= 6.1.0)
+      marcel (~> 0.3.1)
+      mimemagic (~> 0.3.2)
+    activesupport (6.1.0)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 1.6, < 2)
+      minitest (>= 5.1)
+      tzinfo (~> 2.0)
+      zeitwerk (~> 2.3)
+    appraisal (2.3.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.3)
+    concurrent-ruby (1.1.7)
+    connection_pool (2.2.3)
+    crass (1.0.6)
+    diff-lcs (1.4.4)
+    erubi (1.10.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (1.8.5)
+      concurrent-ruby (~> 1.0)
+    loofah (2.8.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.6.1)
+    minitest (5.14.4)
+    nio4r (2.5.4)
+    nokogiri (1.12.5)
+      mini_portile2 (~> 2.6.1)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.3)
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (6.1.0)
+      actioncable (= 6.1.0)
+      actionmailbox (= 6.1.0)
+      actionmailer (= 6.1.0)
+      actionpack (= 6.1.0)
+      actiontext (= 6.1.0)
+      actionview (= 6.1.0)
+      activejob (= 6.1.0)
+      activemodel (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      bundler (>= 1.15.0)
+      railties (= 6.1.0)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (6.1.0)
+      actionpack (= 6.1.0)
+      activesupport (= 6.1.0)
+      method_source
+      rake (>= 0.8.7)
+      thor (~> 1.0)
+    rake (13.0.6)
+    redis (4.2.5)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.10.0)
+      rspec-core (~> 3.10.0)
+      rspec-expectations (~> 3.10.0)
+      rspec-mocks (~> 3.10.0)
+    rspec-core (3.10.1)
+      rspec-support (~> 3.10.0)
+    rspec-expectations (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-mocks (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-rails (4.0.2)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.10)
+      rspec-expectations (~> 3.10)
+      rspec-mocks (~> 3.10)
+      rspec-support (~> 3.10)
+    rspec-support (3.10.1)
+    sidekiq (6.1.2)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      redis (>= 4.2.0)
+    sprockets (4.0.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.2)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    tzinfo (2.0.4)
+      concurrent-ruby (~> 1.0)
+    websocket-driver (0.7.3)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.4.2)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord (~> 6.1.0)
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/active_record_7.0.gemfile b/gemfiles/active_record_7.0.gemfile
new file mode 100644
index 0000000..76f57c2
--- /dev/null
+++ b/gemfiles/active_record_7.0.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "activerecord", "~> 7.0.0"
+
+gemspec path: "../"
diff --git a/gemfiles/active_record_7.0.gemfile.lock b/gemfiles/active_record_7.0.gemfile.lock
new file mode 100644
index 0000000..d0e12e4
--- /dev/null
+++ b/gemfiles/active_record_7.0.gemfile.lock
@@ -0,0 +1,189 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (7.0.0)
+      actionpack (= 7.0.0)
+      activesupport (= 7.0.0)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (7.0.0)
+      actionpack (= 7.0.0)
+      activejob (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      mail (>= 2.7.1)
+    actionmailer (7.0.0)
+      actionpack (= 7.0.0)
+      actionview (= 7.0.0)
+      activejob (= 7.0.0)
+      activesupport (= 7.0.0)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (7.0.0)
+      actionview (= 7.0.0)
+      activesupport (= 7.0.0)
+      rack (~> 2.0, >= 2.2.0)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (7.0.0)
+      actionpack (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      globalid (>= 0.6.0)
+      nokogiri (>= 1.8.5)
+    actionview (7.0.0)
+      activesupport (= 7.0.0)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (7.0.0)
+      activesupport (= 7.0.0)
+      globalid (>= 0.3.6)
+    activemodel (7.0.0)
+      activesupport (= 7.0.0)
+    activerecord (7.0.0)
+      activemodel (= 7.0.0)
+      activesupport (= 7.0.0)
+    activestorage (7.0.0)
+      actionpack (= 7.0.0)
+      activejob (= 7.0.0)
+      activerecord (= 7.0.0)
+      activesupport (= 7.0.0)
+      marcel (~> 1.0)
+      mini_mime (>= 1.1.0)
+    activesupport (7.0.0)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 1.6, < 2)
+      minitest (>= 5.1)
+      tzinfo (~> 2.0)
+    appraisal (2.4.1)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.3)
+    concurrent-ruby (1.1.9)
+    connection_pool (2.2.5)
+    crass (1.0.6)
+    diff-lcs (1.4.4)
+    erubi (1.10.0)
+    globalid (1.0.0)
+      activesupport (>= 5.0)
+    i18n (1.8.11)
+      concurrent-ruby (~> 1.0)
+    loofah (2.13.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (1.0.2)
+    method_source (1.0.0)
+    mini_mime (1.1.2)
+    minitest (5.15.0)
+    nio4r (2.5.8)
+    nokogiri (1.12.5-x86_64-darwin)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.3)
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (7.0.0)
+      actioncable (= 7.0.0)
+      actionmailbox (= 7.0.0)
+      actionmailer (= 7.0.0)
+      actionpack (= 7.0.0)
+      actiontext (= 7.0.0)
+      actionview (= 7.0.0)
+      activejob (= 7.0.0)
+      activemodel (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      bundler (>= 1.15.0)
+      railties (= 7.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.4.2)
+      loofah (~> 2.3)
+    railties (7.0.0)
+      actionpack (= 7.0.0)
+      activesupport (= 7.0.0)
+      method_source
+      rake (>= 12.2)
+      thor (~> 1.0)
+      zeitwerk (~> 2.5)
+    rake (13.0.6)
+    redis (4.5.1)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.10.0)
+      rspec-core (~> 3.10.0)
+      rspec-expectations (~> 3.10.0)
+      rspec-mocks (~> 3.10.0)
+    rspec-core (3.10.1)
+      rspec-support (~> 3.10.0)
+    rspec-expectations (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-mocks (3.10.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-rails (5.0.2)
+      actionpack (>= 5.2)
+      activesupport (>= 5.2)
+      railties (>= 5.2)
+      rspec-core (~> 3.10)
+      rspec-expectations (~> 3.10)
+      rspec-mocks (~> 3.10)
+      rspec-support (~> 3.10)
+    rspec-support (3.10.3)
+    sidekiq (6.3.1)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      redis (>= 4.2.0)
+    thor (1.1.0)
+    tzinfo (2.0.4)
+      concurrent-ruby (~> 1.0)
+    websocket-driver (0.7.5)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.5.1)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord (~> 7.0.0)
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/rails_5.2.gemfile b/gemfiles/rails_5.2.gemfile
new file mode 100644
index 0000000..3124d81
--- /dev/null
+++ b/gemfiles/rails_5.2.gemfile
@@ -0,0 +1,16 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "rails", "~> 5.2.0"
+gem "i18n", "~> 0.9.5"
+gem "nokogiri", "~> 1.7.1"
+gem "nio4r", "~> 2.3.1"
+gem "sprockets", "~> 3.7.1"
+gem "byebug", "~> 11.0"
+gem "rake", "12.0.0"
+gem "redis", "3.3.3"
+gem "pry-byebug", "3.9.0"
+
+gemspec path: "../"
diff --git a/gemfiles/rails_5.2.gemfile.lock b/gemfiles/rails_5.2.gemfile.lock
new file mode 100644
index 0000000..066002b
--- /dev/null
+++ b/gemfiles/rails_5.2.gemfile.lock
@@ -0,0 +1,190 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (5.2.3)
+      actionpack (= 5.2.3)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailer (5.2.3)
+      actionpack (= 5.2.3)
+      actionview (= 5.2.3)
+      activejob (= 5.2.3)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (5.2.3)
+      actionview (= 5.2.3)
+      activesupport (= 5.2.3)
+      rack (~> 2.0)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.0.2)
+    actionview (5.2.3)
+      activesupport (= 5.2.3)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.0.3)
+    activejob (5.2.3)
+      activesupport (= 5.2.3)
+      globalid (>= 0.3.6)
+    activemodel (5.2.3)
+      activesupport (= 5.2.3)
+    activerecord (5.2.3)
+      activemodel (= 5.2.3)
+      activesupport (= 5.2.3)
+      arel (>= 9.0)
+    activestorage (5.2.3)
+      actionpack (= 5.2.3)
+      activerecord (= 5.2.3)
+      marcel (~> 0.3.1)
+    activesupport (5.2.3)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 0.7, < 2)
+      minitest (~> 5.1)
+      tzinfo (~> 1.1)
+    appraisal (2.2.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    arel (9.0.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.2)
+    concurrent-ruby (1.1.6)
+    connection_pool (2.2.2)
+    crass (1.0.6)
+    diff-lcs (1.3)
+    erubi (1.9.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (0.9.5)
+      concurrent-ruby (~> 1.0)
+    loofah (2.5.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.1.0)
+    minitest (5.14.4)
+    nio4r (2.3.1)
+    nokogiri (1.7.2)
+      mini_portile2 (~> 2.1.0)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    rack (2.2.2)
+    rack-protection (2.0.8.1)
+      rack
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (5.2.3)
+      actioncable (= 5.2.3)
+      actionmailer (= 5.2.3)
+      actionpack (= 5.2.3)
+      actionview (= 5.2.3)
+      activejob (= 5.2.3)
+      activemodel (= 5.2.3)
+      activerecord (= 5.2.3)
+      activestorage (= 5.2.3)
+      activesupport (= 5.2.3)
+      bundler (>= 1.3.0)
+      railties (= 5.2.3)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (5.2.3)
+      actionpack (= 5.2.3)
+      activesupport (= 5.2.3)
+      method_source
+      rake (>= 0.8.7)
+      thor (>= 0.19.0, < 2.0)
+    rake (12.0.0)
+    redis (3.3.3)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.9.0)
+      rspec-core (~> 3.9.0)
+      rspec-expectations (~> 3.9.0)
+      rspec-mocks (~> 3.9.0)
+    rspec-core (3.9.2)
+      rspec-support (~> 3.9.3)
+    rspec-expectations (3.9.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-mocks (3.9.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-rails (4.0.1)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.9)
+      rspec-expectations (~> 3.9)
+      rspec-mocks (~> 3.9)
+      rspec-support (~> 3.9)
+    rspec-support (3.9.3)
+    sidekiq (5.0.4)
+      concurrent-ruby (~> 1.0)
+      connection_pool (~> 2.2, >= 2.2.0)
+      rack-protection (>= 1.5.0)
+      redis (~> 3.3, >= 3.3.3)
+    sprockets (3.7.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.1)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    thread_safe (0.3.6)
+    tzinfo (1.2.7)
+      thread_safe (~> 0.1)
+    websocket-driver (0.7.2)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.4)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord-multi-tenant!
+  appraisal
+  byebug (~> 11.0)
+  i18n (~> 0.9.5)
+  nio4r (~> 2.3.1)
+  nokogiri (~> 1.7.1)
+  pg
+  pry
+  pry-byebug (= 3.9.0)
+  rails (~> 5.2.0)
+  rake (= 12.0.0)
+  redis (= 3.3.3)
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  sprockets (~> 3.7.1)
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/rails_6.0.gemfile b/gemfiles/rails_6.0.gemfile
new file mode 100644
index 0000000..def1fb3
--- /dev/null
+++ b/gemfiles/rails_6.0.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "rails", "~> 6.0.3"
+
+gemspec path: "../"
diff --git a/gemfiles/rails_6.0.gemfile.lock b/gemfiles/rails_6.0.gemfile.lock
new file mode 100644
index 0000000..573ce8c
--- /dev/null
+++ b/gemfiles/rails_6.0.gemfile.lock
@@ -0,0 +1,202 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      mail (>= 2.7.1)
+    actionmailer (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      actionview (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (6.0.3.1)
+      actionview (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      rack (~> 2.0, >= 2.0.8)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      nokogiri (>= 1.8.5)
+    actionview (6.0.3.1)
+      activesupport (= 6.0.3.1)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (6.0.3.1)
+      activesupport (= 6.0.3.1)
+      globalid (>= 0.3.6)
+    activemodel (6.0.3.1)
+      activesupport (= 6.0.3.1)
+    activerecord (6.0.3.1)
+      activemodel (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+    activestorage (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      marcel (~> 0.3.1)
+    activesupport (6.0.3.1)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 0.7, < 2)
+      minitest (~> 5.1)
+      tzinfo (~> 1.1)
+      zeitwerk (~> 2.2, >= 2.2.2)
+    appraisal (2.2.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.2)
+    concurrent-ruby (1.1.6)
+    connection_pool (2.2.2)
+    crass (1.0.6)
+    diff-lcs (1.3)
+    erubi (1.9.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (1.8.2)
+      concurrent-ruby (~> 1.0)
+    loofah (2.5.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.6.1)
+    minitest (5.14.4)
+    nio4r (2.5.2)
+    nokogiri (1.12.5)
+      mini_portile2 (~> 2.6.1)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.2)
+    rack-protection (2.0.8.1)
+      rack
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (6.0.3.1)
+      actioncable (= 6.0.3.1)
+      actionmailbox (= 6.0.3.1)
+      actionmailer (= 6.0.3.1)
+      actionpack (= 6.0.3.1)
+      actiontext (= 6.0.3.1)
+      actionview (= 6.0.3.1)
+      activejob (= 6.0.3.1)
+      activemodel (= 6.0.3.1)
+      activerecord (= 6.0.3.1)
+      activestorage (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      bundler (>= 1.3.0)
+      railties (= 6.0.3.1)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (6.0.3.1)
+      actionpack (= 6.0.3.1)
+      activesupport (= 6.0.3.1)
+      method_source
+      rake (>= 0.8.7)
+      thor (>= 0.20.3, < 2.0)
+    rake (13.0.6)
+    redis (4.1.4)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.9.0)
+      rspec-core (~> 3.9.0)
+      rspec-expectations (~> 3.9.0)
+      rspec-mocks (~> 3.9.0)
+    rspec-core (3.9.2)
+      rspec-support (~> 3.9.3)
+    rspec-expectations (3.9.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-mocks (3.9.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.9.0)
+    rspec-rails (4.0.1)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.9)
+      rspec-expectations (~> 3.9)
+      rspec-mocks (~> 3.9)
+      rspec-support (~> 3.9)
+    rspec-support (3.9.3)
+    sidekiq (6.0.7)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      rack-protection (>= 2.0.0)
+      redis (>= 4.1.0)
+    sprockets (4.0.0)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.1)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    thread_safe (0.3.6)
+    tzinfo (1.2.7)
+      thread_safe (~> 0.1)
+    websocket-driver (0.7.2)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.4)
+    zeitwerk (2.3.0)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rails (~> 6.0.3)
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/rails_6.1.gemfile b/gemfiles/rails_6.1.gemfile
new file mode 100644
index 0000000..9b9a89f
--- /dev/null
+++ b/gemfiles/rails_6.1.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "rails", "~> 6.1.0"
+
+gemspec path: "../"
diff --git a/gemfiles/rails_6.1.gemfile.lock b/gemfiles/rails_6.1.gemfile.lock
new file mode 100644
index 0000000..03a1fe9
--- /dev/null
+++ b/gemfiles/rails_6.1.gemfile.lock
@@ -0,0 +1,202 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (6.1.0)
+      actionpack (= 6.1.0)
+      activesupport (= 6.1.0)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (6.1.0)
+      actionpack (= 6.1.0)
+      activejob (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      mail (>= 2.7.1)
+    actionmailer (6.1.0)
+      actionpack (= 6.1.0)
+      actionview (= 6.1.0)
+      activejob (= 6.1.0)
+      activesupport (= 6.1.0)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (6.1.0)
+      actionview (= 6.1.0)
+      activesupport (= 6.1.0)
+      rack (~> 2.0, >= 2.0.9)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (6.1.0)
+      actionpack (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      nokogiri (>= 1.8.5)
+    actionview (6.1.0)
+      activesupport (= 6.1.0)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (6.1.0)
+      activesupport (= 6.1.0)
+      globalid (>= 0.3.6)
+    activemodel (6.1.0)
+      activesupport (= 6.1.0)
+    activerecord (6.1.0)
+      activemodel (= 6.1.0)
+      activesupport (= 6.1.0)
+    activestorage (6.1.0)
+      actionpack (= 6.1.0)
+      activejob (= 6.1.0)
+      activerecord (= 6.1.0)
+      activesupport (= 6.1.0)
+      marcel (~> 0.3.1)
+      mimemagic (~> 0.3.2)
+    activesupport (6.1.0)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 1.6, < 2)
+      minitest (>= 5.1)
+      tzinfo (~> 2.0)
+      zeitwerk (~> 2.3)
+    appraisal (2.3.0)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.3)
+    concurrent-ruby (1.1.7)
+    connection_pool (2.2.3)
+    crass (1.0.6)
+    diff-lcs (1.4.4)
+    erubi (1.10.0)
+    globalid (0.4.2)
+      activesupport (>= 4.2.0)
+    i18n (1.8.5)
+      concurrent-ruby (~> 1.0)
+    loofah (2.8.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (0.3.3)
+      mimemagic (~> 0.3.2)
+    method_source (1.0.0)
+    mimemagic (0.3.10)
+      nokogiri (~> 1)
+      rake
+    mini_mime (1.0.2)
+    mini_portile2 (2.6.1)
+    minitest (5.14.4)
+    nio4r (2.5.4)
+    nokogiri (1.12.5)
+      mini_portile2 (~> 2.6.1)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.3)
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (6.1.0)
+      actioncable (= 6.1.0)
+      actionmailbox (= 6.1.0)
+      actionmailer (= 6.1.0)
+      actionpack (= 6.1.0)
+      actiontext (= 6.1.0)
+      actionview (= 6.1.0)
+      activejob (= 6.1.0)
+      activemodel (= 6.1.0)
+      activerecord (= 6.1.0)
+      activestorage (= 6.1.0)
+      activesupport (= 6.1.0)
+      bundler (>= 1.15.0)
+      railties (= 6.1.0)
+      sprockets-rails (>= 2.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.3.0)
+      loofah (~> 2.3)
+    railties (6.1.0)
+      actionpack (= 6.1.0)
+      activesupport (= 6.1.0)
+      method_source
+      rake (>= 0.8.7)
+      thor (~> 1.0)
+    rake (13.0.6)
+    redis (4.2.5)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.10.0)
+      rspec-core (~> 3.10.0)
+      rspec-expectations (~> 3.10.0)
+      rspec-mocks (~> 3.10.0)
+    rspec-core (3.10.1)
+      rspec-support (~> 3.10.0)
+    rspec-expectations (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-mocks (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-rails (4.0.2)
+      actionpack (>= 4.2)
+      activesupport (>= 4.2)
+      railties (>= 4.2)
+      rspec-core (~> 3.10)
+      rspec-expectations (~> 3.10)
+      rspec-mocks (~> 3.10)
+      rspec-support (~> 3.10)
+    rspec-support (3.10.1)
+    sidekiq (6.1.2)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      redis (>= 4.2.0)
+    sprockets (4.0.2)
+      concurrent-ruby (~> 1.0)
+      rack (> 1, < 3)
+    sprockets-rails (3.2.2)
+      actionpack (>= 4.0)
+      activesupport (>= 4.0)
+      sprockets (>= 3.0.0)
+    thor (1.0.1)
+    tzinfo (2.0.4)
+      concurrent-ruby (~> 1.0)
+    websocket-driver (0.7.3)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.4.2)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rails (~> 6.1.0)
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/gemfiles/rails_7.0.gemfile b/gemfiles/rails_7.0.gemfile
new file mode 100644
index 0000000..7588759
--- /dev/null
+++ b/gemfiles/rails_7.0.gemfile
@@ -0,0 +1,8 @@
+# This file was generated by Appraisal
+
+source "https://rubygems.org"
+
+gem "appraisal"
+gem "rails", "~> 7.0.0"
+
+gemspec path: "../"
diff --git a/gemfiles/rails_7.0.gemfile.lock b/gemfiles/rails_7.0.gemfile.lock
new file mode 100644
index 0000000..cf86a62
--- /dev/null
+++ b/gemfiles/rails_7.0.gemfile.lock
@@ -0,0 +1,189 @@
+PATH
+  remote: ..
+  specs:
+    activerecord-multi-tenant (1.1.1)
+      rails (>= 4.2)
+      request_store (>= 1.0.5)
+
+GEM
+  remote: https://rubygems.org/
+  specs:
+    actioncable (7.0.0)
+      actionpack (= 7.0.0)
+      activesupport (= 7.0.0)
+      nio4r (~> 2.0)
+      websocket-driver (>= 0.6.1)
+    actionmailbox (7.0.0)
+      actionpack (= 7.0.0)
+      activejob (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      mail (>= 2.7.1)
+    actionmailer (7.0.0)
+      actionpack (= 7.0.0)
+      actionview (= 7.0.0)
+      activejob (= 7.0.0)
+      activesupport (= 7.0.0)
+      mail (~> 2.5, >= 2.5.4)
+      rails-dom-testing (~> 2.0)
+    actionpack (7.0.0)
+      actionview (= 7.0.0)
+      activesupport (= 7.0.0)
+      rack (~> 2.0, >= 2.2.0)
+      rack-test (>= 0.6.3)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.0, >= 1.2.0)
+    actiontext (7.0.0)
+      actionpack (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      globalid (>= 0.6.0)
+      nokogiri (>= 1.8.5)
+    actionview (7.0.0)
+      activesupport (= 7.0.0)
+      builder (~> 3.1)
+      erubi (~> 1.4)
+      rails-dom-testing (~> 2.0)
+      rails-html-sanitizer (~> 1.1, >= 1.2.0)
+    activejob (7.0.0)
+      activesupport (= 7.0.0)
+      globalid (>= 0.3.6)
+    activemodel (7.0.0)
+      activesupport (= 7.0.0)
+    activerecord (7.0.0)
+      activemodel (= 7.0.0)
+      activesupport (= 7.0.0)
+    activestorage (7.0.0)
+      actionpack (= 7.0.0)
+      activejob (= 7.0.0)
+      activerecord (= 7.0.0)
+      activesupport (= 7.0.0)
+      marcel (~> 1.0)
+      mini_mime (>= 1.1.0)
+    activesupport (7.0.0)
+      concurrent-ruby (~> 1.0, >= 1.0.2)
+      i18n (>= 1.6, < 2)
+      minitest (>= 5.1)
+      tzinfo (~> 2.0)
+    appraisal (2.4.1)
+      bundler
+      rake
+      thor (>= 0.14.0)
+    builder (3.2.4)
+    byebug (11.1.3)
+    coderay (1.1.3)
+    concurrent-ruby (1.1.9)
+    connection_pool (2.2.5)
+    crass (1.0.6)
+    diff-lcs (1.4.4)
+    erubi (1.10.0)
+    globalid (1.0.0)
+      activesupport (>= 5.0)
+    i18n (1.8.11)
+      concurrent-ruby (~> 1.0)
+    loofah (2.13.0)
+      crass (~> 1.0.2)
+      nokogiri (>= 1.5.9)
+    mail (2.7.1)
+      mini_mime (>= 0.1.1)
+    marcel (1.0.2)
+    method_source (1.0.0)
+    mini_mime (1.1.2)
+    minitest (5.15.0)
+    nio4r (2.5.8)
+    nokogiri (1.12.5-x86_64-darwin)
+      racc (~> 1.4)
+    pg (1.2.3)
+    pry (0.13.1)
+      coderay (~> 1.1)
+      method_source (~> 1.0)
+    pry-byebug (3.9.0)
+      byebug (~> 11.0)
+      pry (~> 0.13.0)
+    racc (1.6.0)
+    rack (2.2.3)
+    rack-test (1.1.0)
+      rack (>= 1.0, < 3)
+    rails (7.0.0)
+      actioncable (= 7.0.0)
+      actionmailbox (= 7.0.0)
+      actionmailer (= 7.0.0)
+      actionpack (= 7.0.0)
+      actiontext (= 7.0.0)
+      actionview (= 7.0.0)
+      activejob (= 7.0.0)
+      activemodel (= 7.0.0)
+      activerecord (= 7.0.0)
+      activestorage (= 7.0.0)
+      activesupport (= 7.0.0)
+      bundler (>= 1.15.0)
+      railties (= 7.0.0)
+    rails-dom-testing (2.0.3)
+      activesupport (>= 4.2.0)
+      nokogiri (>= 1.6)
+    rails-html-sanitizer (1.4.2)
+      loofah (~> 2.3)
+    railties (7.0.0)
+      actionpack (= 7.0.0)
+      activesupport (= 7.0.0)
+      method_source
+      rake (>= 12.2)
+      thor (~> 1.0)
+      zeitwerk (~> 2.5)
+    rake (13.0.6)
+    redis (4.5.1)
+    request_store (1.5.0)
+      rack (>= 1.4)
+    rspec (3.10.0)
+      rspec-core (~> 3.10.0)
+      rspec-expectations (~> 3.10.0)
+      rspec-mocks (~> 3.10.0)
+    rspec-core (3.10.1)
+      rspec-support (~> 3.10.0)
+    rspec-expectations (3.10.1)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-mocks (3.10.2)
+      diff-lcs (>= 1.2.0, < 2.0)
+      rspec-support (~> 3.10.0)
+    rspec-rails (5.0.2)
+      actionpack (>= 5.2)
+      activesupport (>= 5.2)
+      railties (>= 5.2)
+      rspec-core (~> 3.10)
+      rspec-expectations (~> 3.10)
+      rspec-mocks (~> 3.10)
+      rspec-support (~> 3.10)
+    rspec-support (3.10.3)
+    sidekiq (6.3.1)
+      connection_pool (>= 2.2.2)
+      rack (~> 2.0)
+      redis (>= 4.2.0)
+    thor (1.1.0)
+    tzinfo (2.0.4)
+      concurrent-ruby (~> 1.0)
+    websocket-driver (0.7.5)
+      websocket-extensions (>= 0.1.0)
+    websocket-extensions (0.1.5)
+    zeitwerk (2.5.1)
+
+PLATFORMS
+  ruby
+
+DEPENDENCIES
+  activerecord-multi-tenant!
+  appraisal
+  pg
+  pry
+  pry-byebug
+  rails (~> 7.0.0)
+  rake
+  rspec (>= 3.0)
+  rspec-rails
+  sidekiq
+  thor
+
+BUNDLED WITH
+   2.2.22
diff --git a/lib/activerecord-multi-tenant.rb b/lib/activerecord-multi-tenant.rb
index 07fb6f5..f1e306a 100644
--- a/lib/activerecord-multi-tenant.rb
+++ b/lib/activerecord-multi-tenant.rb
@@ -1,3 +1,13 @@
-# frozen_string_literal: true
-
-require 'activerecord_multi_tenant'
+if Object.const_defined?(:ActionController)
+  require_relative 'activerecord-multi-tenant/controller_extensions'
+end
+require_relative 'activerecord-multi-tenant/copy_from_client'
+require_relative 'activerecord-multi-tenant/fast_truncate'
+require_relative 'activerecord-multi-tenant/migrations'
+require_relative 'activerecord-multi-tenant/model_extensions'
+require_relative 'activerecord-multi-tenant/multi_tenant'
+require_relative 'activerecord-multi-tenant/query_rewriter'
+require_relative 'activerecord-multi-tenant/query_monitor'
+require_relative 'activerecord-multi-tenant/version'
+require_relative 'activerecord-multi-tenant/with_lock'
+require_relative 'activerecord-multi-tenant/persistence_extension'
diff --git a/lib/activerecord-multi-tenant/arel_visitors_depth_first.rb b/lib/activerecord-multi-tenant/arel_visitors_depth_first.rb
index a0c0f3b..5a3a18d 100644
--- a/lib/activerecord-multi-tenant/arel_visitors_depth_first.rb
+++ b/lib/activerecord-multi-tenant/arel_visitors_depth_first.rb
@@ -1,209 +1,200 @@
-# frozen_string_literal: true
-
 module MultiTenant
   class ArelVisitorsDepthFirst < Arel::Visitors::Visitor
     def initialize(block = nil)
-      @block = block || proc
+      @block = block || Proc.new
       super()
     end
 
     private
 
-    def visit(obj, _ = nil)
-      super
-      @block.call obj
-    end
+      def visit(o, _ = nil)
+        super
+        @block.call o
+      end
 
-    def unary(obj)
-      visit obj.expr
-    end
-    alias visit_Arel_Nodes_Else              unary
-    alias visit_Arel_Nodes_Group             unary
-    alias visit_Arel_Nodes_Cube              unary
-    alias visit_Arel_Nodes_RollUp            unary
-    alias visit_Arel_Nodes_GroupingSet       unary
-    alias visit_Arel_Nodes_GroupingElement   unary
-    alias visit_Arel_Nodes_Grouping          unary
-    alias visit_Arel_Nodes_Having            unary
-    alias visit_Arel_Nodes_Lateral           unary
-    alias visit_Arel_Nodes_Limit             unary
-    alias visit_Arel_Nodes_Not               unary
-    alias visit_Arel_Nodes_Offset            unary
-    alias visit_Arel_Nodes_On                unary
-    alias visit_Arel_Nodes_Ordering          unary
-    alias visit_Arel_Nodes_Ascending         unary
-    alias visit_Arel_Nodes_Descending        unary
-    alias visit_Arel_Nodes_UnqualifiedColumn unary
-    alias visit_Arel_Nodes_OptimizerHints    unary
-    alias visit_Arel_Nodes_ValuesList        unary
-
-    def function(obj)
-      visit obj.expressions
-      visit obj.alias
-      visit obj.distinct
-    end
-    alias visit_Arel_Nodes_Avg    function
-    alias visit_Arel_Nodes_Exists function
-    alias visit_Arel_Nodes_Max    function
-    alias visit_Arel_Nodes_Min    function
-    alias visit_Arel_Nodes_Sum    function
-
-    # rubocop:disable Naming/MethodName
-
-    def visit_Arel_Nodes_NamedFunction(obj)
-      visit obj.name
-      visit obj.expressions
-      visit obj.distinct
-      visit obj.alias
-    end
+      def unary(o)
+        visit o.expr
+      end
+      alias :visit_Arel_Nodes_Else              :unary
+      alias :visit_Arel_Nodes_Group             :unary
+      alias :visit_Arel_Nodes_Cube              :unary
+      alias :visit_Arel_Nodes_RollUp            :unary
+      alias :visit_Arel_Nodes_GroupingSet       :unary
+      alias :visit_Arel_Nodes_GroupingElement   :unary
+      alias :visit_Arel_Nodes_Grouping          :unary
+      alias :visit_Arel_Nodes_Having            :unary
+      alias :visit_Arel_Nodes_Lateral           :unary
+      alias :visit_Arel_Nodes_Limit             :unary
+      alias :visit_Arel_Nodes_Not               :unary
+      alias :visit_Arel_Nodes_Offset            :unary
+      alias :visit_Arel_Nodes_On                :unary
+      alias :visit_Arel_Nodes_Ordering          :unary
+      alias :visit_Arel_Nodes_Ascending         :unary
+      alias :visit_Arel_Nodes_Descending        :unary
+      alias :visit_Arel_Nodes_UnqualifiedColumn :unary
+      alias :visit_Arel_Nodes_OptimizerHints    :unary
+      alias :visit_Arel_Nodes_ValuesList        :unary
+
+      def function(o)
+        visit o.expressions
+        visit o.alias
+        visit o.distinct
+      end
+      alias :visit_Arel_Nodes_Avg    :function
+      alias :visit_Arel_Nodes_Exists :function
+      alias :visit_Arel_Nodes_Max    :function
+      alias :visit_Arel_Nodes_Min    :function
+      alias :visit_Arel_Nodes_Sum    :function
+
+      def visit_Arel_Nodes_NamedFunction(o)
+        visit o.name
+        visit o.expressions
+        visit o.distinct
+        visit o.alias
+      end
 
-    def visit_Arel_Nodes_Count(obj)
-      visit obj.expressions
-      visit obj.alias
-      visit obj.distinct
-    end
+      def visit_Arel_Nodes_Count(o)
+        visit o.expressions
+        visit o.alias
+        visit o.distinct
+      end
 
-    def visit_Arel_Nodes_Case(obj)
-      visit obj.case
-      visit obj.conditions
-      visit obj.default
-    end
+      def visit_Arel_Nodes_Case(o)
+        visit o.case
+        visit o.conditions
+        visit o.default
+      end
 
-    def nary(obj)
-      obj.children.each { |child| visit child }
-    end
-    alias visit_Arel_Nodes_And nary
+      def nary(o)
+        o.children.each { |child| visit child }
+      end
+      alias :visit_Arel_Nodes_And :nary
 
-    def binary(obj)
-      visit obj.left
-      visit obj.right
-    end
-    alias visit_Arel_Nodes_As                 binary
-    alias visit_Arel_Nodes_Assignment         binary
-    alias visit_Arel_Nodes_Between            binary
-    alias visit_Arel_Nodes_Concat             binary
-    alias visit_Arel_Nodes_DeleteStatement    binary
-    alias visit_Arel_Nodes_DoesNotMatch       binary
-    alias visit_Arel_Nodes_Equality           binary
-    alias visit_Arel_Nodes_FullOuterJoin      binary
-    alias visit_Arel_Nodes_GreaterThan        binary
-    alias visit_Arel_Nodes_GreaterThanOrEqual binary
-    alias visit_Arel_Nodes_In                 binary
-    alias visit_Arel_Nodes_InfixOperation     binary
-    alias visit_Arel_Nodes_JoinSource         binary
-    alias visit_Arel_Nodes_InnerJoin          binary
-    alias visit_Arel_Nodes_LessThan           binary
-    alias visit_Arel_Nodes_LessThanOrEqual    binary
-    alias visit_Arel_Nodes_Matches            binary
-    alias visit_Arel_Nodes_NotEqual           binary
-    alias visit_Arel_Nodes_NotIn              binary
-    alias visit_Arel_Nodes_NotRegexp          binary
-    alias visit_Arel_Nodes_IsNotDistinctFrom  binary
-    alias visit_Arel_Nodes_IsDistinctFrom     binary
-    alias visit_Arel_Nodes_Or                 binary
-    alias visit_Arel_Nodes_OuterJoin          binary
-    alias visit_Arel_Nodes_Regexp             binary
-    alias visit_Arel_Nodes_RightOuterJoin     binary
-    alias visit_Arel_Nodes_TableAlias         binary
-    alias visit_Arel_Nodes_When               binary
-
-    def visit_Arel_Nodes_StringJoin(obj)
-      visit obj.left
-    end
+      def binary(o)
+        visit o.left
+        visit o.right
+      end
+      alias :visit_Arel_Nodes_As                 :binary
+      alias :visit_Arel_Nodes_Assignment         :binary
+      alias :visit_Arel_Nodes_Between            :binary
+      alias :visit_Arel_Nodes_Concat             :binary
+      alias :visit_Arel_Nodes_DeleteStatement    :binary
+      alias :visit_Arel_Nodes_DoesNotMatch       :binary
+      alias :visit_Arel_Nodes_Equality           :binary
+      alias :visit_Arel_Nodes_FullOuterJoin      :binary
+      alias :visit_Arel_Nodes_GreaterThan        :binary
+      alias :visit_Arel_Nodes_GreaterThanOrEqual :binary
+      alias :visit_Arel_Nodes_In                 :binary
+      alias :visit_Arel_Nodes_InfixOperation     :binary
+      alias :visit_Arel_Nodes_JoinSource         :binary
+      alias :visit_Arel_Nodes_InnerJoin          :binary
+      alias :visit_Arel_Nodes_LessThan           :binary
+      alias :visit_Arel_Nodes_LessThanOrEqual    :binary
+      alias :visit_Arel_Nodes_Matches            :binary
+      alias :visit_Arel_Nodes_NotEqual           :binary
+      alias :visit_Arel_Nodes_NotIn              :binary
+      alias :visit_Arel_Nodes_NotRegexp          :binary
+      alias :visit_Arel_Nodes_IsNotDistinctFrom  :binary
+      alias :visit_Arel_Nodes_IsDistinctFrom     :binary
+      alias :visit_Arel_Nodes_Or                 :binary
+      alias :visit_Arel_Nodes_OuterJoin          :binary
+      alias :visit_Arel_Nodes_Regexp             :binary
+      alias :visit_Arel_Nodes_RightOuterJoin     :binary
+      alias :visit_Arel_Nodes_TableAlias         :binary
+      alias :visit_Arel_Nodes_When               :binary
+
+      def visit_Arel_Nodes_StringJoin(o)
+        visit o.left
+      end
 
-    def visit_Arel_Attribute(obj)
-      visit obj.relation
-      visit obj.name
-    end
-    alias visit_Arel_Attributes_Integer visit_Arel_Attribute
-    alias visit_Arel_Attributes_Float visit_Arel_Attribute
-    alias visit_Arel_Attributes_String visit_Arel_Attribute
-    alias visit_Arel_Attributes_Time visit_Arel_Attribute
-    alias visit_Arel_Attributes_Boolean visit_Arel_Attribute
-    alias visit_Arel_Attributes_Attribute visit_Arel_Attribute
-    alias visit_Arel_Attributes_Decimal visit_Arel_Attribute
-
-    def visit_Arel_Table(obj)
-      visit obj.name
-    end
+      def visit_Arel_Attribute(o)
+        visit o.relation
+        visit o.name
+      end
+      alias :visit_Arel_Attributes_Integer :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_Float :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_String :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_Time :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_Boolean :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_Attribute :visit_Arel_Attribute
+      alias :visit_Arel_Attributes_Decimal :visit_Arel_Attribute
+
+      def visit_Arel_Table(o)
+        visit o.name
+      end
 
-    def terminal(obj); end
-    alias visit_ActiveSupport_Multibyte_Chars terminal
-    alias visit_ActiveSupport_StringInquirer  terminal
-    alias visit_Arel_Nodes_Lock               terminal
-    alias visit_Arel_Nodes_Node               terminal
-    alias visit_Arel_Nodes_SqlLiteral         terminal
-    alias visit_Arel_Nodes_BindParam          terminal
-    alias visit_Arel_Nodes_Window             terminal
-    alias visit_Arel_Nodes_True               terminal
-    alias visit_Arel_Nodes_False              terminal
-    alias visit_BigDecimal                    terminal
-    alias visit_Class                         terminal
-    alias visit_Date                          terminal
-    alias visit_DateTime                      terminal
-    alias visit_FalseClass                    terminal
-    alias visit_Float                         terminal
-    alias visit_Integer                       terminal
-    alias visit_NilClass                      terminal
-    alias visit_String                        terminal
-    alias visit_Symbol                        terminal
-    alias visit_Time                          terminal
-    alias visit_TrueClass                     terminal
-
-    def visit_Arel_Nodes_InsertStatement(obj)
-      visit obj.relation
-      visit obj.columns
-      visit obj.values
-    end
+      def terminal(o)
+      end
+      alias :visit_ActiveSupport_Multibyte_Chars :terminal
+      alias :visit_ActiveSupport_StringInquirer  :terminal
+      alias :visit_Arel_Nodes_Lock               :terminal
+      alias :visit_Arel_Nodes_Node               :terminal
+      alias :visit_Arel_Nodes_SqlLiteral         :terminal
+      alias :visit_Arel_Nodes_BindParam          :terminal
+      alias :visit_Arel_Nodes_Window             :terminal
+      alias :visit_Arel_Nodes_True               :terminal
+      alias :visit_Arel_Nodes_False              :terminal
+      alias :visit_BigDecimal                    :terminal
+      alias :visit_Class                         :terminal
+      alias :visit_Date                          :terminal
+      alias :visit_DateTime                      :terminal
+      alias :visit_FalseClass                    :terminal
+      alias :visit_Float                         :terminal
+      alias :visit_Integer                       :terminal
+      alias :visit_NilClass                      :terminal
+      alias :visit_String                        :terminal
+      alias :visit_Symbol                        :terminal
+      alias :visit_Time                          :terminal
+      alias :visit_TrueClass                     :terminal
+
+      def visit_Arel_Nodes_InsertStatement(o)
+        visit o.relation
+        visit o.columns
+        visit o.values
+      end
 
-    def visit_Arel_Nodes_SelectCore(obj)
-      visit obj.projections
-      visit obj.source
-      visit obj.wheres
-      visit obj.groups
-      visit obj.windows
-      visit obj.havings
-    end
+      def visit_Arel_Nodes_SelectCore(o)
+        visit o.projections
+        visit o.source
+        visit o.wheres
+        visit o.groups
+        visit o.windows
+        visit o.havings
+      end
 
-    def visit_Arel_Nodes_SelectStatement(obj)
-      visit obj.cores
-      visit obj.orders
-      visit obj.limit
-      visit obj.lock
-      visit obj.offset
-    end
+      def visit_Arel_Nodes_SelectStatement(o)
+        visit o.cores
+        visit o.orders
+        visit o.limit
+        visit o.lock
+        visit o.offset
+      end
 
-    def visit_Arel_Nodes_UpdateStatement(obj)
-      visit obj.relation
-      visit obj.values
-      visit obj.wheres
-      visit obj.orders
-      visit obj.limit
-    end
+      def visit_Arel_Nodes_UpdateStatement(o)
+        visit o.relation
+        visit o.values
+        visit o.wheres
+        visit o.orders
+        visit o.limit
+      end
 
-    def visit_Arel_Nodes_Comment(obj)
-      visit obj.values
-    end
+      def visit_Arel_Nodes_Comment(o)
+        visit o.values
+      end
 
-    def visit_Array(obj)
-      obj.each { |i| visit i }
-    end
-    alias visit_Set visit_Array
+      def visit_Array(o)
+        o.each { |i| visit i }
+      end
+      alias :visit_Set :visit_Array
 
-    def visit_Hash(obj)
-      obj.each do |k, v|
-        visit(k)
-        visit(v)
+      def visit_Hash(o)
+        o.each { |k, v| visit(k); visit(v) }
       end
-    end
 
-    DISPATCH = dispatch_cache
+      DISPATCH = dispatch_cache
 
-    # rubocop:disable Naming/AccessorMethodName
-    def get_dispatch_cache
-      DISPATCH
-    end
-    # rubocop:enable Naming/AccessorMethodName
-    # rubocop:enable Naming/MethodName
+      def get_dispatch_cache
+        DISPATCH
+      end
   end
 end
diff --git a/lib/activerecord-multi-tenant/controller_extensions.rb b/lib/activerecord-multi-tenant/controller_extensions.rb
index cf49656..4586f02 100644
--- a/lib/activerecord-multi-tenant/controller_extensions.rb
+++ b/lib/activerecord-multi-tenant/controller_extensions.rb
@@ -1,22 +1,16 @@
-# frozen_string_literal: true
-
-# Extension to the controller to allow setting the current tenant
-# set_current_tenant and current_tenant methods are introduced
-# to set and get the current tenant in the controllers that uses
-# the MultiTenant module.
 module MultiTenant
   module ControllerExtensions
     def set_current_tenant_through_filter
-      class_eval do
-        helper_method :current_tenant if respond_to?(:helper_method)
+      self.class_eval do
+        if respond_to?(:helper_method)
+          helper_method :current_tenant
+        end
 
         private
 
-        # rubocop:disable Naming/AccessorMethodName
         def set_current_tenant(current_tenant_object)
           MultiTenant.current_tenant = current_tenant_object
         end
-        # rubocop:enable Naming/AccessorMethodName
 
         def current_tenant
           MultiTenant.current_tenant
@@ -26,11 +20,6 @@ module MultiTenant
   end
 end
 
-# This block is executed when the file is loaded and
-# makes the base class; ActionController::Base to
-# extend the ControllerExtensions module.
-# This will add the set_current_tenant and current_tenant
-# in all the controllers that inherit from ActionController::Base
 ActiveSupport.on_load(:action_controller) do |base|
   base.extend MultiTenant::ControllerExtensions
 end
diff --git a/lib/activerecord-multi-tenant/copy_from_client.rb b/lib/activerecord-multi-tenant/copy_from_client.rb
index 8df5b60..e691079 100644
--- a/lib/activerecord-multi-tenant/copy_from_client.rb
+++ b/lib/activerecord-multi-tenant/copy_from_client.rb
@@ -1,9 +1,4 @@
-# frozen_string_literal: true
-
 module MultiTenant
-  # Designed to be mixed into an ActiveRecord model to provide
-  # a copy_from_client method that allows for efficient bulk insertion of
-  # data into a PostgreSQL database using the COPY command
   class CopyFromClientHelper
     attr_reader :count
 
@@ -14,7 +9,7 @@ module MultiTenant
     end
 
     def <<(row)
-      row = row.map.with_index { |val, idx| @column_types[idx].serialize(val) }
+      row = row.map.with_index { |val, idx| @column_types[idx].type_cast_for_database(val) }
       @conn.put_copy_data(row)
       @count += 1
     end
@@ -23,7 +18,7 @@ module MultiTenant
   module CopyFromClient
     def copy_from_client(columns, &block)
       conn         = connection.raw_connection
-      column_types = columns.map { |c| type_for_attribute(c.to_s) }
+      column_types = columns.map { |c| columns_hash[c.to_s] }
       helper = MultiTenant::CopyFromClientHelper.new(conn, column_types)
       conn.copy_data %{COPY #{quoted_table_name}("#{columns.join('","')}") FROM STDIN}, PG::TextEncoder::CopyRow.new do
         block.call helper
@@ -33,7 +28,6 @@ module MultiTenant
   end
 end
 
-# Add copy_from_client to ActiveRecord::Base
 ActiveSupport.on_load(:active_record) do |base|
   base.extend(MultiTenant::CopyFromClient)
 end
diff --git a/lib/activerecord-multi-tenant/fast_truncate.rb b/lib/activerecord-multi-tenant/fast_truncate.rb
index fdd5d97..160b4e5 100644
--- a/lib/activerecord-multi-tenant/fast_truncate.rb
+++ b/lib/activerecord-multi-tenant/fast_truncate.rb
@@ -1,8 +1,5 @@
-# frozen_string_literal: true
-
 # Truncates only the tables that have been modified, according to sequence
 # values
-# Faster alternative to DatabaseCleaner.clean_with(:truncation, pre_count: true)
 module MultiTenant
   module FastTruncate
     def self.run(exclude: ['schema_migrations'])
@@ -16,8 +13,7 @@ module MultiTenant
         needs_truncate boolean;
       BEGIN
         FOR t IN SELECT schemaname, tablename FROM pg_tables WHERE schemaname = 'public' AND tablename NOT IN (%s) LOOP
-          EXECUTE 'SELECT EXISTS (SELECT * from pg_class c WHERE c.relkind = ''S''
-           AND c.relname=''' || t.tablename || '_id_seq'')' into seq_exists;
+          EXECUTE 'SELECT EXISTS (SELECT * from pg_class c WHERE c.relkind = ''S'' AND c.relname=''' || t.tablename || '_id_seq'')' into seq_exists;
           IF seq_exists THEN
             EXECUTE 'SELECT is_called FROM ' || t.tablename || '_id_seq' INTO needs_truncate;
           ELSE
@@ -32,7 +28,7 @@ module MultiTenant
         IF array_length(tables, 1) > 0 THEN
           EXECUTE 'TRUNCATE TABLE ' || array_to_string(tables, ', ') || ' RESTART IDENTITY CASCADE';
         END IF;
-      END$$;), exclude.map { |t| "'#{t}'" }.join('\n'))
+      END$$;), exclude.map { |t| "'" + t + "'" }.join('\n'))
     end
   end
 end
diff --git a/lib/activerecord-multi-tenant/habtm.rb b/lib/activerecord-multi-tenant/habtm.rb
deleted file mode 100644
index 7af9f0d..0000000
--- a/lib/activerecord-multi-tenant/habtm.rb
+++ /dev/null
@@ -1,49 +0,0 @@
-# frozen_string_literal: true
-
-# This module extension is a monkey patch to the ActiveRecord::Associations::ClassMethods module.
-# It overrides the has_and_belongs_to_many method to add the tenant_id to the join table if the
-# tenant_enabled option is set to true.
-
-module ActiveRecord
-  module Associations
-    module ClassMethods
-      # rubocop:disable Naming/PredicateName
-      def has_and_belongs_to_many_with_tenant(name, scope = nil, **options, &extension)
-        # rubocop:enable Naming/PredicateName
-        has_and_belongs_to_many_without_tenant(name, scope, **options, &extension)
-
-        middle_reflection = _reflect_on_association(name.to_s).through_reflection
-        join_model = middle_reflection.klass
-
-        # get tenant_enabled from options and if it is not set, set it to false
-        tenant_enabled = options[:tenant_enabled] || false
-
-        return unless tenant_enabled
-
-        tenant_class_name = options[:tenant_class_name]
-        tenant_column = options[:tenant_column]
-
-        match = tenant_column.match(/(\w+)_id/)
-        tenant_field_name = match ? match[1] : 'tenant'
-
-        join_model.class_eval do
-          belongs_to tenant_field_name.to_sym, class_name: tenant_class_name
-          before_create :tenant_set
-
-          private
-
-          # This method sets the tenant_id on the join table and executes before creation of the join table record.
-          define_method :tenant_set do
-            return unless tenant_enabled
-            raise MultiTenant::MissingTenantError, 'Tenant Id is not set' unless MultiTenant.current_tenant_id
-
-            send("#{tenant_column}=", MultiTenant.current_tenant_id)
-          end
-        end
-      end
-
-      alias has_and_belongs_to_many_without_tenant has_and_belongs_to_many
-      alias has_and_belongs_to_many has_and_belongs_to_many_with_tenant
-    end
-  end
-end
diff --git a/lib/activerecord-multi-tenant/migrations.rb b/lib/activerecord-multi-tenant/migrations.rb
index bc16521..25a4ea2 100644
--- a/lib/activerecord-multi-tenant/migrations.rb
+++ b/lib/activerecord-multi-tenant/migrations.rb
@@ -1,43 +1,13 @@
-# frozen_string_literal: true
-
 module MultiTenant
   module MigrationExtensions
     def create_distributed_table(table_name, partition_key)
       return unless citus_version.present?
-
-      reversible do |dir|
-        dir.up do
-          execute "SELECT create_distributed_table($$#{table_name}$$, $$#{partition_key}$$)"
-        end
-        dir.down do
-          undistribute_table(table_name)
-        end
-      end
+      execute "SELECT create_distributed_table($$#{table_name}$$, $$#{partition_key}$$)"
     end
 
     def create_reference_table(table_name)
       return unless citus_version.present?
-
-      reversible do |dir|
-        dir.up do
-          execute "SELECT create_reference_table($$#{table_name}$$)"
-        end
-        dir.down do
-          undistribute_table(table_name)
-        end
-      end
-    end
-
-    def undistribute_table(table_name)
-      return unless citus_version.present?
-
-      execute "SELECT undistribute_table($$#{table_name}$$)"
-    end
-
-    def rebalance_table_shards
-      return unless citus_version.present?
-
-      execute 'SELECT rebalance_table_shards()'
+      execute "SELECT create_reference_table($$#{table_name}$$)"
     end
 
     def execute_on_all_nodes(sql)
@@ -48,8 +18,7 @@ module MultiTenant
         execute "SELECT citus_run_on_all_workers($$#{sql}$$)" # initial citus_tools.sql with different names
       when nil
         # Do nothing, this is regular Postgres
-      else
-        # 6.1 and newer
+      else # 6.1 and newer
         execute "SELECT run_command_on_workers($$#{sql}$$)"
       end
     end
@@ -59,73 +28,28 @@ module MultiTenant
     end
 
     def citus_version
-      execute("SELECT extversion FROM pg_extension WHERE extname = 'citus'").getvalue(0, 0).try(:split, '-').try(:first)
+      execute("SELECT extversion FROM pg_extension WHERE extname = 'citus'").getvalue(0,0).try(:split, '-').try(:first)
     rescue ArgumentError => e
-      raise unless e.message == 'invalid tuple number 0'
+      raise unless e.message == "invalid tuple number 0"
     end
   end
 end
 
-ActiveRecord::Migration.include MultiTenant::MigrationExtensions if defined?(ActiveRecord::Migration)
-
-module MultiTenant
-  module SchemaStatementsExtensions
-    def create_table(table_name, options = {}, &block)
-      ret = super(table_name, **options.except(:partition_key), &block)
-      if options[:id] != false && options[:partition_key] && options[:partition_key].to_s != 'id'
-        execute "ALTER TABLE #{table_name} DROP CONSTRAINT #{table_name}_pkey"
-        execute "ALTER TABLE #{table_name} ADD PRIMARY KEY(\"#{options[:partition_key]}\", id)"
-      end
-      ret
-    end
-  end
+if defined?(ActiveRecord::Migration)
+  ActiveRecord::Migration.send(:include, MultiTenant::MigrationExtensions)
 end
-ActiveRecord::ConnectionAdapters::SchemaStatements.prepend(MultiTenant::SchemaStatementsExtensions)
 
 module ActiveRecord
-  class SchemaDumper
-    private
-
-    alias initialize_without_citus initialize
-
-    def initialize(connection, options = {})
-      initialize_without_citus(connection, options)
-
-      citus_version =
-        begin
-          ActiveRecord::Migration.citus_version
-        rescue StandardError
-          # Handle the case where this gem is used with MySQL https://github.com/citusdata/activerecord-multi-tenant/issues/166
-          nil
-        end
-      @distribution_columns =
-        if citus_version.present?
-          query_to_execute = <<-SQL.strip
-            SELECT logicalrelid::regclass AS table_name,
-                   column_to_column_name(logicalrelid, partkey) AS dist_col_name
-            FROM pg_dist_partition
-          SQL
-          @connection.execute(query_to_execute).to_h do |v|
-            [v['table_name'], v['dist_col_name']]
-          end
-        else
-          {}
+  module ConnectionAdapters # :nodoc:
+    module SchemaStatements
+      alias :orig_create_table :create_table
+      def create_table(table_name, options = {}, &block)
+        ret = orig_create_table(table_name, **options.except(:partition_key), &block)
+        if options[:partition_key] && options[:partition_key].to_s != 'id'
+          execute "ALTER TABLE #{table_name} DROP CONSTRAINT #{table_name}_pkey"
+          execute "ALTER TABLE #{table_name} ADD PRIMARY KEY(\"#{options[:partition_key]}\", id)"
         end
-    end
-
-    # Support for create_distributed_table & create_reference_table
-    alias table_without_citus table
-
-    def table(table, stream)
-      table_without_citus(table, stream)
-      table_name = remove_prefix_and_suffix(table)
-      distribution_column = @distribution_columns[table_name]
-      if distribution_column
-        stream.puts "  create_distributed_table(#{table_name.inspect}, #{distribution_column.inspect})"
-        stream.puts
-      elsif @distribution_columns.key?(table_name)
-        stream.puts "  create_reference_table(#{table_name.inspect})"
-        stream.puts
+        ret
       end
     end
   end
diff --git a/lib/activerecord-multi-tenant/model_extensions.rb b/lib/activerecord-multi-tenant/model_extensions.rb
index 337f03b..115280c 100644
--- a/lib/activerecord-multi-tenant/model_extensions.rb
+++ b/lib/activerecord-multi-tenant/model_extensions.rb
@@ -1,34 +1,12 @@
-# frozen_string_literal: true
-
-require_relative 'multi_tenant'
-
 module MultiTenant
-  # Extension to the model to allow scoping of models to the current tenant. This is done by adding
-  # the multitenant method to the models that need to be scoped. This method is called in the
-  # model declaration.
-  # Adds scoped_by_tenant? partition_key, primary_key and inherited methods to the model
   module ModelExtensionsClassMethods
-    DEFAULT_ID_FIELD = 'id'
-    # executes when multi_tenant method is called in the model. This method adds the following
-    # methods to the model that calls it.
-    # scoped_by_tenant? - returns true if the model is scoped by tenant
-    # partition_key - returns the partition key for the model
-    # primary_key - returns the primary key for the model
-    #
+    DEFAULT_ID_FIELD = 'id'.freeze
+
     def multi_tenant(tenant_name, options = {})
-      if to_s.underscore.to_sym == tenant_name || (!table_name.nil? && table_name.singularize.to_sym == tenant_name)
+      if to_s.underscore.to_sym == tenant_name
         unless MultiTenant.with_write_only_mode_enabled?
           # This is the tenant model itself. Workaround for https://github.com/citusdata/citus/issues/687
-          before_create lambda {
-            id = if self.class.columns_hash[self.class.primary_key].type == :uuid
-                   SecureRandom.uuid
-                 else
-                   self.class.connection.select_value(
-                     "SELECT nextval('#{self.class.table_name}_#{self.class.primary_key}_seq'::regclass)"
-                   )
-                 end
-            self.id ||= id
-          }
+          before_create -> { self.id ||= self.class.connection.select_value("SELECT nextval('" + [self.class.table_name, self.class.primary_key, 'seq'].join('_') + "'::regclass)") }
         end
       else
         class << self
@@ -38,19 +16,24 @@ module MultiTenant
 
           # Allow partition_key to be set from a superclass if not already set in this class
           def partition_key
-            @partition_key ||= ancestors.detect { |k| k.instance_variable_get(:@partition_key) }
-                                        .try(:instance_variable_get, :@partition_key)
+            @partition_key ||= ancestors.detect{ |k| k.instance_variable_get(:@partition_key) }
+                                 .try(:instance_variable_get, :@partition_key)
           end
 
-          def reset_primary_key
+          # Avoid primary_key errors when using composite primary keys (e.g. id, tenant_id)
+          def primary_key
+            return @primary_key if @primary_key
+
             primary_object_keys = Array.wrap(connection.schema_cache.primary_keys(table_name)) - [partition_key]
 
-            self.primary_key = if primary_object_keys.size == 1
-                                 primary_object_keys.first
-                               elsif table_name &&
-                                     connection.schema_cache.columns_hash(table_name).include?(DEFAULT_ID_FIELD)
-                                 DEFAULT_ID_FIELD
-                               end
+            if primary_object_keys.size == 1
+              @primary_key = primary_object_keys.first
+            elsif connection.schema_cache.columns_hash(table_name).include? DEFAULT_ID_FIELD
+              @primary_key = DEFAULT_ID_FIELD
+            else
+              # table without a primary key and DEFAULT_ID_FIELD is not present in the table
+              @primary_key = nil
+            end
           end
 
           def inherited(subclass)
@@ -65,59 +48,43 @@ module MultiTenant
         partition_key = @partition_key
 
         # Create an implicit belongs_to association only if tenant class exists
-        if MultiTenant.tenant_klass_defined?(tenant_name, options)
-          belongs_to(
-            tenant_name,
-            **options.slice(:class_name, :inverse_of, :optional),
-            foreign_key: options[:partition_key]
-          )
+        if MultiTenant.tenant_klass_defined?(tenant_name)
+          belongs_to tenant_name, **options.slice(:class_name, :inverse_of).merge(foreign_key: options[:partition_key])
         end
 
         # New instances should have the tenant set
-        after_initialize proc { |record|
+        after_initialize Proc.new { |record|
           if MultiTenant.current_tenant_id &&
-             (!record.attribute_present?(partition_key) || record.public_send(partition_key.to_sym).nil?)
-            record.public_send(:"#{partition_key}=", MultiTenant.current_tenant_id)
+              (!record.attribute_present?(partition_key) || record.public_send(partition_key.to_sym).nil?)
+            record.public_send("#{partition_key}=".to_sym, MultiTenant.current_tenant_id)
           end
         }
 
-        # Below block adds the following methods to the model that calls it.
-        # partition_key= - returns the partition key for the model.class << self 'partition' method defined above
-        # is the getter method. Here, there is additional check to assure that the tenant id is not changed once set
-        # tenant_name- returns the name of the tenant model. Its setter and getter methods defined separately
-        # Getter checks for the tenant association and if it is not loaded, returns the current tenant id set
-        # in the MultiTenant module
         to_include = Module.new do
           define_method "#{partition_key}=" do |tenant_id|
-            write_attribute(partition_key.to_s, tenant_id)
+            write_attribute("#{partition_key}", tenant_id)
 
             # Rails 5 `attribute_will_change!` uses the attribute-method-call rather than `read_attribute`
             # and will raise ActiveModel::MissingAttributeError if that column was not selected.
             # This is rescued as NoMethodError and in MRI attribute_was is assigned an arbitrary Object
+            # This is still true after the Rails 5.2 refactor
             was = send("#{partition_key}_was")
-            was_nil_or_skipped = was.nil? || was.instance_of?(Object)
-
-            if send("#{partition_key}_changed?") && persisted? && !was_nil_or_skipped
-              raise MultiTenant::TenantIsImmutable
-            end
+            was_nil_or_skipped = was.nil? || was.class == Object
 
+            raise MultiTenant::TenantIsImmutable if send("#{partition_key}_changed?") && persisted? && !was_nil_or_skipped
             tenant_id
           end
 
-          if MultiTenant.tenant_klass_defined?(tenant_name, options)
+          if MultiTenant.tenant_klass_defined?(tenant_name)
             define_method "#{tenant_name}=" do |model|
               super(model)
-              if send("#{partition_key}_changed?") && persisted? && !send("#{partition_key}_was").nil?
-                raise MultiTenant::TenantIsImmutable
-              end
-
+              raise MultiTenant::TenantIsImmutable if send("#{partition_key}_changed?") && persisted? && !send("#{partition_key}_was").nil?
               model
             end
 
-            define_method tenant_name.to_s do
-              if !association(tenant_name.to_sym).loaded? && !MultiTenant.current_tenant_is_id? &&
-                 MultiTenant.current_tenant_id && public_send(partition_key) == MultiTenant.current_tenant_id
-                MultiTenant.current_tenant
+            define_method "#{tenant_name}" do
+              if !association(tenant_name.to_sym).loaded? && !MultiTenant.current_tenant_is_id? && MultiTenant.current_tenant_id && public_send(partition_key) == MultiTenant.current_tenant_id
+                return MultiTenant.current_tenant
               else
                 super()
               end
@@ -126,28 +93,23 @@ module MultiTenant
         end
         include to_include
 
-        # Below blocks sets tenant_id for the current session with the tenant_id of the record
-        # If the tenant is not set for the `session.After` the save operation current session tenant is set to nil
-        # If tenant is set for the session, save operation is performed as it is
-        around_save lambda { |record, block|
-          record_tenant = record.attribute_was(partition_key)
-          if persisted? && MultiTenant.current_tenant_id.nil? && !record_tenant.nil?
+        around_save -> (record, block) {
+          if persisted? && MultiTenant.current_tenant_id.nil?
             MultiTenant.with(record.public_send(partition_key)) { block.call }
           else
             block.call
           end
         }
 
-        around_update lambda { |record, block|
-          record_tenant = record.attribute_was(partition_key)
-          if MultiTenant.current_tenant_id.nil? && !record_tenant.nil?
+        around_update -> (record, block) {
+          if MultiTenant.current_tenant_id.nil?
             MultiTenant.with(record.public_send(partition_key)) { block.call }
           else
             block.call
           end
         }
 
-        around_destroy lambda { |record, block|
+        around_destroy -> (record, block) {
           if MultiTenant.current_tenant_id.nil?
             MultiTenant.with(record.public_send(partition_key)) { block.call }
           else
@@ -159,49 +121,20 @@ module MultiTenant
   end
 end
 
-# Below code block is executed on Model, Associations and CollectionProxy objects
-# when ActiveRecord is loaded and decorates defined methods with MultiTenant.with function.
-# Additionally, adds aliases for some operators.
 ActiveSupport.on_load(:active_record) do |base|
   base.extend MultiTenant::ModelExtensionsClassMethods
-
-  # Ensure we have current_tenant_id in where clause when a cached ActiveRecord instance is being reloaded,
-  # or update_columns without callbacks is called
-  MultiTenant.wrap_methods(ActiveRecord::Base, 'self', :delete, :reload, :update_columns)
-
-  # Any queuries fired for fetching a singular association have the correct current_tenant_id in WHERE clause
-  # reload is called anytime any record's association is accessed
-  MultiTenant.wrap_methods(ActiveRecord::Associations::Association, 'owner', :reload)
-
-  # For collection associations, we need to wrap multiple methods in returned proxy so that
-  # any queries have the correct current_tenant_id in WHERE clause
-  ActiveRecord::Associations::CollectionProxy.alias_method \
-    :equals_mt, :== # Hack to prevent syntax error due to invalid method name
-  ActiveRecord::Associations::CollectionProxy.alias_method \
-    :append_mt, :<< # Hack to prevent syntax error due to invalid method name
-  MultiTenant.wrap_methods(ActiveRecord::Associations::CollectionProxy, '@association.owner',
-                           :find, :last, :take, :build, :create, :create!, :replace, :delete_all,
-                           :destroy_all, :delete, :destroy, :calculate, :pluck, :size, :empty?, :include?, :equals_mt,
-                           :records, :append_mt, :find_nth_with_limit, :find_nth_from_last, :null_scope?,
-                           :find_from_target?, :exec_queries)
-  ActiveRecord::Associations::CollectionProxy.alias_method :==, :equals_mt
-  ActiveRecord::Associations::CollectionProxy.alias_method :<<, :append_mt
 end
 
-# skips statement caching for classes that is Multi-tenant or has a multi-tenant relation
-module MultiTenant
-  module AssociationExtensions
-    def skip_statement_cache?(*scope)
-      return true if klass.respond_to?(:scoped_by_tenant?) && klass.scoped_by_tenant?
-
-      if reflection.through_reflection
-        through_klass = reflection.through_reflection.klass
-        return true if through_klass.respond_to?(:scoped_by_tenant?) && through_klass.scoped_by_tenant?
-      end
+class ActiveRecord::Associations::Association
+  alias skip_statement_cache_orig skip_statement_cache?
+  def skip_statement_cache?(*scope)
+    return true if klass.respond_to?(:scoped_by_tenant?) && klass.scoped_by_tenant?
 
-      super
+    if reflection.through_reflection
+      through_klass = reflection.through_reflection.klass
+      return true if through_klass.respond_to?(:scoped_by_tenant?) && through_klass.scoped_by_tenant?
     end
+
+    skip_statement_cache_orig(*scope)
   end
 end
-
-ActiveRecord::Associations::Association.prepend(MultiTenant::AssociationExtensions)
diff --git a/lib/activerecord-multi-tenant/multi_tenant.rb b/lib/activerecord-multi-tenant/multi_tenant.rb
index e03008d..55fb3f0 100644
--- a/lib/activerecord-multi-tenant/multi_tenant.rb
+++ b/lib/activerecord-multi-tenant/multi_tenant.rb
@@ -1,44 +1,27 @@
-# frozen_string_literal: true
-
-require 'active_support/current_attributes'
+require 'request_store'
 
 module MultiTenant
-  class Current < ::ActiveSupport::CurrentAttributes
-    attribute :tenant
-  end
-
-  def self.tenant_klass_defined?(tenant_name, options = {})
-    class_name = if options[:class_name].present?
-                   options[:class_name]
-                 else
-                   tenant_name.to_s.classify
-                 end
-    !!class_name.safe_constantize
+  def self.tenant_klass_defined?(tenant_name)
+    !!tenant_name.to_s.classify.safe_constantize
   end
 
   def self.partition_key(tenant_name)
-    "#{tenant_name.to_s.underscore}_id"
+    "#{tenant_name.to_s}_id"
   end
 
-  # rubocop:disable Style/ClassVars
   # In some cases we only have an ID - if defined we'll return the default tenant class in such cases
-  def self.default_tenant_class=(tenant_class)
-    @@default_tenant_class = tenant_class
-  end
-
-  def self.default_tenant_class
-    @@default_tenant_class ||= nil
-  end
+  def self.default_tenant_class=(tenant_class); @@default_tenant_class = tenant_class; end
+  def self.default_tenant_class; @@default_tenant_class ||= nil; end
 
   # Write-only Mode - this only adds the tenant_id to new records, but doesn't
   # require its presence for SELECTs/UPDATEs/DELETEs
-  def self.enable_write_only_mode
-    @@enable_write_only_mode = true
-  end
+  def self.enable_write_only_mode; @@enable_write_only_mode = true; end
+  def self.with_write_only_mode_enabled?; @@enable_write_only_mode ||= false; end
 
-  def self.with_write_only_mode_enabled?
-    @@enable_write_only_mode ||= false
-  end
+  # Workaroud to make "with_lock" work until https://github.com/citusdata/citus/issues/1236 is fixed
+  @@enable_with_lock_workaround = false
+  def self.enable_with_lock_workaround; @@enable_with_lock_workaround = true; end
+  def self.with_lock_workaround_enabled?; @@enable_with_lock_workaround; end
 
   # Registry that maps table names to models (used by the query rewriter)
   def self.register_multi_tenant_model(model_klass)
@@ -51,32 +34,30 @@ module MultiTenant
   def self.multi_tenant_model_for_table(table_name)
     @@multi_tenant_models ||= []
 
-    unless defined?(@@multi_tenant_model_table_names)
-      @@multi_tenant_model_table_names = @@multi_tenant_models.map do |model|
+    if !defined?(@@multi_tenant_model_table_names)
+      @@multi_tenant_model_table_names = @@multi_tenant_models.map { |model|
         [model.table_name, model] if model.table_name
-      end.compact.to_h
+      }.compact.to_h
     end
 
     @@multi_tenant_model_table_names[table_name.to_s]
-    # rubocop:enable Style/ClassVars
   end
 
   def self.multi_tenant_model_for_arel(arel)
     return nil unless arel.respond_to?(:ast)
-
     if arel.ast.relation.is_a? Arel::Nodes::JoinSource
-      MultiTenant.multi_tenant_model_for_table(TableNode.table_name(arel.ast.relation.left))
+      MultiTenant.multi_tenant_model_for_table(arel.ast.relation.left.table_name)
     else
-      MultiTenant.multi_tenant_model_for_table(TableNode.table_name(arel.ast.relation))
+      MultiTenant.multi_tenant_model_for_table(arel.ast.relation.table_name)
     end
   end
 
   def self.current_tenant=(tenant)
-    Current.tenant = tenant
+    RequestStore.store[:current_tenant] = tenant
   end
 
   def self.current_tenant
-    Current.tenant
+    RequestStore.store[:current_tenant]
   end
 
   def self.current_tenant_id
@@ -89,7 +70,7 @@ module MultiTenant
 
   def self.current_tenant_class
     if current_tenant_is_id?
-      MultiTenant.default_tenant_class || raise('Only have tenant id, and no default tenant class set')
+      MultiTenant.default_tenant_class || fail('Only have tenant id, and no default tenant class set')
     elsif current_tenant
       MultiTenant.current_tenant.class.name
     end
@@ -98,63 +79,35 @@ module MultiTenant
   def self.load_current_tenant!
     return MultiTenant.current_tenant if MultiTenant.current_tenant && !current_tenant_is_id?
     raise 'MultiTenant.current_tenant must be set to load' if MultiTenant.current_tenant.nil?
-
-    klass = MultiTenant.default_tenant_class || raise('Only have tenant id, and no default tenant class set')
+    klass = MultiTenant.default_tenant_class || fail('Only have tenant id, and no default tenant class set')
     self.current_tenant = klass.find(MultiTenant.current_tenant_id)
   end
 
   def self.with(tenant, &block)
-    return block.call if current_tenant == tenant
-
-    old_tenant = current_tenant
+    return block.call if self.current_tenant == tenant
+    old_tenant = self.current_tenant
     begin
       self.current_tenant = tenant
-      block.call
+      return block.call
     ensure
       self.current_tenant = old_tenant
     end
   end
 
   def self.without(&block)
-    return block.call if current_tenant.nil?
-
-    old_tenant = current_tenant
+    return block.call if self.current_tenant.nil?
+    old_tenant = self.current_tenant
     begin
       self.current_tenant = nil
-      block.call
+      return block.call
     ensure
       self.current_tenant = old_tenant
     end
   end
 
-  # Wrap calls to any of `method_names` on an instance Class `klass` with MultiTenant.with
-  # when `'owner'` (evaluated in context of the klass instance) is a ActiveRecord model instance that is multi-tenant
-  # Instruments the methods provided with previously set Multitenant parameters
-  # TODO: Could not understand the use of owner here. Need to check
-  def self.wrap_methods(klass, owner, *method_names)
-    mod = Module.new
-    klass.prepend(mod)
-
-    method_names.each do |method_name|
-      mod.module_eval <<-CODE, __FILE__, __LINE__ + 1
-        def #{method_name}(...)
-          if MultiTenant.multi_tenant_model_for_table(#{owner}.class.table_name).present? && #{owner}.persisted? && MultiTenant.current_tenant_id.nil? && #{owner}.class.respond_to?(:partition_key) && #{owner}.attributes.include?(#{owner}.class.partition_key)
-            MultiTenant.with(#{owner}.public_send(#{owner}.class.partition_key)) { super }
-          else
-            super
-          end
-        end
-      CODE
-    end
-  end
-
   # Preserve backward compatibility for people using .with_id
   singleton_class.send(:alias_method, :with_id, :with)
 
-  # This exception is raised when a there is an attempt to change tenant
   class TenantIsImmutable < StandardError
   end
-
-  class MissingTenantError < StandardError
-  end
 end
diff --git a/lib/activerecord-multi-tenant/persistence_extension.rb b/lib/activerecord-multi-tenant/persistence_extension.rb
new file mode 100644
index 0000000..e42e87c
--- /dev/null
+++ b/lib/activerecord-multi-tenant/persistence_extension.rb
@@ -0,0 +1,13 @@
+module ActiveRecord
+  module Persistence
+    alias :delete_orig :delete
+
+    def delete
+      if MultiTenant.multi_tenant_model_for_table(self.class.table_name).present? && persisted? && MultiTenant.current_tenant_id.nil?
+        MultiTenant.with(self.public_send(self.class.partition_key)) { delete_orig }
+      else
+        delete_orig
+      end
+    end
+  end
+end
diff --git a/lib/activerecord-multi-tenant/query_monitor.rb b/lib/activerecord-multi-tenant/query_monitor.rb
index 8af77b3..097f987 100644
--- a/lib/activerecord-multi-tenant/query_monitor.rb
+++ b/lib/activerecord-multi-tenant/query_monitor.rb
@@ -1,36 +1,18 @@
-# frozen_string_literal: true
-
 # Add generic warning when queries fail and there is no tenant set
-# To handle this case, a QueryMonitor hook is created and registered
-# to sql.active_record. This hook will log a warning when a query fails
-# This hook is executed after the query is executed.
 module MultiTenant
-  # rubocop:disable Style/ClassVars
   # Option to enable query monitor
   @@enable_query_monitor = false
+  def self.enable_query_monitor; @@enable_query_monitor = true; end
+  def self.query_monitor_enabled?; @@enable_query_monitor; end
 
-  def self.enable_query_monitor
-    @@enable_query_monitor = true
-  end
-
-  def self.query_monitor_enabled?
-    @@enable_query_monitor
-  end
-
-  # rubocop:enable Style/ClassVars
-  # QueryMonitor class to log a warning when a query fails and there is no tenant set
-  # start and finish methods are required to be register sql.active_record hook
   class QueryMonitor
-    def start(_name, _id, _payload) end
-
-    def finish(_name, _id, payload)
+    def start(name, id, payload); end
+    def finish(name, id, payload)
       return unless MultiTenant.query_monitor_enabled?
-
       return unless payload[:exception].present? && MultiTenant.current_tenant_id.nil?
-
       Rails.logger.info 'WARNING: Tenant not present - make sure to add MultiTenant.with(tenant) { ... }'
     end
   end
 end
-# Actual code to register the hook.
+
 ActiveSupport::Notifications.subscribe('sql.active_record', MultiTenant::QueryMonitor.new)
diff --git a/lib/activerecord-multi-tenant/query_rewriter.rb b/lib/activerecord-multi-tenant/query_rewriter.rb
index e7e03c6..707f860 100644
--- a/lib/activerecord-multi-tenant/query_rewriter.rb
+++ b/lib/activerecord-multi-tenant/query_rewriter.rb
@@ -1,9 +1,6 @@
-# frozen_string_literal: true
-
 require 'active_record'
-require_relative 'arel_visitors_depth_first' unless Arel::Visitors.const_defined?(:DepthFirst)
+require_relative "./arel_visitors_depth_first.rb" unless Arel::Visitors.const_defined?(:DepthFirst)
 
-# Iterates AST and adds tenant enforcement clauses to all relations
 module MultiTenant
   class Table
     attr_reader :arel_table
@@ -12,9 +9,9 @@ module MultiTenant
       @arel_table = arel_table
     end
 
-    def eql?(other)
-      self.class == other.class &&
-        equality_fields.eql?(other.equality_fields)
+    def eql?(rhs)
+      self.class == rhs.class &&
+        equality_fields.eql?(rhs.equality_fields)
     end
 
     def hash
@@ -47,7 +44,6 @@ module MultiTenant
 
     def visited_relation(relation)
       return unless @discovering
-
       @known_relations << Table.new(relation)
     end
 
@@ -60,13 +56,9 @@ module MultiTenant
     end
   end
 
-  class ArelTenantVisitor < if Arel::Visitors.const_defined?(:DepthFirst)
-                              Arel::Visitors::DepthFirst
-                            else
-                              ::MultiTenant::ArelVisitorsDepthFirst
-                            end
+  class ArelTenantVisitor < Arel::Visitors.const_defined?(:DepthFirst) ? Arel::Visitors::DepthFirst : ::MultiTenant::ArelVisitorsDepthFirst
     def initialize(arel)
-      super(proc {})
+      super(Proc.new {})
       @statement_node_id = nil
 
       @contexts = []
@@ -76,72 +68,61 @@ module MultiTenant
 
     attr_reader :contexts
 
-    # rubocop:disable Naming/MethodName
     def visit_Arel_Attributes_Attribute(*args)
       return if @current_context.nil?
-
-      super
+      super(*args)
     end
 
-    def visit_Arel_Nodes_Equality(obj, *args)
-      if obj.left.is_a?(Arel::Attributes::Attribute)
-        table_name = MultiTenant::TableNode.table_name(obj.left.relation)
+    def visit_Arel_Nodes_Equality(o, *args)
+      if o.left.is_a?(Arel::Attributes::Attribute)
+        table_name = o.left.relation.table_name
         model = MultiTenant.multi_tenant_model_for_table(table_name)
-        if model.present? && obj.left.name.to_s == model.partition_key.to_s
-          @current_context.visited_handled_relation(obj.left.relation)
-        end
+        @current_context.visited_handled_relation(o.left.relation) if model.present? && o.left.name.to_s == model.partition_key.to_s
       end
-      super
+      super(o, *args)
     end
 
-    def visit_MultiTenant_TenantEnforcementClause(obj, *)
-      @current_context.visited_handled_relation(obj.tenant_attribute.relation)
+    def visit_MultiTenant_TenantEnforcementClause(o, *)
+      @current_context.visited_handled_relation(o.tenant_attribute.relation)
     end
 
-    def visit_MultiTenant_TenantJoinEnforcementClause(obj, *)
-      @current_context.visited_handled_relation(obj.tenant_attribute.relation)
+    def visit_MultiTenant_TenantJoinEnforcementClause(o, *)
+      @current_context.visited_handled_relation(o.tenant_attribute.relation)
     end
 
-    def visit_Arel_Table(obj, _collector = nil)
-      @current_context.visited_relation(obj) if tenant_relation?(MultiTenant::TableNode.table_name(obj))
+    def visit_Arel_Table(o, _collector = nil)
+      @current_context.visited_relation(o) if tenant_relation?(o.table_name)
     end
+    alias :visit_Arel_Nodes_TableAlias :visit_Arel_Table
 
-    alias visit_Arel_Nodes_TableAlias visit_Arel_Table
-
-    def visit_Arel_Nodes_SelectCore(obj, *_args)
-      nest_context(obj) do
+    def visit_Arel_Nodes_SelectCore(o, *args)
+      nest_context(o) do
         @current_context.discover_relations do
-          visit obj.source
+          visit o.source
         end
-        visit obj.wheres
-        visit obj.groups
-        visit obj.windows
-        if defined?(obj.having)
-          visit obj.having
+        visit o.wheres
+        visit o.groups
+        visit o.windows
+        if defined?(o.having)
+          visit o.having
         else
-          visit obj.havings
+          visit o.havings
         end
       end
     end
 
-    # rubocop:enable Naming/MethodName
-
-    # rubocop:disable Naming/MethodName
-    def visit_Arel_Nodes_OuterJoin(obj, _collector = nil)
-      nest_context(obj) do
+    def visit_Arel_Nodes_OuterJoin(o, collector = nil)
+      nest_context(o) do
         @current_context.discover_relations do
-          visit obj.left
-          visit obj.right
+          visit o.left
+          visit o.right
         end
       end
     end
+    alias :visit_Arel_Nodes_FullOuterJoin :visit_Arel_Nodes_OuterJoin
+    alias :visit_Arel_Nodes_RightOuterJoin :visit_Arel_Nodes_OuterJoin
 
-    # rubocop:enable Naming/MethodName
-
-    alias visit_Arel_Nodes_FullOuterJoin visit_Arel_Nodes_OuterJoin
-    alias visit_Arel_Nodes_RightOuterJoin visit_Arel_Nodes_OuterJoin
-
-    alias visit_ActiveModel_Attribute terminal
+    alias :visit_ActiveModel_Attribute :terminal
 
     private
 
@@ -157,16 +138,13 @@ module MultiTenant
       DISPATCH
     end
 
-    # rubocop:disable Naming/AccessorMethodName
     def get_dispatch_cache
       dispatch
     end
 
-    # rubocop:enable Naming/AccessorMethodName
-
-    def nest_context(obj)
+    def nest_context(o)
       old_context = @current_context
-      @current_context = Context.new(obj)
+      @current_context = Context.new(o)
       @contexts << @current_context
 
       yield
@@ -177,33 +155,25 @@ module MultiTenant
 
   class BaseTenantEnforcementClause < Arel::Nodes::Node
     attr_reader :tenant_attribute
-
     def initialize(tenant_attribute)
-      super()
       @tenant_attribute = tenant_attribute
-      @tenant_model = MultiTenant.multi_tenant_model_for_table(
-        MultiTenant::TableNode.table_name(tenant_attribute.relation)
-      )
+      @tenant_model = MultiTenant.multi_tenant_model_for_table(tenant_attribute.relation.table_name)
     end
 
-    def to_s
-      to_sql
-    end
-
-    def to_str
-      to_sql
-    end
+    def to_s; to_sql; end
+    def to_str; to_sql; end
 
     def to_sql(*)
       collector = Arel::Collectors::SQLString.new
       collector = @tenant_model.connection.visitor.accept tenant_arel, collector
       collector.value
     end
+
+
   end
 
   class TenantEnforcementClause < BaseTenantEnforcementClause
     private
-
     def tenant_arel
       if defined?(Arel::Nodes::Quoted)
         @tenant_attribute.eq(Arel::Nodes::Quoted.new(MultiTenant.current_tenant_id))
@@ -213,39 +183,36 @@ module MultiTenant
     end
   end
 
+
   class TenantJoinEnforcementClause < BaseTenantEnforcementClause
     attr_reader :table_left
-
     def initialize(tenant_attribute, table_left)
       super(tenant_attribute)
       @table_left = table_left
-      @model_left = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(table_left))
+      @model_left = MultiTenant.multi_tenant_model_for_table(table_left.table_name)
     end
 
     private
-
     def tenant_arel
       @tenant_attribute.eq(@table_left[@model_left.partition_key])
     end
   end
 
+
   module TenantValueVisitor
-    # rubocop:disable Naming/MethodName
-    def visit_MultiTenant_TenantEnforcementClause(obj, collector)
-      collector << obj
+    def visit_MultiTenant_TenantEnforcementClause(o, collector)
+      collector << o
     end
 
-    def visit_MultiTenant_TenantJoinEnforcementClause(obj, collector)
-      collector << obj
+    def visit_MultiTenant_TenantJoinEnforcementClause(o, collector)
+      collector << o
     end
-
-    # rubocop:enable Naming/MethodName
   end
 
   module DatabaseStatements
     def join_to_update(update, *args)
-      update = super
-      model = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(update.ast.relation))
+      update = super(update, *args)
+      model = MultiTenant.multi_tenant_model_for_table(update.ast.relation.table_name)
       if model.present? && !MultiTenant.with_write_only_mode_enabled? && MultiTenant.current_tenant_id.present?
         update.where(MultiTenant::TenantEnforcementClause.new(model.arel_table[model.partition_key]))
       end
@@ -253,8 +220,8 @@ module MultiTenant
     end
 
     def join_to_delete(delete, *args)
-      delete = super
-      model = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(delete.ast.left))
+      delete = super(delete, *args)
+      model = MultiTenant.multi_tenant_model_for_table(delete.ast.left.table_name)
       if model.present? && !MultiTenant.with_write_only_mode_enabled? && MultiTenant.current_tenant_id.present?
         delete.where(MultiTenant::TenantEnforcementClause.new(model.arel_table[model.partition_key]))
       end
@@ -266,7 +233,7 @@ module MultiTenant
       if model.present? && !MultiTenant.with_write_only_mode_enabled? && MultiTenant.current_tenant_id.present?
         arel.where(MultiTenant::TenantEnforcementClause.new(model.arel_table[model.partition_key]))
       end
-      super
+      super(arel, name, binds)
     end
 
     def delete(arel, name = nil, binds = [])
@@ -274,7 +241,7 @@ module MultiTenant
       if model.present? && !MultiTenant.with_write_only_mode_enabled? && MultiTenant.current_tenant_id.present?
         arel.where(MultiTenant::TenantEnforcementClause.new(model.arel_table[model.partition_key]))
       end
-      super
+      super(arel, name, binds)
     end
   end
 end
@@ -284,61 +251,67 @@ ActiveRecord::ConnectionAdapters::AbstractAdapter.prepend(MultiTenant::DatabaseS
 
 Arel::Visitors::ToSql.include(MultiTenant::TenantValueVisitor)
 
-module MultiTenant
-  module QueryMethodsExtensions
-    def build_arel(*)
-      arel = super
+require 'active_record/relation'
+module ActiveRecord
+  module QueryMethods
+    alias :build_arel_orig :build_arel
+    def build_arel(*args)
+      arel = build_arel_orig(*args)
 
-      unless MultiTenant.with_write_only_mode_enabled?
+      if !MultiTenant.with_write_only_mode_enabled?
         visitor = MultiTenant::ArelTenantVisitor.new(arel)
 
         visitor.contexts.each do |context|
           node = context.arel_node
 
           context.unhandled_relations.each do |relation|
-            model = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(relation.arel_table))
+            model = MultiTenant.multi_tenant_model_for_table(relation.arel_table.table_name)
 
             if MultiTenant.current_tenant_id
               enforcement_clause = MultiTenant::TenantEnforcementClause.new(relation.arel_table[model.partition_key])
               case node
-              when Arel::Nodes::Join # Arel::Nodes::OuterJoin, Arel::Nodes::RightOuterJoin, Arel::Nodes::FullOuterJoin
+              when Arel::Nodes::Join #Arel::Nodes::OuterJoin, Arel::Nodes::RightOuterJoin, Arel::Nodes::FullOuterJoin
                 node.right.expr = node.right.expr.and(enforcement_clause)
               when Arel::Nodes::SelectCore
                 if node.wheres.empty?
                   node.wheres = [enforcement_clause]
-                elsif node.wheres[0].is_a?(Arel::Nodes::And)
-                  node.wheres[0].children << enforcement_clause
                 else
-                  node.wheres[0] = enforcement_clause.and(node.wheres[0])
+                  if node.wheres[0].is_a?(Arel::Nodes::And)
+                    node.wheres[0].children << enforcement_clause
+                  else
+                    node.wheres[0] = enforcement_clause.and(node.wheres[0])
+                  end
                 end
               else
-                raise 'UnknownContext'
+                raise "UnknownContext"
               end
             end
 
-            next unless node.is_a?(Arel::Nodes::SelectCore) || node.is_a?(Arel::Nodes::Join)
-
-            node_list = if node.is_a? Arel::Nodes::Join
-                          [node]
-                        else
-                          node.source.right
-                        end
-
-            node_list.select { |n| n.is_a? Arel::Nodes::Join }.each do |node_join|
-              next unless node_join.right
+            if node.is_a?(Arel::Nodes::SelectCore) || node.is_a?(Arel::Nodes::Join)
+              if node.is_a?Arel::Nodes::Join
+                node_list = [node]
+              else
+                node_list = node.source.right
+              end
 
-              relation_right, relation_left = relations_from_node_join(node_join)
+              node_list.select{ |n| n.is_a? Arel::Nodes::Join }.each do |node_join|
+                if (!node_join.right ||
+                    (ActiveRecord::VERSION::MAJOR == 5 &&
+                     !node_join.right.expr.right.is_a?(Arel::Attributes::Attribute)))
+                  next
+                end
 
-              next unless relation_right && relation_left
+                relation_right, relation_left = relations_from_node_join(node_join)
 
-              model_right = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(relation_left))
-              model_left = MultiTenant.multi_tenant_model_for_table(MultiTenant::TableNode.table_name(relation_right))
-              next unless model_right && model_left
+                next unless relation_right && relation_left
 
-              join_enforcement_clause = MultiTenant::TenantJoinEnforcementClause.new(
-                relation_right[model_right.partition_key], relation_left
-              )
-              node_join.right.expr = node_join.right.expr.and(join_enforcement_clause)
+                model_right = MultiTenant.multi_tenant_model_for_table(relation_left.table_name)
+                model_left = MultiTenant.multi_tenant_model_for_table(relation_right.table_name)
+                if model_right && model_left
+                  join_enforcement_clause = MultiTenant::TenantJoinEnforcementClause.new(relation_left[model_left.partition_key], relation_right)
+                  node_join.right.expr = node_join.right.expr.and(join_enforcement_clause)
+                end
+              end
             end
           end
         end
@@ -348,48 +321,35 @@ module MultiTenant
     end
 
     private
-
     def relations_from_node_join(node_join)
-      if node_join.right.expr.is_a?(Arel::Nodes::Equality)
+      if ActiveRecord::VERSION::MAJOR == 5 || node_join.right.expr.is_a?(Arel::Nodes::Equality)
         return node_join.right.expr.right.relation, node_join.right.expr.left.relation
       end
 
-      children = [node_join.right.expr.children].flatten
+      children = node_join.right.expr.children
 
-      tenant_applied = children.any? do |c|
-        c.is_a?(MultiTenant::TenantEnforcementClause) || c.is_a?(MultiTenant::TenantJoinEnforcementClause)
+      tenant_applied = children.any?(MultiTenant::TenantEnforcementClause) || children.any?(MultiTenant::TenantJoinEnforcementClause)
+      if tenant_applied || children.empty?
+        return nil, nil
       end
-      return nil, nil if tenant_applied || children.empty?
 
-      child = children.first.respond_to?(:children) ? children.first.children.first : children.first
-      if child.right.respond_to?(:relation) && child.left.respond_to?(:relation)
-        return child.right.relation, child.left.relation
+      if children[0].right.respond_to?('relation') && children[0].left.respond_to?('relation')
+        return children[0].right.relation, children[0].left.relation
       end
 
-      [nil, nil]
+      return nil, nil
     end
   end
 end
 
-require 'active_record/relation'
-ActiveRecord::QueryMethods.prepend(MultiTenant::QueryMethodsExtensions)
-
+require 'active_record/base'
 module MultiTenantFindBy
-  if ActiveRecord.gem_version >= Gem::Version.create('7.2.0')
-    def cached_find_by_statement(connection, key, &block)
-      return super unless respond_to?(:scoped_by_tenant?) && scoped_by_tenant?
+  def cached_find_by_statement(key, &block)
+    return super unless respond_to?(:scoped_by_tenant?) && scoped_by_tenant?
 
-      super(connection, Array.wrap(key) + [MultiTenant.current_tenant_id.to_s], &block)
-    end
-  else
-    def cached_find_by_statement(key, &block)
-      return super unless respond_to?(:scoped_by_tenant?) && scoped_by_tenant?
-
-      super(Array.wrap(key) + [MultiTenant.current_tenant_id.to_s], &block)
-    end
+    key = Array.wrap(key) + [MultiTenant.current_tenant_id.to_s]
+    super(key, &block)
   end
 end
 
-ActiveSupport.on_load(:active_record) do |base|
-  base.singleton_class.prepend(MultiTenantFindBy)
-end
+ActiveRecord::Base.singleton_class.prepend(MultiTenantFindBy)
diff --git a/lib/activerecord-multi-tenant/relation_extension.rb b/lib/activerecord-multi-tenant/relation_extension.rb
deleted file mode 100644
index 2e3d5e3..0000000
--- a/lib/activerecord-multi-tenant/relation_extension.rb
+++ /dev/null
@@ -1,71 +0,0 @@
-# frozen_string_literal: true
-
-module Arel
-  module ActiveRecordRelationExtension
-    # Overrides the delete_all method to include tenant scoping
-    def delete_all
-      # Call the original delete_all method if the current tenant is identified by an ID
-      return super if MultiTenant.current_tenant_is_id? || MultiTenant.current_tenant.nil?
-
-      stmt = Arel::DeleteManager.new.from(table)
-      stmt.wheres = [generate_in_condition_subquery]
-
-      # Execute the delete statement using the connection and return the result
-      klass.connection.delete(stmt, "#{klass} Delete All").tap { reset }
-    end
-
-    # Overrides the update_all method to include tenant scoping
-    def update_all(updates)
-      # Call the original update_all method if the current tenant is identified by an ID
-      return super if MultiTenant.current_tenant_is_id? || MultiTenant.current_tenant.nil?
-
-      stmt = Arel::UpdateManager.new
-      stmt.table(table)
-      stmt.set Arel.sql(klass.send(:sanitize_sql_for_assignment, updates))
-      stmt.wheres = [generate_in_condition_subquery]
-
-      klass.connection.update(stmt, "#{klass} Update All").tap { reset }
-    end
-
-    private
-
-    # The generate_in_condition_subquery method generates a subquery that selects
-    # records associated with the current tenant.
-    def generate_in_condition_subquery
-      # Get the tenant key and tenant ID based on the current tenant
-      tenant_key = MultiTenant.partition_key(MultiTenant.current_tenant_class)
-      tenant_id = MultiTenant.current_tenant_id
-
-      # Build an Arel query
-      arel = if eager_loading?
-               apply_join_dependency.arel
-             elsif ActiveRecord.gem_version >= Gem::Version.create('7.2.0')
-               build_arel(klass.connection)
-             else
-               build_arel
-             end
-
-      arel.source.left = table
-
-      # If the tenant ID is present and the tenant key is a column in the model,
-      # add a condition to only include records where the tenant key equals the tenant ID
-      if tenant_id && klass.column_names.include?(tenant_key)
-        tenant_condition = table[tenant_key].eq(tenant_id)
-        unless arel.constraints.any? { |node| node.to_sql.include?(tenant_condition.to_sql) }
-          arel = arel.where(tenant_condition)
-        end
-      end
-
-      # Clone the query, clear its projections, and set its projection to the primary key of the table
-      subquery = arel.clone
-      subquery.projections.clear
-      subquery = subquery.project(table[primary_key])
-
-      # Create an IN condition node with the primary key of the table and the subquery
-      Arel::Nodes::In.new(table[primary_key], subquery.ast)
-    end
-  end
-end
-
-# Patch ActiveRecord::Relation with the extension module
-ActiveRecord::Relation.prepend(Arel::ActiveRecordRelationExtension)
diff --git a/lib/activerecord-multi-tenant/sidekiq.rb b/lib/activerecord-multi-tenant/sidekiq.rb
index 0bca525..2e39c9d 100644
--- a/lib/activerecord-multi-tenant/sidekiq.rb
+++ b/lib/activerecord-multi-tenant/sidekiq.rb
@@ -1,19 +1,14 @@
-# frozen_string_literal: true
-
 require 'sidekiq/client'
 
-# Adds methods to handle tenant information both in the client and server.
 module Sidekiq::Middleware::MultiTenant
   # Get the current tenant and store in the message to be sent to Sidekiq.
   class Client
-    def call(_worker_class, msg, _queue, _redis_pool)
-      if MultiTenant.current_tenant.present?
-        msg['multi_tenant'] ||=
-          {
-            'class' => MultiTenant.current_tenant_class,
-            'id' => MultiTenant.current_tenant_id
-          }
-      end
+    def call(worker_class, msg, queue, redis_pool)
+      msg['multi_tenant'] ||=
+        {
+          'class' => MultiTenant.current_tenant_class,
+          'id' => MultiTenant.current_tenant_id
+        } if MultiTenant.current_tenant.present?
 
       yield
     end
@@ -21,14 +16,12 @@ module Sidekiq::Middleware::MultiTenant
 
   # Pull the tenant out and run the current thread with it.
   class Server
-    def call(_worker_class, msg, _queue, &block)
-      if msg.key?('multi_tenant')
-        tenant = begin
-          msg['multi_tenant']['class'].constantize.find(msg['multi_tenant']['id'])
-        rescue ActiveRecord::RecordNotFound
-          msg['multi_tenant']['id']
+    def call(worker_class, msg, queue)
+      if msg.has_key?('multi_tenant')
+        tenant = msg['multi_tenant']['class'].constantize.find(msg['multi_tenant']['id'])
+        MultiTenant.with(tenant) do
+          yield
         end
-        MultiTenant.with(tenant, &block)
       else
         yield
       end
@@ -36,52 +29,26 @@ module Sidekiq::Middleware::MultiTenant
   end
 end
 
-# Configure Sidekiq to use the multi-tenant client and server middleware to add (client/server)/process(server)
-# tenant information.
-Sidekiq.configure_server do |config|
-  config.server_middleware do |chain|
-    chain.add Sidekiq::Middleware::MultiTenant::Server
-  end
-  config.client_middleware do |chain|
-    chain.add Sidekiq::Middleware::MultiTenant::Client
-  end
-end
-
-Sidekiq.configure_client do |config|
-  config.client_middleware do |chain|
-    chain.add Sidekiq::Middleware::MultiTenant::Client
-  end
-end
-
-# Bulk push support for Sidekiq while setting multi-tenant information.
-# This is a copy of the Sidekiq::Client#push_bulk method with the addition of
-# setting the multi-tenant information for each job.
 module Sidekiq
   class Client
-    # Allows the caller to enqueue multiple Sidekiq jobs with
-    # tenant information in a single call. It ensures that each job is processed
-    # within the correct tenant context and returns an array of job IDs for the enqueued jobs
     def push_bulk_with_tenants(items)
-      first_job = items['jobs'].first
-      return [] unless first_job # no jobs to push
-      unless first_job.is_a?(Hash)
-        raise ArgumentError, "Bulk arguments must be an Array of Hashes: [{ 'args' => [1], 'tenant_id' => 1 }, ...]"
-      end
+      job = items['jobs'].first
+      return [] unless job # no jobs to push
+      raise ArgumentError, "Bulk arguments must be an Array of Hashes: [{ 'args' => [1], 'tenant_id' => 1 }, ...]" if !job.is_a?(Hash)
 
       normed = normalize_item(items.except('jobs').merge('args' => []))
       payloads = items['jobs'].map do |job|
         MultiTenant.with(job['tenant_id']) do
           copy = normed.merge('args' => job['args'], 'jid' => SecureRandom.hex(12), 'enqueued_at' => Time.now.to_f)
           result = process_single(items['class'], copy)
-          result || nil
+          result ? result : nil
         end
       end.compact
 
-      raw_push(payloads) unless payloads.empty?
+      raw_push(payloads) if !payloads.empty?
       payloads.collect { |payload| payload['jid'] }
     end
 
-    # Enabling the push_bulk_with_tenants method to be called directly on the Sidekiq::Client class
     class << self
       def push_bulk_with_tenants(items)
         new.push_bulk_with_tenants(items)
diff --git a/lib/activerecord-multi-tenant/table_node.rb b/lib/activerecord-multi-tenant/table_node.rb
deleted file mode 100644
index 9431b06..0000000
--- a/lib/activerecord-multi-tenant/table_node.rb
+++ /dev/null
@@ -1,15 +0,0 @@
-# frozen_string_literal: true
-
-module MultiTenant
-  module TableNode
-    # Return table name
-    def self.table_name(node)
-      # NOTE: Arel::Nodes::Table#table_name is removed in Rails 7.1
-      if node.is_a?(Arel::Nodes::TableAlias)
-        node.table_name
-      else
-        node.name
-      end
-    end
-  end
-end
diff --git a/lib/activerecord-multi-tenant/version.rb b/lib/activerecord-multi-tenant/version.rb
index 20299e6..eb2deee 100644
--- a/lib/activerecord-multi-tenant/version.rb
+++ b/lib/activerecord-multi-tenant/version.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 module MultiTenant
-  VERSION = '2.4.0'
+  VERSION = '1.1.1'
 end
diff --git a/lib/activerecord-multi-tenant/with_lock.rb b/lib/activerecord-multi-tenant/with_lock.rb
new file mode 100644
index 0000000..1452101
--- /dev/null
+++ b/lib/activerecord-multi-tenant/with_lock.rb
@@ -0,0 +1,15 @@
+# Workaround for https://github.com/citusdata/citus/issues/1236
+# "SELECT ... FOR UPDATE is not supported for router-plannable queries"
+
+class ActiveRecord::Base
+  alias :lock_orig :lock!
+  def lock!(lock = true)
+    if lock && persisted? && self.class.respond_to?(:scoped_by_tenant?) && MultiTenant.current_tenant_id && MultiTenant.with_lock_workaround_enabled?
+      self.class.unscoped.where(id: id).update_all(id: id) # No-op UPDATE that locks the row
+      reload # This is just to act similar to the default ActiveRecord approach, in case someone relies on the reload
+      self
+    else
+      lock_orig(lock)
+    end
+  end
+end
diff --git a/lib/activerecord_multi_tenant.rb b/lib/activerecord_multi_tenant.rb
deleted file mode 100644
index 7c4fc30..0000000
--- a/lib/activerecord_multi_tenant.rb
+++ /dev/null
@@ -1,14 +0,0 @@
-# frozen_string_literal: true
-
-require_relative 'activerecord-multi-tenant/controller_extensions' if Object.const_defined?(:ActionController)
-require_relative 'activerecord-multi-tenant/copy_from_client'
-require_relative 'activerecord-multi-tenant/fast_truncate'
-require_relative 'activerecord-multi-tenant/migrations'
-require_relative 'activerecord-multi-tenant/model_extensions'
-require_relative 'activerecord-multi-tenant/multi_tenant'
-require_relative 'activerecord-multi-tenant/query_rewriter'
-require_relative 'activerecord-multi-tenant/query_monitor'
-require_relative 'activerecord-multi-tenant/table_node'
-require_relative 'activerecord-multi-tenant/version'
-require_relative 'activerecord-multi-tenant/habtm'
-require_relative 'activerecord-multi-tenant/relation_extension'
diff --git a/spec/activerecord-multi-tenant/associations_spec.rb b/spec/activerecord-multi-tenant/associations_spec.rb
deleted file mode 100644
index d74cd24..0000000
--- a/spec/activerecord-multi-tenant/associations_spec.rb
+++ /dev/null
@@ -1,44 +0,0 @@
-# frozen_string_literal: true
-
-require 'spec_helper'
-
-describe MultiTenant, 'Association methods' do
-  let(:account1) { Account.create! name: 'test1' }
-  let(:account2) { Account.create! name: 'test2' }
-  let(:project1) { Project.create! name: 'something1', account: account1 }
-  let(:project2) { Project.create! name: 'something2', account: account2, id: project1.id }
-
-  let(:task1) { Task.create! name: 'task1', project: project1, account: account1 }
-  let(:task2) { Task.create! name: 'task2', project: project2, account: account2, id: task1.id }
-  let(:manager1) { Manager.create! name: 'manager1', account: account1, tasks: [task1] }
-  let(:project3) { Project.create! name: 'something3', account: account1, managers: [manager1] }
-
-  context 'include the tenant_id in queries and' do
-    it 'creates a task with correct account_id' do
-      expect(project2.tasks.create(name: 'task3').account_id).to eq(account2.id)
-    end
-    it 'return correct account_id' do
-      expect(task1.project.account_id).to_not eq(task2.project.account_id) # belongs_to
-      expect(project2.tasks.count).to eq(1)
-      expect(project2.tasks.first.account_id).to eq(account2.id) # has_many
-    end
-
-    it 'check has_many_belongs_to' do
-      MultiTenant.with(account1) do
-        expect(manager1.tasks.first.account_id).to eq(task1.account_id) # has_many
-      end
-    end
-
-    it 'check has_many_belongs_to without tenant in the intermediate table' do
-      MultiTenant.with(account1) do
-        expect(manager1.tasks.first.account_id).to eq(task1.account_id) # has_many
-      end
-    end
-
-    it 'check has_many_belongs_to tenant_enabled false' do
-      MultiTenant.with(account1) do
-        expect(project3.managers.first.id).to eq(manager1.id) # has_many
-      end
-    end
-  end
-end
diff --git a/spec/activerecord-multi-tenant/controller_extensions_spec.rb b/spec/activerecord-multi-tenant/controller_extensions_spec.rb
index 6e66358..bceaa88 100644
--- a/spec/activerecord-multi-tenant/controller_extensions_spec.rb
+++ b/spec/activerecord-multi-tenant/controller_extensions_spec.rb
@@ -1,8 +1,6 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
-describe 'Controller Extensions', type: :controller do
+describe "Controller Extensions", type: :controller do
   class Account
     attr_accessor :name
   end
@@ -33,6 +31,7 @@ describe 'Controller Extensions', type: :controller do
     end
   end
 
+
   class APIApplicationController < ActionController::API
     include Rails.application.routes.url_helpers
     set_current_tenant_through_filter
diff --git a/spec/activerecord-multi-tenant/fast_truncate_spec.rb b/spec/activerecord-multi-tenant/fast_truncate_spec.rb
index f665241..634b958 100644
--- a/spec/activerecord-multi-tenant/fast_truncate_spec.rb
+++ b/spec/activerecord-multi-tenant/fast_truncate_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 describe MultiTenant::FastTruncate do
@@ -7,19 +5,19 @@ describe MultiTenant::FastTruncate do
     MultiTenant::FastTruncate.run
   end
 
-  it 'truncates tables that have exactly one row inserted' do
+  it "truncates tables that have exactly one row inserted" do
     Account.create! name: 'foo'
-    expect do
+    expect {
       MultiTenant::FastTruncate.run
-    end.to change { Account.count }.from(1).to(0)
+    }.to change { Account.count }.from(1).to(0)
   end
 
-  it 'truncates tables that have more than one row inserted' do
+  it "truncates tables that have more than one row inserted" do
     Account.create! name: 'foo'
     Account.create! name: 'bar'
 
-    expect do
+    expect {
       MultiTenant::FastTruncate.run
-    end.to change { Account.count }.from(2).to(0)
+    }.to change { Account.count }.from(2).to(0)
   end
 end
diff --git a/spec/activerecord-multi-tenant/model_extensions_spec.rb b/spec/activerecord-multi-tenant/model_extensions_spec.rb
index f2d83b8..1b7b938 100644
--- a/spec/activerecord-multi-tenant/model_extensions_spec.rb
+++ b/spec/activerecord-multi-tenant/model_extensions_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 describe MultiTenant do
@@ -12,11 +10,11 @@ describe MultiTenant do
   end
 
   describe 'is_scoped_as_tenant should return the correct value when true' do
-    it { expect(Project.respond_to?(:scoped_by_tenant?)).to eq(true) }
+    it {expect(Project.respond_to?(:scoped_by_tenant?)).to eq(true)}
   end
 
   describe 'is_scoped_as_tenant should return the correct value when false' do
-    it { expect(UnscopedModel.respond_to?(:scoped_by_tenant?)).to eq(false) }
+    it {expect(UnscopedModel.respond_to?(:scoped_by_tenant?)).to eq(false)}
   end
 
   context 'immutability' do
@@ -45,17 +43,17 @@ describe MultiTenant do
       @account = Account.create! name: 'foo'
       MultiTenant.current_tenant = @account
     end
-    it { expect(Project.new.account_id).to eq(@account.id) }
+    it {expect(Project.new.account_id).to eq(@account.id)}
     it 'should handle partial selects' do
       project = Project.create!
-      expect { project = Project.select(:name).find(project.id) }.not_to raise_error
+      expect{project = Project.select(:name).find(project.id)}.not_to raise_error
       expect(project.account_id).to eq(@account.id)
     end
   end
 
   describe 'Handles custom partition_key on tenant model' do
     before do
-      @account = Account.create! name: 'foo'
+      @account  = Account.create! name: 'foo'
       MultiTenant.current_tenant = @account
       @custom_partition_key_task = CustomPartitionKeyTask.create! name: 'foo'
     end
@@ -72,24 +70,6 @@ describe MultiTenant do
     it { expect(@partition_key_not_model_task.non_model_id).to be 77 }
   end
 
-  describe 'Tenant model with a nonstandard class name' do
-    let(:account_klass) do
-      Class.new(ActiveRecord::Base) do
-        self.table_name = 'account'
-
-        def self.name
-          'UserAccount'
-        end
-
-        multi_tenant(:account)
-      end
-    end
-    it 'does not register the tenant model' do
-      expect(MultiTenant).not_to receive(:register_multi_tenant_model)
-      account_klass
-    end
-  end
-
   describe 'Changes table_name after multi_tenant called' do
     before do
       account_klass.has_many(:posts, anonymous_class: post_klass)
@@ -131,24 +111,6 @@ describe MultiTenant do
     it { expect(@posts).to eq([@post1]) }
   end
 
-  describe 'inspect method filters senstive column values' do
-    if ActiveRecord.gem_version >= Gem::Version.create('7.2.0')
-      # related: https://github.com/rails/rails/pull/49765
-      around do |example|
-        prev = Account.attributes_for_inspect
-        Account.attributes_for_inspect = :all
-        example.run
-      ensure
-        Account.attributes_for_inspect = prev
-      end
-    end
-
-    it 'filters senstive value' do
-      account = Account.new(name: 'foo', password: 'baz')
-      expect(account.inspect).to eq '#<Account id: nil, name: nil, subdomain: nil, domain: nil, password: [FILTERED]>'
-    end
-  end
-
   # Scoping models
   describe 'Project.all should be scoped to the current tenant if set' do
     before do
@@ -191,16 +153,16 @@ describe MultiTenant do
     end
   end
 
-  describe 'It should be possible to use aliased associations' do
+  describe "It should be possible to use aliased associations" do
     before do
       @account = Account.create! name: 'baz'
       MultiTenant.current_tenant = @account
     end
 
-    it { expect(AliasedTask.create(name: 'foo', project_alias: @project2).valid?).to eq(true) }
+    it { expect(AliasedTask.create(:name => 'foo', :project_alias => @project2).valid?).to eq(true) }
   end
 
-  describe 'It should be possible to use associations with partition_key from polymorphic' do
+  describe "It should be possible to use associations with partition_key from polymorphic" do
     before do
       @account = Account.create!(name: 'foo')
       MultiTenant.current_tenant = @account
@@ -223,22 +185,6 @@ describe MultiTenant do
       end
     end
 
-    it 'handles belongs_to with optional: true' do
-      record = OptionalSubTask.create(sub_task_id: sub_task.id)
-      expect(record.reload.sub_task).to eq(sub_task)
-      expect(record.account_id).to eq(nil)
-    end
-
-    it 'handles changing tenant from nil to a value' do
-      record = OptionalSubTask.create(sub_task_id: sub_task.id)
-      expect(record.reload.sub_task).to eq(sub_task)
-      expect(record.account_id).to eq(nil)
-
-      record.account = account
-      record.save!
-      expect(record.reload.account_id).to eq(account.id)
-    end
-
     it 'handles has_many through' do
       MultiTenant.with(account) do
         expect(project.sub_tasks).to eq [sub_task]
@@ -257,7 +203,7 @@ describe MultiTenant do
       MultiTenant.with(account) do
         sub_task
         manager
-        expect(Project.eager_load([{ manager: :project }, { tasks: :project }]).first).to eq project
+        expect(Project.eager_load([{manager: :project}, {tasks: :project}]).first).to eq project
       end
     end
   end
@@ -268,8 +214,7 @@ describe MultiTenant do
 
     it 'rewrites sub-selects correctly' do
       MultiTenant.with(account) do
-        expect(Project.where(id: Project.where(id: project.id))
-                      .where(id: Project.where(id: project.id)).first).to eq project
+        expect(Project.where(id: Project.where(id: project.id)).where(id: Project.where(id: project.id)).first).to eq project
       end
     end
   end
@@ -298,132 +243,70 @@ describe MultiTenant do
   end
 
   describe 'non-STI Subclass of abstract Multi Tenant Model' do
-    let(:tenant_id1) { 42 }
-    let(:tenant_id2) { 314_158 }
+    let(:tenant_id_1) { 42 }
+    let(:tenant_id_2) { 314158 }
     let(:name) { 'fooname' }
-    let(:subclass_task1) do
-      MultiTenant.with(tenant_id1) { SubclassTask.create! name: name }
+    let(:subclass_task_1) do
+      MultiTenant.with(tenant_id_1) { SubclassTask.create! name: name }
     end
-    let(:subclass_task2) do
-      MultiTenant.with(tenant_id2) { SubclassTask.create! name: name }
+    let(:subclass_task_2) do
+      MultiTenant.with(tenant_id_2) { SubclassTask.create! name: name }
     end
 
     before do
-      subclass_task1
-      subclass_task2
+      subclass_task_1
+      subclass_task_2
     end
 
     it 'injects tenant_id on create' do
-      expect(subclass_task1.non_model_id).to be tenant_id1
-      expect(subclass_task2.non_model_id).to be tenant_id2
+      expect(subclass_task_1.non_model_id).to be tenant_id_1
+      expect(subclass_task_2.non_model_id).to be tenant_id_2
     end
 
     it 'rewrites query' do
-      MultiTenant.with(tenant_id1) do
+      MultiTenant.with(tenant_id_1) do
         expect(SubclassTask.where(name: name).count).to eq 1
-        expect(SubclassTask.where(name: name).first).to eq subclass_task1
+        expect(SubclassTask.where(name: name).first).to eq subclass_task_1
       end
-      MultiTenant.with(tenant_id2) do
+      MultiTenant.with(tenant_id_2) do
         expect(SubclassTask.where(name: name).count).to eq 1
-        expect(SubclassTask.where(name: name).first).to eq subclass_task2
-      end
-    end
-  end
-
-  # Joins
-  describe 'joins for models' do
-    context 'for models with where condition in associations' do
-      let(:account) { Account.create!(name: 'Account 1') }
-
-      it 'should add tenant condition to the queries when tenant is set' do
-        expected_join_sql = <<-SQL.strip
-          SELECT "comments".*#{' '}
-          FROM "comments"#{' '}
-          INNER JOIN "tasks" ON "tasks"."id" = "comments"."commentable_id"#{' '}
-          AND "comments"."commentable_type" = 'Task' AND "tasks"."account_id" = 1#{' '}
-          WHERE "comments"."account_id" = 1
-        SQL
-
-        MultiTenant.with(account) do
-          expect(format_sql(Comment.joins(:task).to_sql)).to eq(format_sql(expected_join_sql))
-        end
-      end
-
-      it 'should add tenant condition to the queries when tenant is not set' do
-        MultiTenant.without do
-          expected_join_sql = <<-SQL.strip
-            SELECT "comments".*#{' '}
-            FROM "comments"#{' '}
-            INNER JOIN "tasks" ON "tasks"."id" = "comments"."commentable_id"#{' '}
-            AND "comments"."commentable_type" = 'Task' AND "comments"."account_id" = "tasks"."account_id"
-          SQL
-          expect(format_sql(Comment.joins(:task).to_sql)).to eq(format_sql(expected_join_sql))
-        end
-      end
-    end
-
-    context 'for models with default associations' do
-      let(:account) { Account.create!(name: 'Account 1') }
-
-      it 'should add tenant condition to the queries when tenant is set' do
-        expected_join_sql = <<-SQL.strip
-          SELECT "projects".*#{' '}
-          FROM "projects"#{' '}
-          INNER JOIN "tasks" ON "tasks"."project_id" = "projects"."id"#{' '}
-          AND "tasks"."account_id" = 1#{' '}
-          WHERE "projects"."account_id" = 1
-        SQL
-
-        MultiTenant.with(account) do
-          expect(format_sql(Project.joins(:tasks).to_sql)).to eq(format_sql(expected_join_sql))
-        end
-      end
-
-      it 'should add tenant condition to the queries when tenant is not set' do
-        MultiTenant.without do
-          expected_join_sql = <<-SQL.strip
-            SELECT "projects".*
-            FROM "projects"
-            INNER JOIN "tasks" ON "tasks"."project_id" = "projects"."id"
-            AND "projects"."account_id" = "tasks"."account_id"
-          SQL
-          expect(format_sql(Project.joins(:tasks).to_sql)).to eq(format_sql(expected_join_sql))
-        end
+        expect(SubclassTask.where(name: name).first).to eq subclass_task_2
       end
     end
   end
 
   # ::with
-  describe '::with' do
-    it 'should set current_tenant to the specified tenant inside the block' do
-      @account = Account.create!(name: 'baz')
+  describe "::with" do
+    it "should set current_tenant to the specified tenant inside the block" do
+      @account = Account.create!(:name => 'baz')
 
       MultiTenant.with(@account) do
         expect(MultiTenant.current_tenant).to eq(@account)
       end
     end
 
-    it 'should reset current_tenant to the previous tenant once exiting the block' do
-      @account1 = Account.create!(name: 'foo')
-      @account2 = Account.create!(name: 'bar')
+    it "should reset current_tenant to the previous tenant once exiting the block" do
+      @account1 = Account.create!(:name => 'foo')
+      @account2 = Account.create!(:name => 'bar')
 
       MultiTenant.current_tenant = @account1
       MultiTenant.with @account2 do
+
       end
 
       expect(MultiTenant.current_tenant).to eq(@account1)
     end
 
-    it 'should return the value of the block' do
-      @account1 = Account.create!(name: 'foo')
-      @account2 = Account.create!(name: 'bar')
+    it "should return the value of the block" do
+      @account1 = Account.create!(:name => 'foo')
+      @account2 = Account.create!(:name => 'bar')
 
       MultiTenant.current_tenant = @account1
       value = MultiTenant.with @account2 do
-        'something'
+        "something"
       end
 
-      expect(value).to eq 'something'
+      expect(value).to eq "something"
     end
 
     it 'supports reload inside the block' do
@@ -438,9 +321,9 @@ describe MultiTenant do
   end
 
   # ::without
-  describe '::without' do
-    it 'should unset current_tenant inside the block' do
-      @account = Account.create!(name: 'baz')
+  describe "::without" do
+    it "should unset current_tenant inside the block" do
+      @account = Account.create!(:name => 'baz')
 
       MultiTenant.current_tenant = @account
       MultiTenant.without do
@@ -448,25 +331,39 @@ describe MultiTenant do
       end
     end
 
-    it 'should reset current_tenant to the previous tenant once exiting the block' do
-      @account1 = Account.create!(name: 'foo')
+    it "should reset current_tenant to the previous tenant once exiting the block" do
+      @account1 = Account.create!(:name => 'foo')
 
       MultiTenant.current_tenant = @account1
       MultiTenant.without do
+
       end
 
       expect(MultiTenant.current_tenant).to eq(@account1)
     end
 
-    it 'should return the value of the block' do
-      @account1 = Account.create!(name: 'foo')
+    it "should return the value of the block" do
+      @account1 = Account.create!(:name => 'foo')
 
       MultiTenant.current_tenant = @account1
       value = MultiTenant.without do
-        'something'
+        "something"
       end
 
-      expect(value).to eq 'something'
+      expect(value).to eq "something"
+    end
+  end
+
+  describe '.with_lock' do
+    it 'supports with_lock blocks inside the block' do
+      @account = Account.create!(name: 'foo')
+
+      MultiTenant.with @account do
+        project = @account.projects.create!(name: 'project')
+        project.with_lock do
+          expect(project.name).to eq 'project'
+        end
+      end
     end
   end
 
@@ -491,20 +388,13 @@ describe MultiTenant do
     end
   end
 
-  it 'applies the team_id conditions in the where clause' do
-    option1 = <<-SQL.strip
-      SELECT "sub_tasks".*#{' '}
-      FROM "sub_tasks"#{' '}
-      INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id" AND "tasks"."account_id" = "sub_tasks"."account_id"#{' '}
-      WHERE "tasks"."project_id" = 1 AND "sub_tasks"."account_id" = 1 AND "tasks"."account_id" = 1
-    SQL
-    option2 = <<-SQL.strip
-      SELECT "sub_tasks".*#{' '}
-      FROM "sub_tasks"#{' '}
-      INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id"#{' '}
-      AND "tasks"."account_id" = "sub_tasks"."account_id"#{' '}
-      WHERE "sub_tasks"."account_id" = 1 AND "tasks"."project_id" = 1 AND "tasks"."account_id" = 1
-    SQL
+  it "applies the team_id conditions in the where clause" do
+    option1 = <<-sql.strip
+      SELECT "sub_tasks".* FROM "sub_tasks" INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id" AND "sub_tasks"."account_id" = "tasks"."account_id" WHERE "tasks"."project_id" = 1 AND "sub_tasks"."account_id" = 1 AND "tasks"."account_id" = 1
+    sql
+    option2 = <<-sql.strip
+      SELECT "sub_tasks".* FROM "sub_tasks" INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id" AND "sub_tasks"."account_id" = "tasks"."account_id" WHERE "sub_tasks"."account_id" = 1 AND "tasks"."project_id" = 1 AND "tasks"."account_id" = 1
+    sql
 
     account1 = Account.create! name: 'Account 1'
 
@@ -512,38 +402,27 @@ describe MultiTenant do
       project1 = Project.create! name: 'Project 1'
       task1 = Task.create! name: 'Task 1', project: project1
       subtask1 = SubTask.create! task: task1
-      expect(format_sql(project1.sub_tasks.to_sql))
-        .to eq(format_sql(option1)).or(eq(format_sql(option2)))
+      expect(project1.sub_tasks.to_sql).to eq(option1).or(eq(option2))
       expect(project1.sub_tasks).to include(subtask1)
     end
 
     MultiTenant.without do
-      expected_sql = <<-SQL
-        SELECT "sub_tasks".*#{' '}
-        FROM "sub_tasks"#{' '}
-        INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id"#{' '}
-        AND "tasks"."account_id" = "sub_tasks"."account_id"#{' '}
-        WHERE "tasks"."project_id" = 1
-      SQL
+      expected_sql = <<-sql
+                        SELECT "sub_tasks".* FROM "sub_tasks" INNER JOIN "tasks" ON "sub_tasks"."task_id" = "tasks"."id" AND "sub_tasks"."account_id" = "tasks"."account_id" WHERE "tasks"."project_id" = 1
+                     sql
 
       project = Project.first
-      expect(format_sql(project.sub_tasks.to_sql)).to eq(format_sql(expected_sql.strip))
+      expect(project.sub_tasks.to_sql).to eq(expected_sql.strip)
     end
   end
 
-  it 'tests joins between distributed and reference table' do
-    option1 = <<-SQL.strip
-      SELECT "categories".*#{' '}
-      FROM "categories"#{' '}
-      INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id"#{' '}
-      WHERE "project_categories"."project_id" = 1 AND "project_categories"."account_id" = 1
-    SQL
-    option2 = <<-SQL.strip
-      SELECT "categories".*#{' '}
-      FROM "categories"#{' '}
-      INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id"#{' '}
-      WHERE "project_categories"."account_id" = 1 AND "project_categories"."project_id" = 1
-    SQL
+  it "tests joins between distributed and reference table" do
+    option1 = <<-sql.strip
+      SELECT "categories".* FROM "categories" INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id" WHERE "project_categories"."project_id" = 1 AND "project_categories"."account_id" = 1
+    sql
+    option2 = <<-sql.strip
+      SELECT "categories".* FROM "categories" INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id" WHERE "project_categories"."account_id" = 1 AND "project_categories"."project_id" = 1
+    sql
 
     account1 = Account.create! name: 'Account 1'
     category1 = Category.create! name: 'Category 1'
@@ -552,72 +431,47 @@ describe MultiTenant do
       project1 = Project.create! name: 'Project 1'
       projectcategory = ProjectCategory.create! name: 'project cat 1', project: project1, category: category1
 
-      expect(format_sql(project1.categories.to_sql))
-        .to eq(format_sql(option1)).or(eq(format_sql(option2)))
+      expect(project1.categories.to_sql).to eq(option1).or(eq(option2))
       expect(project1.categories).to include(category1)
       expect(project1.project_categories).to include(projectcategory)
     end
 
     MultiTenant.without do
-      expected_sql = <<-SQL
-        SELECT "categories".*#{' '}
-        FROM "categories"#{' '}
-        INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id"#{' '}
-        WHERE "project_categories"."project_id" = 1
-      SQL
+      expected_sql = <<-sql
+                     SELECT "categories".* FROM "categories" INNER JOIN "project_categories" ON "categories"."id" = "project_categories"."category_id" WHERE "project_categories"."project_id" = 1
+                     sql
 
       project = Project.first
-      expect(format_sql(project.categories.to_sql))
-        .to eq(format_sql(expected_sql.strip))
+      expect(project.categories.to_sql).to eq(expected_sql.strip)
       expect(project.categories).to include(category1)
 
-      expected_sql = <<-SQL
-        SELECT "projects".* FROM "projects"#{' '}
-        INNER JOIN "project_categories" ON "project_categories"."project_id" = "projects"."id"#{' '}
-        AND "projects"."account_id" = "project_categories"."account_id"#{' '}
-        INNER JOIN "categories" ON "categories"."id" = "project_categories"."category_id"#{' '}
-        WHERE "projects"."account_id" = 1
-      SQL
+      expected_sql = <<-sql
+                        SELECT "projects".* FROM "projects" INNER JOIN "project_categories" ON "project_categories"."project_id" = "projects"."id" AND "project_categories"."account_id" = "projects"."account_id" INNER JOIN "categories" ON "categories"."id" = "project_categories"."category_id" WHERE "projects"."account_id" = 1
+                    sql
 
-      expect(format_sql(Project.where(account_id: 1).joins(:categories).to_sql))
-        .to eq(format_sql(expected_sql.strip))
+      expect(Project.where(account_id: 1).joins(:categories).to_sql).to eq(expected_sql.strip)
       project = Project.where(account_id: 1).joins(:categories).first
       expect(project.categories).to include(category1)
     end
   end
 
-  it 'test eager_load' do
+
+  it "test eager_load" do
     account1 = Account.create! name: 'Account 1'
     category1 = Category.create! name: 'Category 1'
 
-    option1 = <<-SQL.strip
-      SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2,
-      "categories"."id" AS t1_r0, "categories"."name" AS t1_r1
-      FROM "projects"
-      LEFT OUTER JOIN "project_categories"
-      ON "project_categories"."project_id" = "projects"."id" AND "project_categories"."account_id" = 1
-      AND "projects"."account_id" = 1#{' '}
-      LEFT OUTER JOIN "categories" ON "categories"."id" = "project_categories"."category_id"
-      AND "project_categories"."account_id" = 1
-      WHERE "projects"."account_id" = 1
-    SQL
-    option2 = <<-SQL.strip
-      SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2,#{' '}
-      "categories"."id" AS t1_r0, "categories"."name" AS t1_r1#{' '}
-      FROM "projects"#{' '}
-      LEFT OUTER JOIN "project_categories"#{' '}
-      ON "project_categories"."account_id" = 1#{' '}
-      AND "project_categories"."project_id" = "projects"."id" AND "projects"."account_id" = 1#{' '}
-      LEFT OUTER JOIN "categories" ON "categories"."id" = "project_categories"."category_id"#{' '}
-      AND "project_categories"."account_id" = 1 WHERE "projects"."account_id" = 1
-    SQL
+    option1 = <<-sql.strip
+      SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1 FROM "projects" LEFT OUTER JOIN "project_categories" ON "project_categories"."project_id" = "projects"."id" AND "project_categories"."account_id" = 1 AND "projects"."account_id" = 1 LEFT OUTER JOIN "categories" ON "categories"."id" = "project_categories"."category_id" AND "project_categories"."account_id" = 1 WHERE "projects"."account_id" = 1
+    sql
+    option2 = <<-sql.strip
+      SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1 FROM "projects" LEFT OUTER JOIN "project_categories" ON "project_categories"."account_id" = 1 AND "project_categories"."project_id" = "projects"."id" AND "projects"."account_id" = 1 LEFT OUTER JOIN "categories" ON "categories"."id" = "project_categories"."category_id" AND "project_categories"."account_id" = 1 WHERE "projects"."account_id" = 1
+    sql
 
     MultiTenant.with(account1) do
       project1 = Project.create! name: 'Project 1'
       projectcategory = ProjectCategory.create! name: 'project cat 1', project: project1, category: category1
 
-      expect(format_sql(Project.eager_load(:categories).to_sql))
-        .to eq(format_sql(option1)).or(eq(format_sql(option2)))
+      expect(Project.eager_load(:categories).to_sql).to eq(option1).or(eq(option2))
 
       project = Project.eager_load(:categories).first
       expect(project.categories).to include(category1)
@@ -625,120 +479,82 @@ describe MultiTenant do
     end
 
     MultiTenant.without do
-      expected_sql = <<-SQL
-        SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2,#{' '}
-        "categories"."id" AS t1_r0, "categories"."name" AS t1_r1#{' '}
-        FROM "projects" LEFT OUTER JOIN "project_categories"#{' '}
-        ON "project_categories"."project_id" = "projects"."id" AND "projects"."account_id" = "project_categories"."account_id"#{' '}
-        LEFT OUTER JOIN "categories"#{' '}
-        ON "categories"."id" = "project_categories"."category_id"#{' '}
-        WHERE "projects"."account_id" = 1
-      SQL
-
-      expect(format_sql(Project.where(account_id: 1).eager_load(:categories).to_sql))
-        .to eq(format_sql(expected_sql.strip))
+      expected_sql = <<-sql
+                     SELECT "projects"."id" AS t0_r0, "projects"."account_id" AS t0_r1, "projects"."name" AS t0_r2, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1 FROM "projects" LEFT OUTER JOIN "project_categories" ON "project_categories"."project_id" = "projects"."id" AND "project_categories"."account_id" = "projects"."account_id" LEFT OUTER JOIN "categories" ON "categories"."id" = "project_categories"."category_id" WHERE "projects"."account_id" = 1
+                     sql
+
+      expect(Project.where(account_id: 1).eager_load(:categories).to_sql).to eq(expected_sql.strip)
 
       project = Project.where(account_id: 1).eager_load(:categories).first
       expect(project.categories).to include(category1)
+
     end
   end
 
-  it 'test raw SQL joins' do
+  it "test raw SQL joins" do
     account1 = Account.create! name: 'Account 1'
     category1 = Category.create! name: 'Category 1'
 
     MultiTenant.with(account1) do
-      option1 = <<-SQL.strip
-        SELECT "tasks".* FROM "tasks"
-        INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" AND "projects"."account_id" = 1
-        LEFT JOIN project_categories pc ON project.category_id = pc.id#{' '}
-        WHERE "tasks"."account_id" = 1
-      SQL
-      option2 = <<-SQL.strip
-        SELECT "tasks".* FROM "tasks"
-        INNER JOIN "projects" ON "projects"."account_id" = 1#{' '}
-        AND "projects"."id" = "tasks"."project_id"
-        LEFT JOIN project_categories pc ON project.category_id = pc.id#{' '}
-        WHERE "tasks"."account_id" = 1
-      SQL
+      option1 = <<-sql.strip
+        SELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" AND "projects"."account_id" = 1 LEFT JOIN project_categories pc ON project.category_id = pc.id WHERE "tasks"."account_id" = 1
+      sql
+      option2 = <<-sql.strip
+        SELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."account_id" = 1 AND "projects"."id" = "tasks"."project_id" LEFT JOIN project_categories pc ON project.category_id = pc.id WHERE "tasks"."account_id" = 1
+      sql
 
       project1 = Project.create! name: 'Project 1'
-      ProjectCategory.create! name: 'project cat 1', project: project1, category: category1
+      projectcategory = ProjectCategory.create! name: 'project cat 1', project: project1, category: category1
 
       project1.tasks.create! name: 'baz'
-      expect(
-        format_sql(
-          Task.joins(:project).joins('LEFT JOIN project_categories pc ON project.category_id = pc.id').to_sql
-        )
-      ).to eq(format_sql(option1)).or(eq(format_sql(option2)))
+      expect(Task.joins(:project).joins('LEFT JOIN project_categories pc ON project.category_id = pc.id').to_sql).to eq(option1).or(eq(option2))
     end
 
     MultiTenant.without do
-      expected_sql = <<-SQL.strip
-        SELECT "tasks".* FROM "tasks"
-        INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"
-        AND "tasks"."account_id" = "projects"."account_id"
-        LEFT JOIN project_categories pc ON project.category_id = pc.id
-        WHERE "tasks"."account_id" = 1
-      SQL
-
-      expect(format_sql(Task.where(account_id: 1).joins(:project)
-                 .joins('LEFT JOIN project_categories pc ON project.category_id = pc.id')
-                 .to_sql)).to eq(format_sql(expected_sql.strip))
+      expected_sql = <<-sql
+                     SELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" AND "projects"."account_id" = "tasks"."account_id" LEFT JOIN project_categories pc ON project.category_id = pc.id WHERE "tasks"."account_id" = 1
+                     sql
+
+      expect(Task.where(account_id: 1).joins(:project).joins('LEFT JOIN project_categories pc ON project.category_id = pc.id').to_sql).to eq(expected_sql.strip)
+
     end
+
   end
 
-  it 'only applies clauses when a tenant is set' do
+  it "only applies clauses when a tenant is set" do
     account = Account.create! name: 'Account 1'
     project = Project.create! name: 'Project 1', account: account
     project2 = Project.create! name: 'Project 2', account: Account.create!(name: 'Account2')
 
     MultiTenant.with(account) do
-      option1 = <<-SQL.strip
-        SELECT "projects".* FROM "projects"#{' '}
-        WHERE "projects"."account_id" = #{account.id} AND "projects"."id" = $1 LIMIT $2
-      SQL
-      option2 = <<-SQL.strip
-        SELECT "projects".* FROM "projects"#{' '}
-        WHERE "projects"."id" = $1 AND "projects"."account_id" = #{account.id} LIMIT $2
-      SQL
-      option3 = <<-SQL.strip
-        SELECT  "projects".* FROM "projects"
-        WHERE "projects"."id" = $1
-        AND "projects"."account_id" = #{account.id} LIMIT $2
-      SQL
-
-      # Couldn't make the following line pass for some reason, so came up with an uglier alternative
-      # expect(Project).to receive(:find_by_sql).with(eq(option1).
-      # or(eq(option2)).or(eq(option3)), any_args).and_call_original
-      expect(Project).to receive(:find_by_sql).and_wrap_original do |m, *args|
-        expect(format_sql(args[0])).to(eq(format_sql(option1))
-                                               .or(eq(format_sql(option2))).or(eq(format_sql(option3))))
-        m.call(args[0], args[1], preparable: args[2][:preparable])
-      end
+      option1 = <<-sql.strip
+        SELECT "projects".* FROM "projects" WHERE "projects"."account_id" = #{account.id} AND "projects"."id" = $1 LIMIT $2
+      sql
+      option2 = <<-sql.strip
+        SELECT "projects".* FROM "projects" WHERE "projects"."id" = $1 AND "projects"."account_id" = #{account.id} LIMIT $2
+      sql
+      option3 = <<-sql.strip
+        SELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 AND "projects"."account_id" = #{account.id} LIMIT $2
+      sql
+
+      expect(Project).to receive(:find_by_sql).with(eq(option1).or(eq(option2)).or(eq(option3)), any_args).and_call_original
       expect(Project.find(project.id)).to eq(project)
     end
 
     MultiTenant.without do
-      option1 = <<-SQL.strip
-        SELECT "projects".* FROM "projects"#{' '}
-        WHERE "projects"."id" = $1 LIMIT $2
-      SQL
-      option2 = <<-SQL.strip
-        SELECT  "projects".* FROM "projects"#{' '}
-        WHERE "projects"."id" = $1 LIMIT $2
-      SQL
-
-      # Couldn't make the following line pass for some reason, so came up with an uglier alternative
-      # expect(Project).to receive(:find_by_sql).with(eq(option1).or(eq(option2)), any_args).and_call_original
-      expect(Project).to receive(:find_by_sql).and_wrap_original do |m, *args|
-        expect(format_sql(args[0])).to(eq(format_sql(option1)).or(eq(format_sql(option2))))
-        m.call(args[0], args[1], preparable: args[2][:preparable])
-      end
+      option1 = <<-sql.strip
+        SELECT "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2
+      sql
+      option2 = <<-sql.strip
+        SELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2
+      sql
+
+      expect(Project).to receive(:find_by_sql).with(eq(option1).or(eq(option2)), any_args).and_call_original
       expect(Project.find(project2.id)).to eq(project2)
     end
   end
 
+
   describe 'with unsaved association' do
     before do
       @account = Account.create!(name: 'reflection tenant')
@@ -752,13 +568,13 @@ describe MultiTenant do
     end
   end
 
-  it 'test value of RETURNING insert in table with no pkey' do
+  it "test value of RETURNING insert in table with no pkey" do
     account1 = Account.create(name: 'test1')
 
     MultiTenant.with(account1) do
-      AllowedPlace.create! name: 'something1'
+      allowed_place = AllowedPlace.create! name: 'something1'
 
-      Project.create! name: 'Project 1'
+      project = Project.create! name: 'Project 1'
     end
   end
 end
diff --git a/spec/activerecord-multi-tenant/multi_tenant_spec.rb b/spec/activerecord-multi-tenant/multi_tenant_spec.rb
index f2f9fca..89d91e6 100644
--- a/spec/activerecord-multi-tenant/multi_tenant_spec.rb
+++ b/spec/activerecord-multi-tenant/multi_tenant_spec.rb
@@ -1,10 +1,8 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 RSpec.describe MultiTenant do
-  describe '.load_current_tenant!' do
-    let(:fake_tenant) { double(id: 1) }
+  describe ".load_current_tenant!" do
+    let(:fake_tenant) { OpenStruct.new(id: 1) }
     let(:mock_klass) { double(find: fake_tenant) }
 
     before do
@@ -16,14 +14,14 @@ RSpec.describe MultiTenant do
       MultiTenant.default_tenant_class = @original_default_class
     end
 
-    it 'sets and returns the loaded current_tenant' do
+    it "sets and returns the loaded current_tenant" do
       expect(mock_klass).to receive(:find).once.with(1)
       MultiTenant.current_tenant = 1
       expect(MultiTenant.load_current_tenant!).to eq(fake_tenant)
       expect(MultiTenant.current_tenant).to eq(fake_tenant)
     end
 
-    it 'respects `.with` lifecycle' do
+    it "respects `.with` lifecycle" do
       expect(mock_klass).to receive(:find).once.with(2)
       expect(MultiTenant.current_tenant).to eq(nil)
       MultiTenant.with(2) do
@@ -33,116 +31,34 @@ RSpec.describe MultiTenant do
       expect(MultiTenant.current_tenant).to eq(nil)
     end
 
-    context 'with a loaded current_tenant' do
-      it 'returns the tenant without fetching it' do
+    context "with a loaded current_tenant" do
+      it "returns the tenant without fetching it" do
         expect(mock_klass).not_to receive(:find)
         MultiTenant.current_tenant = fake_tenant
         expect(MultiTenant.load_current_tenant!).to eq(fake_tenant)
       end
     end
 
-    context 'with a nil current_tenant' do
-      it 'raises an error, as there is not enough information to load the tenant' do
+    context "with a nil current_tenant" do
+      it "raises an error, as there is not enough information to load the tenant" do
         expect(mock_klass).not_to receive(:find)
-        expect do
+        expect {
           MultiTenant.load_current_tenant!
-        end.to raise_error(RuntimeError, 'MultiTenant.current_tenant must be set to load')
+        }.to raise_error(RuntimeError, 'MultiTenant.current_tenant must be set to load')
       end
     end
 
-    context 'without a default class set' do
+    context "without a default class set" do
       before do
         MultiTenant.default_tenant_class = nil
       end
 
-      it 'raises an error, as there is not enough information to load the tenant' do
+      it "raises an error, as there is not enough information to load the tenant" do
         expect(mock_klass).not_to receive(:find)
         MultiTenant.current_tenant = 1
-        expect do
+        expect {
           MultiTenant.load_current_tenant!
-        end.to raise_error(RuntimeError, 'Only have tenant id, and no default tenant class set')
-      end
-    end
-  end
-
-  describe '.tenant_klass_defined?' do
-    context 'without options' do
-      before(:all) do
-        class SampleTenant < ActiveRecord::Base
-          multi_tenant :sample_tenant
-        end
-      end
-
-      it 'return true with valid tenant_name' do
-        expect(MultiTenant.tenant_klass_defined?(:sample_tenant)).to eq(true)
-      end
-
-      it 'return false with invalid_tenant_name' do
-        invalid_tenant_name = :tenant
-        expect(MultiTenant.tenant_klass_defined?(invalid_tenant_name)).to eq(false)
-      end
-    end
-
-    context 'with options' do
-      context 'and valid class_name' do
-        it 'return true' do
-          class SampleTenant < ActiveRecord::Base
-            multi_tenant :tenant
-          end
-
-          tenant_name = :tenant
-          options = {
-            class_name: 'SampleTenant'
-          }
-          expect(MultiTenant.tenant_klass_defined?(tenant_name, options)).to eq(true)
-        end
-
-        it 'return true when tenant class is nested' do
-          module SampleModule
-            class SampleNestedTenant < ActiveRecord::Base
-              multi_tenant :tenant
-            end
-            # rubocop:disable Layout/TrailingWhitespace
-            # Trailing whitespace is intentionally left here
-            
-            class AnotherTenant < ActiveRecord::Base
-            end
-            # rubocop:enable Layout/TrailingWhitespace
-          end
-          tenant_name = :tenant
-          options = {
-            class_name: 'SampleModule::SampleNestedTenant'
-          }
-          expect(MultiTenant.tenant_klass_defined?(tenant_name, options)).to eq(true)
-        end
-      end
-    end
-  end
-
-  describe '.wrap_methods' do
-    context 'when method is already prepended' do
-      it 'is not an stack error' do
-        klass = Class.new do
-          def hello
-            'hello'
-          end
-        end
-
-        klass.prepend(Module.new do
-          def hello
-            "#{super} world"
-          end
-
-          def owner
-            Class.new(ActiveRecord::Base) do
-              self.table_name = 'accounts'
-            end.new
-          end
-        end)
-
-        MultiTenant.wrap_methods(klass, :owner, :hello)
-
-        expect(klass.new.hello).to eq('hello world')
+        }.to raise_error(RuntimeError, 'Only have tenant id, and no default tenant class set')
       end
     end
   end
diff --git a/spec/activerecord-multi-tenant/query_rewriter_spec.rb b/spec/activerecord-multi-tenant/query_rewriter_spec.rb
index db0edda..5d5418a 100644
--- a/spec/activerecord-multi-tenant/query_rewriter_spec.rb
+++ b/spec/activerecord-multi-tenant/query_rewriter_spec.rb
@@ -1,242 +1,112 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
-describe 'Query Rewriter' do
-  before(:each) do
-    @queries = []
-    ActiveSupport::Notifications.subscribe('sql.active_record') do |_name, _started, _finished, _unique_id, payload|
-      @queries << payload[:sql]
-    end
-  end
+describe "Query Rewriter" do
 
-  context 'when bulk updating' do
-    let!(:account) { Account.create!(name: 'Test Account') }
-    let!(:project) { Project.create(name: 'Project 1', account: account) }
-    let!(:manager) { Manager.create(name: 'Manager', project: project, account: account) }
+  context "when bulk updating" do
+    let!(:account) { Account.create!(name: "Test Account") }
+    let!(:project) { Project.create(name: "Project 1", account: account) }
+    let!(:manager) { Manager.create(name: "Manager", project: project, account: account) }
 
-    it 'updates the records' do
-      expect do
+    it "updates the records" do
+      expect {
         MultiTenant.with(account) do
-          Project.joins(:manager).update_all(name: 'New Name')
+          Project.joins(:manager).update_all(name: "New Name")
         end
-      end.to change { project.reload.name }.from('Project 1').to('New Name')
+      }.to change { project.reload.name }.from("Project 1").to("New Name")
     end
 
-    it 'updates the records without a current tenant' do
-      expect do
-        Project.joins(:manager).update_all(name: 'New Name')
-      end.to change { project.reload.name }.from('Project 1').to('New Name')
+    it "updates the records without a current tenant" do
+      expect {
+        Project.joins(:manager).update_all(name: "New Name")
+      }.to change { project.reload.name }.from("Project 1").to("New Name")
     end
 
-    it 'update the record' do
-      expect do
+    it "update the record" do
+      expect {
         MultiTenant.with(account) do
-          project.update(name: 'New Name')
+          project.update(name: "New Name")
         end
-      end.to change { project.reload.name }.from('Project 1').to('New Name')
+      }.to change { project.reload.name }.from("Project 1").to("New Name")
     end
 
-    it 'update the record without a current tenant' do
-      expect do
-        project.update(name: 'New Name')
-      end.to change { project.reload.name }.from('Project 1').to('New Name')
-    end
-
-    it 'update_all the records with expected query' do
-      expected_query = <<-SQL.strip
-          UPDATE "projects" SET "name" = 'New Name' WHERE "projects"."id" IN
-            (SELECT "projects"."id" FROM "projects"
-                INNER JOIN "managers" ON "managers"."project_id" = "projects"."id"
-                                    and "managers"."account_id" = :account_id
-                WHERE "projects"."account_id" = :account_id
-                                    )
-                                    AND "projects"."account_id" = :account_id
-      SQL
-
-      expect do
-        MultiTenant.with(account) do
-          Project.joins(:manager).update_all(name: 'New Name')
-        end
-      end.to change { project.reload.name }.from('Project 1').to('New Name')
-
-      @queries.each do |actual_query|
-        next unless actual_query.include?('UPDATE "projects" SET "name"')
-
-        expect(format_sql(actual_query)).to eq(format_sql(expected_query.gsub(':account_id', account.id.to_s)))
-      end
-    end
-
-    it 'updates a limited number of records with expected query' do
-      # create 2 more projects
-      Project.create(name: 'project2', account: account)
-      Project.create(name: 'project3', account: account)
-      new_name = 'New Name'
-      limit = 2
-      expected_query = <<-SQL
-        UPDATE
-          "projects"
-        SET
-          "name" = 'New Name'
-        WHERE
-          "projects"."id" IN (
-            SELECT
-              "projects"."id"
-            FROM
-              "projects"
-            WHERE
-              "projects"."account_id" = #{account.id} LIMIT #{limit}
-          )
-          AND "projects"."account_id" = #{account.id}
-      SQL
-
-      expect do
-        MultiTenant.with(account) do
-          Project.limit(limit).update_all(name: new_name)
-        end
-      end.to change { Project.where(name: new_name).count }.from(0).to(limit)
-
-      @queries.each do |actual_query|
-        next unless actual_query.include?('UPDATE "projects" SET "name"')
-
-        expect(format_sql(actual_query.gsub('$1',
-                                            limit.to_s)).strip).to eq(format_sql(expected_query).strip)
-      end
+    it "update the record without a current tenant" do
+      expect {
+        project.update(name: "New Name")
+      }.to change { project.reload.name }.from("Project 1").to("New Name")
     end
   end
 
-  context 'when bulk deleting' do
-    let!(:account) { Account.create!(name: 'Test Account') }
-    let!(:project1) { Project.create(name: 'Project 1', account: account) }
-    let!(:project2) { Project.create(name: 'Project 2', account: account) }
-    let!(:project3) { Project.create(name: 'Project 3', account: account) }
-    let!(:manager1) { Manager.create(name: 'Manager 1', project: project1, account: account) }
-    let!(:manager2) { Manager.create(name: 'Manager 2', project: project2, account: account) }
-
-    before(:each) do
-      @queries = []
-      ActiveSupport::Notifications.subscribe('sql.active_record') do |_name, _started, _finished, _unique_id, payload|
-        @queries << payload[:sql]
-      end
-    end
+  context "when bulk deleting" do
+    let!(:account) { Account.create!(name: "Test Account") }
+    let!(:project1) { Project.create(name: "Project 1", account: account) }
+    let!(:project2) { Project.create(name: "Project 2", account: account) }
+    let!(:project3) { Project.create(name: "Project 3", account: account) }
+    let!(:manager1) { Manager.create(name: "Manager 1", project: project1, account: account) }
+    let!(:manager2) { Manager.create(name: "Manager 2", project: project2, account: account) }
 
-    after(:each) do
-      ActiveSupport::Notifications.unsubscribe('sql.active_record')
-    end
-
-    it 'delete_all the records' do
-      expected_query = <<-SQL.strip
-          DELETE FROM "projects" WHERE "projects"."id" IN
-            (SELECT "projects"."id" FROM "projects"
-                INNER JOIN "managers" ON "managers"."project_id" = "projects"."id"
-                                    and "managers"."account_id" = :account_id
-                WHERE "projects"."account_id" = :account_id
-                                    )
-                                    AND "projects"."account_id" = :account_id
-      SQL
-
-      expect do
+    it "delete_all the records" do
+      expect {
         MultiTenant.with(account) do
           Project.joins(:manager).delete_all
         end
-      end.to change { Project.count }.from(3).to(1)
-
-      @queries.each do |actual_query|
-        next unless actual_query.include?('DELETE FROM ')
-
-        expect(format_sql(actual_query)).to eq(format_sql(expected_query.gsub(':account_id', account.id.to_s)))
-      end
+      }.to change { Project.count }.from(3).to(1)
     end
 
-    it 'delete_all the records without a current tenant' do
-      expect do
+    it "delete_all the records without a current tenant" do
+      expect {
         Project.joins(:manager).delete_all
-      end.to change { Project.count }.from(3).to(1)
+      }.to change { Project.count }.from(3).to(1)
     end
 
-    it 'delete the record' do
-      expect do
+    it "delete the record" do
+      expect {
         MultiTenant.with(account) do
           project1.delete
           Project.delete(project2.id)
         end
-      end.to change { Project.count }.from(3).to(1)
+      }.to change { Project.count }.from(3).to(1)
     end
 
-    it 'delete the record without a current tenant' do
-      expect do
+    it "delete the record without a current tenant" do
+      expect {
         project1.delete
         Project.delete(project2.id)
-      end.to change { Project.count }.from(3).to(1)
-    end
-
-    it 'deletes a limited number of records with expected query' do
-      # create 2 more projects
-      Project.create(name: 'project2', account: account)
-      Project.create(name: 'project3', account: account)
-      limit = 2
-      expected_query = <<-SQL
-        DELETE FROM
-          "projects"
-        WHERE
-          "projects"."id" IN (
-            SELECT
-              "projects"."id"
-            FROM
-              "projects"
-            WHERE
-              "projects"."account_id" = #{account.id} LIMIT #{limit}
-          )
-          AND "projects"."account_id" = #{account.id}
-      SQL
-
-      expect do
-        MultiTenant.with(account) do
-          Project.limit(limit).delete_all
-        end
-      end.to change { Project.count }.by(-limit)
-
-      @queries.each do |actual_query|
-        next unless actual_query.include?('DELETE FROM "projects"')
-
-        expect(format_sql(actual_query.gsub('$1',
-                                            limit.to_s)).strip).to eq(format_sql(expected_query).strip)
-      end
+      }.to change { Project.count }.from(3).to(1)
     end
 
-    it 'destroy the record' do
-      expect do
+    it "destroy the record" do
+      expect {
         MultiTenant.with(account) do
           project1.destroy
           Project.destroy(project2.id)
         end
-      end.to change { Project.count }.from(3).to(1)
+      }.to change { Project.count }.from(3).to(1)
     end
 
-    it 'destroy the record without a current tenant' do
-      expect do
+    it "destroy the record without a current tenant" do
+      expect {
         project1.destroy
         Project.destroy(project2.id)
-      end.to change { Project.count }.from(3).to(1)
+      }.to change { Project.count }.from(3).to(1)
     end
   end
 
-  context 'when update without arel' do
-    it 'can call method' do
-      expect do
-        ActiveRecord::Base.connection.update('SELECT 1')
-      end.not_to raise_error
+  context "when update without arel" do
+    it "can call method" do
+      expect {
+        ActiveRecord::Base.connection.update("SELECT 1")
+      }.not_to raise_error
     end
   end
 
-  context 'when joining with a model with a default scope' do
-    let!(:account) { Account.create!(name: 'Test Account') }
+  context "when joining with a model with a default scope" do
+    let!(:account) { Account.create!(name: "Test Account") }
 
-    it 'fetches only records within the default scope' do
-      alive = Domain.create(name: 'alive', account: account)
-      deleted = Domain.create(name: 'deleted', deleted: true, account: account)
-      page_in_alive_domain = Page.create(name: 'alive', account: account, domain: alive)
-      Page.create(name: 'deleted', account: account, domain: deleted)
+    it "fetches only records within the default scope" do
+      alive = Domain.create(name: "alive", account: account)
+      deleted = Domain.create(name: "deleted", deleted: true, account: account)
+      page_in_alive_domain = Page.create(name: "alive", account: account, domain: alive)
+      page_in_deleted_domain = Page.create(name: "deleted", account: account, domain: deleted)
 
       expect(
         MultiTenant.with(account) do
diff --git a/spec/activerecord-multi-tenant/record_callback_spec.rb b/spec/activerecord-multi-tenant/record_callback_spec.rb
index 816fb67..4a7e64f 100644
--- a/spec/activerecord-multi-tenant/record_callback_spec.rb
+++ b/spec/activerecord-multi-tenant/record_callback_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 class ProjectWithCallbacks < ActiveRecord::Base
diff --git a/spec/activerecord-multi-tenant/record_finding_spec.rb b/spec/activerecord-multi-tenant/record_finding_spec.rb
index d5b4607..6bda9cd 100644
--- a/spec/activerecord-multi-tenant/record_finding_spec.rb
+++ b/spec/activerecord-multi-tenant/record_finding_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 describe MultiTenant, 'Record finding' do
@@ -63,36 +61,36 @@ describe MultiTenant, 'Record finding' do
   end
 
   context 'model with has_many relation through multi-tenant model' do
-    let(:tenant1) { Account.create! name: 'Tenant 1' }
-    let(:project1) { tenant1.projects.create! }
+    let(:tenant_1) { Account.create! name: 'Tenant 1' }
+    let(:project_1) { tenant_1.projects.create! }
 
-    let(:tenant2) { Account.create! name: 'Tenant 2' }
-    let(:project2) { tenant2.projects.create! }
+    let(:tenant_2) { Account.create! name: 'Tenant 2' }
+    let(:project_2) { tenant_2.projects.create! }
 
     let(:category) { Category.create! name: 'Category' }
 
     before do
-      ProjectCategory.create! account: tenant1, name: '1', project: project1, category: category
-      ProjectCategory.create! account: tenant2, name: '2', project: project2, category: category
+      ProjectCategory.create! account: tenant_1, name: '1', project: project_1, category: category
+      ProjectCategory.create! account: tenant_2, name: '2', project: project_2, category: category
     end
 
     it 'can get model without creating query cache' do
-      MultiTenant.with(tenant1) do
-        found_category = Project.find(project1.id).categories.to_a.first
+      MultiTenant.with(tenant_1) do
+        found_category = Project.find(project_1.id).categories.to_a.first
         expect(found_category).to eq(category)
       end
     end
 
     it 'can get model for other tenant' do
-      MultiTenant.with(tenant2) do
-        found_category = Project.find(project2.id).categories.to_a.first
+      MultiTenant.with(tenant_2) do
+        found_category = Project.find(project_2.id).categories.to_a.first
         expect(found_category).to eq(category)
       end
     end
 
     it 'can get model without current_tenant' do
       MultiTenant.without do
-        found_category = Project.find(project2.id).categories.to_a.first
+        found_category = Project.find(project_2.id).categories.to_a.first
         expect(found_category).to eq(category)
       end
     end
diff --git a/spec/activerecord-multi-tenant/record_modifications_spec.rb b/spec/activerecord-multi-tenant/record_modifications_spec.rb
index 01423f8..7637617 100644
--- a/spec/activerecord-multi-tenant/record_modifications_spec.rb
+++ b/spec/activerecord-multi-tenant/record_modifications_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 
 describe MultiTenant, 'Record modifications' do
@@ -8,6 +6,7 @@ describe MultiTenant, 'Record modifications' do
   let(:project) { Project.create! name: 'something', account: account }
   let(:project2) { Project.create! name: 'something2', account: account2, id: project.id }
 
+
   it 'includes the tenant_id in DELETEs when using object.destroy' do
     # two records with same id but different account_id
     # when doing project.destroy it should delete only the current one
@@ -17,7 +16,7 @@ describe MultiTenant, 'Record modifications' do
     expect(project2.account).to eq(account2)
     expect(project.id).to eq(project2.id)
 
-    MultiTenant.without do
+    MultiTenant.without() do
       expect(Project.count).to eq(2)
       project.destroy
       expect(Project.count).to eq(1)
@@ -29,6 +28,7 @@ describe MultiTenant, 'Record modifications' do
     MultiTenant.with(account2) do
       expect(Project.where(id: project2.id).first).to be_present
     end
+
   end
 
   it 'includes the tenant_id in DELETEs when using object.delete' do
@@ -40,7 +40,7 @@ describe MultiTenant, 'Record modifications' do
     expect(project2.account).to eq(account2)
     expect(project.id).to eq(project2.id)
 
-    MultiTenant.without do
+    MultiTenant.without() do
       expect(Project.count).to eq(2)
       project.delete
       expect(Project.count).to eq(1)
@@ -54,25 +54,6 @@ describe MultiTenant, 'Record modifications' do
     end
   end
 
-  it 'should not update other objects with same id when calling object.update_columns' do
-    # When two records with same id but different account_id are updated, it should only update the current one
-    expect(project.account).to eq(account)
-    expect(project2.account).to eq(account2)
-    expect(project.id).to eq(project2.id)
-
-    MultiTenant.without do
-      project2.update_columns(name: 'newthing2')
-      expect(project.reload.name).to eq('something')
-      expect(project2.reload.name).to eq('newthing2')
-    end
-  end
-
-  it 'should return the same object when calling object.reload' do
-    # When two records with same id but different account_id are updated, it should not return the other object
-    expect(project.reload.account_id).to eq(account.id)
-    expect(project2.reload.account_id).to eq(account2.id)
-  end
-
   it 'test delete for reference tables' do
     category1 = Category.create! name: 'Category 1'
     expect(Category.count).to eq(1)
diff --git a/spec/activerecord-multi-tenant/schema_dumper_tester.rb b/spec/activerecord-multi-tenant/schema_dumper_tester.rb
new file mode 100644
index 0000000..e69de29
diff --git a/spec/activerecord-multi-tenant/sidekiq_spec.rb b/spec/activerecord-multi-tenant/sidekiq_spec.rb
index 30b9c79..7307e8a 100644
--- a/spec/activerecord-multi-tenant/sidekiq_spec.rb
+++ b/spec/activerecord-multi-tenant/sidekiq_spec.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 require 'spec_helper'
 require 'sidekiq/client'
 require 'activerecord-multi-tenant/sidekiq'
@@ -7,29 +5,18 @@ require 'activerecord-multi-tenant/sidekiq'
 describe MultiTenant, 'Sidekiq' do
   let(:server) { Sidekiq::Middleware::MultiTenant::Server.new }
   let(:account) { Account.create(name: 'test') }
-  let(:deleted_account) { Account.create(name: 'deleted') }
-
-  before { deleted_account.destroy! }
 
   describe 'server middleware' do
     it 'sets the multitenant context when provided in message' do
-      server.call(double, { 'bogus' => 'message',
-                            'multi_tenant' => { 'class' => account.class.name, 'id' => account.id } },
-                  'bogus_queue') do
+      server.call(double,{'bogus' => 'message',
+        'multi_tenant' => { 'class' => account.class.name, 'id' => account.id}},
+        'bogus_queue') do
         expect(MultiTenant.current_tenant).to eq(account)
       end
     end
 
-    it 'sets the multitenant context (id) even if tenant not found' do
-      server.call(double, { 'bogus' => 'message',
-                            'multi_tenant' => { 'class' => deleted_account.class.name, 'id' => deleted_account.id } },
-                  'bogus_queue') do
-        expect(MultiTenant.current_tenant).to eq(deleted_account.id)
-      end
-    end
-
     it 'does not set the multitenant context when no tenant provided' do
-      server.call(double, { 'bogus' => 'message' }, 'bogus_queue') do
+      server.call(double, {'bogus' => 'message'}, 'bogus_queue') do
         expect(MultiTenant.current_tenant).to be_nil
       end
     end
diff --git a/spec/schema.rb b/spec/schema.rb
index 517cf96..92bfdcb 100644
--- a/spec/schema.rb
+++ b/spec/schema.rb
@@ -1,5 +1,3 @@
-# frozen_string_literal: true
-
 # Resets the database, except when we are only running a specific spec
 ARGV.grep(/\w+_spec\.rb/).empty? && ActiveRecord::Schema.define(version: 1) do
   enable_extension_on_all_nodes 'uuid-ossp'
@@ -9,7 +7,6 @@ ARGV.grep(/\w+_spec\.rb/).empty? && ActiveRecord::Schema.define(version: 1) do
     t.column :name, :string
     t.column :subdomain, :string
     t.column :domain, :string
-    t.column :password, :string
   end
 
   create_table :projects, force: true, partition_key: :account_id do |t|
@@ -30,17 +27,6 @@ ARGV.grep(/\w+_spec\.rb/).empty? && ActiveRecord::Schema.define(version: 1) do
     t.column :completed, :boolean
   end
 
-  create_table :managers_tasks, force: true, partition_key: :account_id do |t|
-    t.column :account_id, :integer
-    t.column :manager_id, :integer
-    t.column :task_id, :integer
-  end
-
-  create_table :managers_projects, force: true do |t|
-    t.column :project_id, :integer
-    t.column :manager_id, :integer
-  end
-
   create_table :sub_tasks, force: true, partition_key: :account_id do |t|
     t.column :account_id, :integer
     t.column :name, :string
@@ -48,13 +34,6 @@ ARGV.grep(/\w+_spec\.rb/).empty? && ActiveRecord::Schema.define(version: 1) do
     t.column :type, :string
   end
 
-  create_table :optional_sub_tasks, force: true do |t|
-    t.references :account, :integer
-    t.column :sub_task_id, :integer
-    t.column :name, :string
-    t.column :type, :string
-  end
-
   create_table :countries, force: true do |t|
     t.column :name, :string
   end
@@ -155,7 +134,6 @@ class Account < ActiveRecord::Base
   multi_tenant :account
   has_many :projects
   has_one :manager, inverse_of: :account
-  has_many :optional_sub_tasks
 end
 
 class Project < ActiveRecord::Base
@@ -166,7 +144,6 @@ class Project < ActiveRecord::Base
 
   has_many :project_categories
   has_many :categories, through: :project_categories
-  has_and_belongs_to_many :managers
 
   validates_uniqueness_of :name, scope: [:account]
 end
@@ -174,15 +151,12 @@ end
 class Manager < ActiveRecord::Base
   multi_tenant :account
   belongs_to :project
-  has_and_belongs_to_many :tasks, tenant_column: :account_id, tenant_enabled: true,
-                                  tenant_class_name: 'Account'
 end
 
 class Task < ActiveRecord::Base
   multi_tenant :account
   belongs_to :project
   has_many :sub_tasks
-  has_and_belongs_to_many :managers, tenant_column: :account_id, tenant_enabled: true
 
   validates_uniqueness_of :name
 end
@@ -191,14 +165,6 @@ class SubTask < ActiveRecord::Base
   multi_tenant :account
   belongs_to :task
   has_one :project, through: :task
-  has_many :optional_sub_tasks
-end
-
-with_belongs_to_required_by_default do
-  class OptionalSubTask < ActiveRecord::Base
-    multi_tenant :account, optional: true
-    belongs_to :sub_task
-  end
 end
 
 class StiSubTask < SubTask
@@ -234,11 +200,10 @@ end
 class Comment < ActiveRecord::Base
   multi_tenant :account
   belongs_to :commentable, polymorphic: true
-  belongs_to :task, -> { where(comments: { commentable_type: 'Task' }) }, foreign_key: 'commentable_id'
+  belongs_to :task, -> { where(comments: { commentable_type: 'Task'  }) }, foreign_key: 'commentable_id'
 end
 
 class Organization < ActiveRecord::Base
-  multi_tenant :organization
   has_many :uuid_records
 end
 
@@ -247,7 +212,7 @@ class UuidRecord < ActiveRecord::Base
 end
 
 class Category < ActiveRecord::Base
-  has_many :project_categories
+  has_many  :project_categories
   has_many :projects, through: :project_categories
 end
 
diff --git a/spec/spec_helper.rb b/spec/spec_helper.rb
index 28628ff..04c43c4 100644
--- a/spec/spec_helper.rb
+++ b/spec/spec_helper.rb
@@ -1,57 +1,17 @@
-# frozen_string_literal: true
-
 $LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
 $LOAD_PATH.unshift(File.dirname(__FILE__))
 
-# Codecov is enabled when CI is set to true
-if ENV['CI'] == 'true'
-  puts 'Enabling Simplecov to upload code coverage results to codecov.io'
-  require 'simplecov'
-  SimpleCov.start 'rails' do
-    add_filter '/test/' # Exclude test directory from coverage
-    add_filter '/spec/' # Exclude spec directory from coverage
-    add_filter '/config/' # Exclude config directory from coverage
-
-    # Add any additional filters or exclusions if needed
-    # add_filter '/other_directory/'
-
-    add_group 'Lib', '/lib' # Include the lib directory for coverage
-    puts "Tracked files: #{SimpleCov.tracked_files}"
-  end
-  SimpleCov.minimum_coverage 80
-
-  require 'simplecov-cobertura'
-  SimpleCov.formatter = SimpleCov::Formatter::CoberturaFormatter
-end
-
 require 'active_record/railtie'
 require 'action_controller/railtie'
 require 'rspec/rails'
 
-module MultiTenantTest
-  class Application < Rails::Application; end
-end
-
-# Specifies columns which shouldn't be exposed while calling #inspect.
-ActiveSupport.on_load(:active_record) do
-  self.filter_attributes += MultiTenantTest::Application.config.filter_parameters
-end
-
-require 'activerecord_multi_tenant'
-
-# It's necessary for testing the filtering of senstive column values in ActiveRecord.
-# Refer to "describe 'inspect method filters senstive column values'"
-#
-# To verify that ActiveSupport.on_load(:active_record) is not being unnecessarily invoked,
-# this line should be placed after "require 'activerecord_multi_tenant'" and before ActiveRecord::Base is called.
-MultiTenantTest::Application.config.filter_parameters = [:password]
+require 'activerecord-multi-tenant'
 
 require 'bundler'
 Bundler.require(:default, :development)
-require_relative 'support/format_sql'
 
-dbconfig = YAML.safe_load_file(File.join(File.dirname(__FILE__), 'database.yml'))
-ActiveRecord::Base.logger = Logger.new(File.join(File.dirname(__FILE__), 'debug.log'))
+dbconfig = YAML::load(IO.read(File.join(File.dirname(__FILE__), 'database.yml')))
+ActiveRecord::Base.logger = Logger.new(File.join(File.dirname(__FILE__), "debug.log"))
 ActiveRecord::Base.establish_connection(dbconfig['test'])
 
 RSpec.configure do |config|
@@ -65,6 +25,9 @@ RSpec.configure do |config|
 
   config.before(:suite) do
     MultiTenant::FastTruncate.run
+
+    # Keep this here until https://github.com/citusdata/citus/issues/1236 is fixed
+    MultiTenant.enable_with_lock_workaround
   end
 
   config.after(:each) do
@@ -72,14 +35,15 @@ RSpec.configure do |config|
   end
 end
 
-# rubocop:disable Lint/UnusedMethodArgument
-# changing the name of the parameter breaks tests
-def with_belongs_to_required_by_default(&block)
-  default_value = ActiveRecord::Base.belongs_to_required_by_default
-  ActiveRecord::Base.belongs_to_required_by_default = true
-  yield
-ensure
-  ActiveRecord::Base.belongs_to_required_by_default = default_value
+module MultiTenantTest
+  class Application < Rails::Application; end
+end
+
+MultiTenantTest::Application.config.secret_token = 'x' * 40
+MultiTenantTest::Application.config.secret_key_base = 'y' * 40
+
+def uses_prepared_statements?
+  ActiveRecord::Base.connection.prepared_statements
 end
-# rubocop:enable Lint/UnusedMethodArgument
+
 require 'schema'
diff --git a/spec/support/format_sql.rb b/spec/support/format_sql.rb
deleted file mode 100644
index e9c0e22..0000000
--- a/spec/support/format_sql.rb
+++ /dev/null
@@ -1,20 +0,0 @@
-# frozen_string_literal: true
-
-require 'anbt-sql-formatter/formatter'
-
-module SQLFormatter
-  def format_sql(sql)
-    rule = AnbtSql::Rule.new
-    rule.keyword = AnbtSql::Rule::KEYWORD_UPPER_CASE
-    %w[count sum substr date].each do |func_name|
-      rule.function_names << func_name.upcase
-    end
-    rule.indent_string = '    '
-    formatter = AnbtSql::Formatter.new(rule)
-    formatter.format(sql.dup)
-  end
-end
-
-RSpec.configure do |config|
-  config.include SQLFormatter
-end
